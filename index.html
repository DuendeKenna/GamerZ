<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>La Nave del Medio</title>
    <link rel="icon"
        href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>✨</text></svg>">
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700;900&family=Press+Start+2P&family=Saira:wght@400;700;900&family=VT323&family=Roboto:wght@400;700&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <script src="https://code.iconify.design/1/1.0.7/iconify.min.js"></script>
    <style>
        body {
            font-family: 'Inter', sans-serif;
            overflow-x: hidden;
            /* Prevent horizontal scroll */
            background-image: url('covers_wall.webp');
            background-size: cover;
            background-position: center;
            background-attachment: fixed;
        }

        h1,
        h2 {
            font-family: 'Saira', sans-serif;
        }

        /* --- Custom Brand Colors --- */
        .green-222 {
            color: #95ef81;
        }

        .green-333 {
            color: #42d232;
        }

        .green-777 {
            color: #107c10;
        }

        .blueish {
            color: #0098e9;
        }

        /* --- Custom Software Checkbox --- */
        .custom-software-checkbox {
            width: 1.25rem;
            /* w-5 */
            height: 1.25rem;
            /* h-5 */
            border-radius: 0.375rem;
            /* rounded-md */
            border: 2px solid #6b7280;
            /* border-gray-500 */
            background-color: #374151;
            /* bg-gray-700 */
            transition: all 0.2s ease-in-out;
            flex-shrink: 0;
            position: relative;
        }

        .custom-software-checkbox.checked {
            background-color: #42d232;
            /* green-333 */
            border-color: #95ef81;
            /* green-222 */
        }

        .custom-software-checkbox.checked::after {
            content: '\2714';
            color: white;
            font-size: 0.9rem;
            font-weight: bold;
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
        }

        /* --- Font Families --- */
        .font-gamer {
            font-family: 'Press Start 2P', cursive;
        }

        .font-vt323 {
            font-family: 'VT323', monospace;
        }

        .font-saira {
            font-family: 'Saira', sans-serif;
        }

        .font-roboto {
            font-family: 'Roboto', sans-serif;
        }

        /* --- Brand Specific Styles --- */
        .brand-title {
            position: relative;
            font-weight: 900;
            background: linear-gradient(to right, #6366f1, #a855f7);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            z-index: 1;
        }

        .special-subtitle {
            font-family: 'Saira';
            letter-spacing: 0.03em;
            background: linear-gradient(to top, #bd570e, #e9bb06);
            border-radius: 25px;
            color: rgb(41, 1, 1) !important;
            box-shadow: rgba(0, 0, 0, 0.849) 0px 0px 50px;
        }

        .special-subtitle:hover {
            background: linear-gradient(to right, #fb923c, #b9a333);
        }

        /* --- Card Effects (Games & Peripherals) --- */
        .card-game {
            position: relative;
        }

        .card-game label {
            position: relative;
            /* Container for the sticker & gloss */
            overflow: hidden;
            display: block;
            border-radius: 0.75rem;
            /* rounded-xl */
            transition: transform 0.3s ease;
            /* Apply transition to the container */
            aspect-ratio: 3/4;
        }

        .card-game label::after {
            /* Glossy effect - Adjusted for plastic relief */
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(to bottom right,
                    rgba(255, 255, 255, 0.4) 0%,
                    /* Top-left highlight - more pronounced */
                    rgba(255, 255, 255, 0.15) 50%,
                    /* Center subtle */
                    rgba(0, 0, 0, 0.15) 50%,
                    /* Bottom-right shadow */
                    rgba(0, 0, 0, 0.4) 100%
                    /* Bottom-right darker shadow - more pronounced */
                );
            border-radius: 0.75rem;
            /* Match card border-radius */
            pointer-events: none;
            mix-blend-mode: overlay;
            /* Blends nicely with image */
            transition: opacity 0.3s ease-in-out;
            opacity: 1;
            /* Base opacity always visible, but subtle */
        }

        .card-game label:hover::after,
        .card-game input:checked+label::after {
            opacity: 1;
            /* Make the effect more notable on hover/checked */
        }

        .card-game label img {
            transition: filter 0.3s ease;
            filter: grayscale(33%);
        }

        .card-game label:hover,
        .card-game input:checked+label {
            transform: scale(1.07);
            z-index: 10;
        }

        .card-game input:checked+label img {
            filter: grayscale(0%) brightness(1.1);
        }

        .card-game input:checked+label {
            box-shadow: 0 0 0 3px rgba(139, 92, 246, 0.5);
        }

        .card-peripheral {
            transition: all 0.3s ease-in-out;
        }
        
        .card-peripheral img {
            transition: filter 0.3s ease-in-out;
        }

        .card-peripheral:hover,
        .card-peripheral.active {
            transform: scale(1.05);
        }

        .card-peripheral.active {
            box-shadow: 0 0 0 3px rgba(139, 92, 246, 0.5);
            border-color: rgba(139, 92, 246, 0.5);
        }

        .card-peripheral.disabled {
            opacity: 0.5;
            cursor: not-allowed;
            filter: grayscale(100%);
        }

        /* --- Game Title Sticker --- */
        .game-title-sticker {
            position: absolute;
            background: linear-gradient(to right, #ef4444, #f97316);
            padding: 0.2rem 0.6rem;
            border-radius: 4px;
            font-weight: 700;
            font-size: 0.75rem;
            /* text-xs */
            color: white;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.5);
            text-align: center;
            max-width: 80%;
            transition: opacity 0.2s ease-in-out;
            z-index: 10;
        }

        /* --- Error Toast Animation --- */
        #error-toast {
            position: fixed;
            bottom: -150px;
            left: 50%;
            transform: translateX(-50%);
            transition: bottom 0.4s ease-out, opacity 0.4s ease-out;
            opacity: 0;
            z-index: 50;
            width: calc(100% - 2rem);
            max-width: 400px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.4);
        }

        #error-toast.show {
            bottom: 20px;
            opacity: 1;
        }

        /* --- Price Badge --- */
        .launch-badge {
            position: absolute;
            top: -24px;
            left: 50%;
            transform: translateX(-50%) rotate(6deg);
            background: linear-gradient(to right, #b12020a4, #cf5f0e);
            padding: 0.2rem 0.5rem;
            border-radius: 6px;
            font-weight: 700;
            letter-spacing: 0.05em;
            font-size: 0.9rem;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.4);
            white-space: nowrap;
        }

        @media (min-width: 768px) {
            .launch-badge {
                left: auto;
                right: -42px;
                transform: rotate(6deg);
            }
        }

        /* --- Animated Games Card Background --- */
        .animated-bg-games {
            min-height: 480px;
            /* Increased height for better effect visibility */
            box-shadow: inset 0 0 12px 4px rgba(0, 0, 0, 0.55);
        }

        .animated-bg-games::before {
            content: '';
            position: absolute;
            top: -10%;
            left: -10%;
            width: 120%;
            height: 120%;
            background-image: url('wall_covers_sm.jpeg');
            background-size: 250%;
            animation:
                ping-pong-path 45s ease-in-out infinite,
                blur-and-fade 10s ease-in-out infinite alternate;
            z-index: 0;
        }

        .animated-bg-games>* {
            position: relative;
            z-index: 1;
        }

        @keyframes ping-pong-path {
            0% {
                background-position: 0% 0%;
            }

            25% {
                background-position: 100% 0%;
            }

            50% {
                background-position: 100% 100%;
            }

            75% {
                background-position: 0% 100%;
            }

            100% {
                background-position: 0% 0%;
            }
        }

        @keyframes blur-and-fade {
            from {
                filter: blur(0px);
                opacity: 0.15;
            }

            to {
                filter: blur(2px);
                /* Dynamic blur effect */
                opacity: 0.3;
            }
        }


        /* --- Neon Highlight (Using brand color) --- */
        .neon-green-highlight {
            border: 2px solid #42d23291;
            box-shadow: 0 0 15px #42d23294, inset 0 0 10px rgba(66, 210, 50, 0.3);
            color: #f0fdf4;
        }

        /* --- CTA Button (WhatsApp Brand Aligned) --- */
        .cta-button {
            animation: glow-whatsapp 4s ease-in-out infinite;
            background: linear-gradient(to right, #25D366, #128C7E);
            border: 2px solid #075e54;
            transition: all 0.3s ease;
        }

        .cta-button:hover {
            background: linear-gradient(to right, #29e66d, #15a589);
            transform: scale(1.05);
        }

        @keyframes glow-whatsapp {

            0%,
            100% {
                box-shadow: 0 0 4px #25D366, 0 0 8px #128C7E, 0 0 12px #075e54;
            }

            50% {
                box-shadow: 0 0 8px #25D366, 0 0 15px #128C7E, 0 0 25px #075e54;
            }
        }

        #games-section {
            padding-bottom: 0px;
        }

        /* --- "Ver más" Neon Button --- */
        .load-more-button {
            background: transparent;
            /* Changed to transparent */
            color: #42d232;
            opacity: 0.6;
            border: 6px solid #107c10;
            /* Solid border */
            border-radius: 15px;
            padding: 20px 35px;
            letter-spacing: 5px;
            cursor: pointer;
            font-weight: bold;
            filter: drop-shadow(0 0 15px #42d232) drop-shadow(0 0 50px #42d232) contrast(2) brightness(2);
            transition: .5s;
        }

        .load-more-button:hover {
            color: black;
            background-color: #42d232;
            filter: drop-shadow(0 0 20px #42d232) contrast(2) brightness(2);
        }

        /* --- Essential Software Highlight --- */
        .essential-software {
            background-color: rgba(66, 210, 50, 0.1);
            border-left: 3px solid #42d232;
        }

        /* --- Animation & Misc --- */
        .animate-float {
            animation: float 6s ease-in-out infinite;
        }

        @keyframes float {

            0%,
            100% {
                transform: translateY(0) translateX(0);
            }

            25% {
                transform: translateY(-5px) translateX(2px);
            }

            50% {
                transform: translateY(0) translateX(-2px);
            }

            75% {
                transform: translateY(5px) translateX(0);
            }
        }

        .lucas-price {
            font-size: 4rem;
            line-height: 1;
            font-weight: bold;
            color: #22d3ee;
            animation: price-glow 3s ease-in-out infinite;
            text-shadow: solid 3px 3px black;
        }

        @keyframes price-glow {

            0%,
            100% {
                text-shadow: 2px 2px 55px rgba(0, 0, 0, 0.5), 0 0 20px rgba(118, 18, 143, 0.801), 0 0 55px rgba(34, 211, 238, 0.2), 0 0 25px rgba(34, 211, 238, 0.2);
            }

            50% {
                text-shadow: 2px 2px 55px rgba(0, 0, 0, 0.5), 0 0 12px rgba(34, 211, 238, 0.35), 0 0 25px rgba(34, 211, 238, 0.25);
            }
        }

        .offer-banner-main,
        .offer-banner-contado {
            position: absolute;
            left: 50%;
            color: #ffffff;
            padding: 0.2rem 1rem;
            border-radius: 0.375rem;
            text-shadow: 1px 1px 2px rgb(0 0 0 / 50%);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.4);
            white-space: nowrap;
        }

        .offer-banner-main {
            background: linear-gradient(to right, #f97316, #fb923c);
            font-size: 1.3rem;
            animation: banner-swing-main 2.5s ease-in-out infinite alternate;
            transform: translateX(-50%) rotate(-7deg);
            bottom: 0;
        }

        .offer-banner-contado {
            background: #c2410c;
            font-size: 1.1rem;
            z-index: 10;
            animation: banner-swing-contado 2.5s ease-in-out infinite alternate;
            transform: translateX(-60%) rotate(-12deg);
            bottom: 2.2rem;
        }

        @keyframes banner-swing-contado {
            from {
                transform: translateX(-60%) rotate(-10deg);
            }

            to {
                transform: translateX(-60%) rotate(0deg);
            }
        }

        /* Hook section highlight */
        .hook-section strong {
            color: #42d232;
            text-shadow: 1px 1px 0 black;
        }

        .hook-section p {
            text-shadow: 2px 2px 3px black;
        }

        .hook-section .font-normal {
            font-family: 'Inter', sans-serif;
        }

        .load-more-container {
            padding-bottom: 4rem;
            margin-top: -4rem;
            background-color: #111827;
        }

        /* --- Feature Cards --- */
        .feature-card {
            background-color: rgba(31, 41, 55, 0.4);
            border: 1px solid rgba(75, 85, 99, 0.5);
            border-radius: 0.75rem;
            padding: 1.25rem 1rem;
            min-height: 160px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            backdrop-filter: blur(4px);
            -webkit-backdrop-filter: blur(4px);
            transition: all 0.3s ease-in-out;
            position: relative;
            overflow: hidden;
            /* Changed to hidden for ribbon */
        }

        .feature-card:hover {
            transform: translateY(-5px) scale(1.03);
            background-color: rgba(55, 65, 81, 0.7);
            border-color: rgba(34, 211, 238, 0.5);
            box-shadow: 0 0 20px rgba(34, 211, 238, 0.15);
        }

        .animated-bg-games:hover {
            box-shadow: 0 0 20px rgba(34, 211, 238, 0.15), inset 0 0 12px 4px rgba(0, 0, 0, 0.55);
        }

        /* --- Corner Ribbon Badge --- */
        .corner-ribbon-wrapper {
            width: 150px;
            height: 150px;
            overflow: hidden;
            position: absolute;
            top: -10px;
            right: -10px;
            z-index: 1;
        }

        .corner-ribbon {
            position: absolute;
            top: 35px;
            right: -35px;
            transform: rotate(45deg);
            width: 200px;
            background: linear-gradient(to right, #f97316, #facc15);
            font-family: 'Press Start 2P', cursive;
            font-size: 0.6rem;
            padding: 5px 0;
            text-align: center;
            box-shadow: 0 5px 10px rgba(0, 0, 0, 0.3);
            line-height: 1.2;
        }

        .corner-ribbon-text {
            color: #422006;
            text-shadow: 1px 1px 0px rgba(255, 255, 255, 0.2);
        }

        .despegue-text {
            text-shadow: 1px 1px 1px rgba(84, 0, 117, 0.2);
            letter-spacing: 1pt;
        }


        #slideshow-container {
            background-color: #353f4d;
        }

        #slideshow-container img {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            object-fit: contain;
            transition: opacity 0.8s ease-in-out;
        }

        #hero-wrapper {
            position: relative;
            /* Removed overflow-x: hidden to allow child elements to extend beyond its bounds */
        }

        #hero-background-in {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            background-image: url('hero-background.webp');
            background-size: cover;
            background-position: center;
            filter: invert(100%) sepia(1) saturate(1000%) hue-rotate(52deg);
            z-index: 0;
            animation: spin 33s linear infinite;
        }

        #hero-background {
            position: absolute;
            overflow: hidden;
            top: 55vh;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            animation: spin 10s ease-in-out infinite, cosmic-pulse 20s ease-in-out infinite;
        }

        @keyframes spin {
            from {
                transform: rotate(0deg);
            }

            to {
                transform: rotate(360deg);
            }
        }

        @keyframes cosmic-pulse {
            0% {
                transform: scale(0.8) rotate(0deg);
                filter: blur(20px);
                opacity: 0.2;
            }

            50% {
                transform: scale(1) rotate(1deg);
                filter: blur(12px);
                opacity: 0.1;
            }

            100% {
                transform: scale(0.8) rotate(0deg);
                filter: blur(20px);
                opacity: 0.2;
            }
        }

        /* @media (max-width: 767px) { #hero-background { display: none; } } */

        @keyframes float-up-down {

            0%,
            100% {
                transform: translateY(0);
            }

            50% {
                transform: translateY(-10px);
            }
        }

        #ovniUp {
            position: absolute;
            left: 55%;
            top: -15px;
            opacity: 0.63;
            filter: hue-rotate(50deg);
            animation: float-up-down 4s ease-in-out infinite, energy-beam 6s ease-in-out infinite;
            z-index: 30;
            /* Ensure OVNI is above other elements */
        }

        @keyframes energy-beam {
            0% {
                filter: hue-rotate(5deg);
                opacity: 0.6;
            }

            50% {
                filter: hue-rotate(50deg);
                opacity: 0.8;
            }

            100% {
                filter: hue-rotate(5deg);
                opacity: 0.6;
            }
        }

        .main-container {
            background-color: #111827;
            /* Restored to bg-gray-700 */
            box-shadow: 0 0 40px rgba(0, 0, 0, 0.7);
            position: relative;
            /* Needed for absolute positioning of child */
            /* Removed overflow-x: hidden to prevent clipping of pop-out images */
            overflow: visible;
            /* Allow content to overflow without being cut */
        }

        #game-grid-container {
            position: relative;
            padding-top: 1.5rem;
            /* Adjusted padding-top */

            /* Adjusted padding-bottom */
        }

        #game-grid-wrapper {
            overflow: hidden;
            transition: max-height 1.8s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            padding: 0 1rem;
        }

        #load-more-overlay {
            position: absolute;
            bottom: 0px;
            left: 0;
            width: 100%;
            height: 500px;
            background: linear-gradient(to top, #111827 25%, transparent);
            pointer-events: none;
            transition: opacity 1.5s;
        }

        footer {
            position: relative;
        }

        #memde_pointLeft {
            display: none;
            /* Hidden by default */
            position: absolute;
            bottom: -20px;
            max-width: 150px;
            /* Max width for general use */
            width: 40%;
            /* For smaller screens, width can be relative */
            z-index: 0;
            overflow-x: hidden;
            right: 0;
            /* Align to the right edge of its parent */
            transform: translateX(50%);
            /* Push half its width outside to the right */
            /* No specific 'left' property here */
        }

        @media (max-width: 767px) {

            /* For mobile specific adjustments */
            #memde_pointLeft {
                right: -10%;
                /* Adjust to keep it within view but slightly off-center */
                width: 50%;
                /* Make it responsive */
                max-width: 120px;
                /* Limit size on very small screens */
                transform: translateX(0%);
                /* Ensure no horizontal translation */
                bottom: -10px;
                /* Adjust vertical position for mobile */
            }
        }

        @media (min-width: 768px) {

            /* Tablet and up */
            #memde_pointLeft {
                bottom: -30px;
                width: auto;
                /* Let image natural width or max-width: 150px apply */
                right: 0;
                /* Keep it on the right for desktop */
                transform: translateX(50%);
                /* Continue pushing it off the right */
            }
        }

        /* --- Nueva Estilo para la Descripción de Categoría --- */
        .software-cat-desc {
            background-color: #1a1332;
            border-radius: 1rem;
            padding: 0.5rem 1rem;
            margin-bottom: 1rem;
            transition: background 0.3s, color 0.3s;
        }

        .software-card {
            background-color: #23272f;
            border-radius: 0.75rem;
            padding: 1rem;
            text-align: center;
            transition: transform 0.3s, background 0.3s;
            position: relative;
            overflow: hidden;
        }

        .software-card.selected {
            background-color: #374151;
        }

        .software-card.unselected {
            opacity: 0.7;
        }

        .software-card:hover {
            transform: translateY(-3px);
            background-color: #374151;
        }

        .software-icon {
            width: 48px;
            height: 48px;
            margin-bottom: 0.5rem;
        }

        .software-name {
            font-weight: 500;
            color: #e5e7eb;
            margin-bottom: 0.25rem;
        }

        .software-tick {
            position: absolute;
            top: 1rem;
            right: 1rem;
            color: #22c55e;
            opacity: 0;
            transition: opacity 0.3s;
        }

        .software-card.selected .software-tick {
            opacity: 1;
        }

        /* --- Soporte Técnico (memde_think.png) Responsive --- */
        #section-front-features .feature-card.soporte-tecnico-card {
            overflow: visible !important;
        }

        #section-front-features img[src*="memde_think.png"] {
            opacity: 1;
            position: absolute;
            bottom: 0;
            right: 0;
            left: auto;
            top: auto;
            height: 80%;
            width: auto;
            pointer-events: none;
            z-index: 30;
            transition: opacity 0.3s, right 0.3s, height 0.3s;
        }

        @media (max-width: 1023px) {
            #section-front-features img[src*="memde_think.png"] {
                opacity: 0.8;
                z-index: 0;
                height: 80%;
                right: 0;
            }
        }

        @media (min-width: 1024px) {
            #section-front-features img[src*="memde_think.png"] {
                height: 115%;
                right: -2.5rem;
                bottom: 0;
                left: auto;
                top: auto;
                z-index: 40;
                opacity: 1;
            }
        }

        @media (min-width: 1280px) {
            #section-front-features img[src*="memde_think.png"] {
                right: -4rem;
                height: 115%;
                bottom: 0;
                left: auto;
                top: auto;
            }
        }

        /* --- Hero Product Images --- */
        .hero-crox-img {
            position: absolute;
            margin-top: -133px;
            top: 55px !important;
            pointer-events: none;
            z-index: 20;
            width: auto;
            transition: all 0.3s ease-in-out;
            will-change: transform, top, left, right;
        }

        /* Desktop and up */
        @media (min-width: 1024px) {
            .hero-crox-img {
                height: 420px;
            }
        }

        /* Tablet */
        @media (max-width: 1023px) {
            .hero-crox-img {
                height: 320px;
            }
        }

        /* Mobile */
        @media (max-width: 767px) {
            .hero-crox-img {
                display: none;
            }
        }

        /* --- Tower Selector Styles --- */
        #tower-selector-container {
            position: relative;
            /* Needed for absolute positioning of children if any, and for overflow */
            width: 100%;
            aspect-ratio: 4/5;
            background-color: #353f4d;
            border-radius: 0.75rem;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3);
            overflow: visible;
            /* Key to allow elements to overflow */
            display: flex;
            /* Changed to flex container */
            flex-direction: column;
            /* Stack children vertically */
            justify-content: space-between;
            /* Push image container to top, controls to bottom */
            align-items: center;
            margin-bottom: 0.3rem;
            /*padding-bottom: 2.5rem;*/
        }

        #tower-selector-container .flex-grow {
            /* This div holds the image and expands to fill available space */
            position: absolute;
            /* Place it absolutely to allow name/arrows wrapper at bottom */
            top: 0;
            left: 0;
            width: 100%;
            height: calc(100% - 2.5rem);
            /* Take all height except bottom control height */
            display: flex;
            /* To center the image within it */
            justify-content: center;
            align-items: center;
            overflow: visible;
            /* Important for image to overflow its bounds inside this wrapper */
        }

        #current-tower-image {
            width: 100%;
            /* Fill the `flex-grow` container */
            height: 125%;
            /* Make it taller to overflow upwards */
            object-fit: contain;
            /* Keep aspect ratio, allow overflow if wider/taller than container */
            cursor: pointer;
            /* Change cursor to pointer for click interaction */
            transition: opacity 0.3s ease-in-out, transform 0.3s ease-in-out;
            z-index: 1;
            /* Below bottom controls */
            margin-top: -10%;
            /* Push the image up to show overflow at the top */
        }

        /* New wrapper for name and arrows */
        #tower-name-and-arrows-wrapper {
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 0.5rem 0;
            background-color: rgba(0, 0, 0, 0.6);
            border-top: 1px solid rgba(75, 85, 99, 0.5);
            box-shadow: 0 -2px 5px rgba(0, 0, 0, 0.3);
            height: 2.5rem;
            z-index: 10;
        }

        #current-tower-name {
            /* Styles as requested: same as select, plus padding for arrows */
            font-family: 'Saira', sans-serif;
            font-size: 1.125rem;
            /* text-lg */
            font-weight: 600;
            /* font-semibold */
            color: #95ef81;
            /* green-222 */
            text-shadow: 0 0 3px rgba(149, 239, 129, 0.3);
            white-space: nowrap;
            padding: 0.25rem 3rem;
            /* Increased horizontal padding to make space for arrows */
            background-color: transparent;
            /* No background here, parent wrapper provides it */
            border-radius: 0.25rem;
            z-index: 11;
            /* Ensure name is above arrows */
        }

        .tower-nav-arrow {
            position: absolute;
            /* Absolute relative to #tower-name-and-arrows-wrapper */
            top: 50%;
            transform: translateY(-50%);
            background-color: rgba(66, 210, 50, 0.7);
            /* Green-333 with some transparency */
            color: white;
            padding: 0.75rem;
            /* Increased padding for larger round button */
            border-radius: 50%;
            /* Make it round */
            cursor: pointer;
            z-index: 10;
            transition: background-color 0.3s ease, color 0.3s ease, box-shadow 0.3s ease;
            border: 2px solid #95ef81;
            /* Green-222 border */
            box-shadow: 0 0 8px #42d232, inset 0 0 5px rgba(149, 239, 129, 0.3);
            /* Neon glow */
            display: flex;
            /* Use flex to center icon */
            align-items: center;
            justify-content: center;
            width: 3rem;
            /* Fixed width for roundness */
            height: 3rem;
            /* Fixed height for roundness */
        }

        #prev-tower {
            left: 0;
            /* Align with left edge of wrapper */
            margin-left: -1.5rem;
            /* Pull half its width out to overlap container border */
        }

        #next-tower {
            right: 0;
            /* Align with right edge of wrapper */
            margin-right: -1.5rem;
            /* Pull half its width out to overlap container border */
        }

        .tower-nav-arrow:hover {
            background-color: rgba(66, 210, 50, 1);
            /* Solid green-333 on hover */
            color: #95ef81;
            /* Green-222 on hover */
            box-shadow: 0 0 15px #42d232, inset 0 0 8px rgba(149, 239, 129, 0.5);
            /* Stronger neon glow on hover */
        }

        /* --- Sticky Price Summary Card --- */
        #price-summary-card {
            position: fixed;
            bottom: 0;
            right: 0;
            width: fit-content;
            min-width: 250px;
            padding: 1rem 1.5rem;
            background-color: rgba(31, 41, 55, 0.9);
            border-top: 1px solid rgba(75, 85, 99, 0.5);
            border-left: 1px solid rgba(75, 85, 99, 0.5);
            border-top-left-radius: 0.75rem;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.4);
            backdrop-filter: blur(4px);
            -webkit-backdrop-filter: blur(4px);
            z-index: 100;
            
            opacity: 0;
            visibility: hidden;
            transform: translateY(100%);
            transition: opacity 0.4s ease-out, visibility 0.4s ease-out, transform 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            
            display: none; /* Hidden on mobile by default */
        }

        @media (min-width: 768px) {
            #price-summary-card {
                display: flex; /* Shown on tablet and up */
            }
        }

        #price-summary-card.visible {
            opacity: 1;
            visibility: visible;
            transform: translateY(0);
        }

        #price-summary-card .price-section {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            font-family: 'Saira', sans-serif;
        }

        #price-summary-card .price-value-row {
            display: flex;
            align-items: baseline;
            white-space: nowrap;
        }

        #price-summary-card .currency-value {
            font-weight: bold;
            line-height: 1;
            font-size: 3.5rem;
        }

        #price-summary-card .currency-text {
            font-size: 1.75rem;
            font-weight: bold;
            line-height: 1;
            margin-left: 0.5rem;
        }

        #price-summary-card .ars-price .currency-value,
        #price-summary-card .ars-price .currency-text {
            color: #22d3ee;
            text-shadow: 2px 2px 3px black;
        }

        #price-summary-card .usd-price .currency-value,
        #price-summary-card .usd-price .currency-text {
            color: #7a3ab7;
            text-shadow: 2px 2px 3px black;
        }

        #price-summary-card .separator {
            width: 1px;
            height: 4rem;
            background-color: rgba(75, 85, 99, 0.5);
            margin: 0 1.5rem;
        }
        
        #total-price-summary-usd-mobile {
            font-size: 2rem;
        }

        /* Select Styling */
        #ssd-select,
        #psu-select,
        #gpu-select {
            background-color: #374151;
            /* bg-gray-700 */
            border: 1px solid #42d232;
            /* green-333 border */
            color: #e5e7eb;
            /* text-gray-200 */
            padding: 0.25rem 0.5rem;
            border-radius: 0.375rem;
            /* rounded-md */
            font-size: 1rem;
            cursor: pointer;
            outline: none;
            /* Remove default focus outline */
            -webkit-appearance: none;
            /* Remove default browser styling for select */
            -moz-appearance: none;
            appearance: none;
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 20 20' fill='white'%3E%3Cpath fill-rule='evenodd' d='M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z' clip-rule='evenodd'/%3E%3C/svg%3E");
            background-repeat: no-repeat;
            background-position: right 0.5rem center;
            /* Adjusted position to fix overlap */
            background-size: 1em;
            padding-right: 2em;
            /* Ensure space for the arrow */
            font-family: 'Saira', sans-serif;
            /* Apply Saira font */
            transition: all 0.2s ease-in-out;
            /* Add transition for smoothness */
        }

        #ssd-select:focus,
        #psu-select:focus,
        #gpu-select:focus {
            border-color: #95ef81;
            /* green-222 on focus */
            box-shadow: 0 0 5px rgba(66, 210, 50, 0.4);
            /* Reduced glow intensity */
            background-color: #107c10;
            /* Darker green background on focus/open state */
        }

        /* Styling for the selected option text within the closed select */
        #component-list select {
            color: #95ef81;
            /* green-222 for selected text in closed select */
            font-weight: bold;
            text-shadow: 0 0 3px rgba(149, 239, 129, 0.3);
            /* Reduced text shadow intensity */
        }

        /* Dolar Popup Specific Styling */
        #dolar-popup {
            /* Ensure popup is on top */
            z-index: 1000 !important;

        }

        #popup-content {
            width: 300px;
        }

        #load-more-overlay {
            position: absolute;
        }

        #dolar-rates-list .dolar-rate-item {
            display: flex;
            flex-direction: column;
            align-items: flex-end;
            /* Align all content to the right */
            gap: 0.5rem;
            /* Space between name and values */
        }

        #dolar-rates-list .dolar-rate-item .dolar-name {
            /* New class for the dollar type name */
            font-weight: bold;
            color: #e5e7eb;
            /* Using Tailwind's gray-200 equivalent */
            margin-bottom: 0.5rem;
            /* Space below the name */
        }

        #dolar-rates-list .dolar-rate-item .text-right {
            text-align: right;
            /* Ensure text within this div aligns right */
            align-self: flex-end;
            /* Align values to the right within the item */
        }

        /* New animation for slower glow */
        @keyframes price-glow-slow {

            0%,
            100% {
                text-shadow: 2px 2px 30px rgba(0, 0, 0, 0.5), 0 0 10px rgba(118, 18, 143, 0.5), 0 0 30px rgba(34, 211, 238, 0.1), 0 0 15px rgba(34, 211, 238, 0.1);
            }

            50% {
                text-shadow: 2px 2px 30px rgba(0, 0, 0, 0.5), 0 0 6px rgba(34, 211, 238, 0.2), 0 0 15px rgba(34, 211, 238, 0.1);
            }
        }

        /* Universal section card style */
        .section-card-style {
            background-color: rgba(31, 41, 55, 0.9);
            /* Same background as price card */
            border: 1px solid rgba(75, 85, 99, 0.5);
            border-radius: 0.75rem;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.4);
            backdrop-filter: blur(4px);
            -webkit-backdrop-filter: blur(4px);
            padding-top: 2.5rem;
            /* Increased padding top */
            padding-bottom: 2.5rem;
            /* Increased padding bottom */
        }

        /* Component List Custom Styles */
        #component-list {
            display: flex;
            flex-direction: column;
            justify-content: space-around;
            /* Distribute items vertically */
            height: 100%;
            /* Occupy full height of parent column */
        }

        #component-list li {
            display: flex;
            flex-direction: column; /* Mobile-first: single column */
            align-items: flex-start; /* Align content to the left on mobile */
            gap: 0.5rem; /* Reduced gap for tighter mobile layout */
            width: 100%;
            margin-bottom: 2rem; /* Space between items on mobile */
        }

        @media (min-width: 768px) { /* md breakpoint */
            #component-list li {
                flex-direction: row; /* Revert to row layout on desktop */
                align-items: center;
                gap: 1.5rem; /* Adjusted gap for desktop */
                margin-bottom: 0;
            }
        }

        #component-list li .component-content-wrapper {
            display: flex;
            flex-direction: column;
            align-items: flex-start; /* Align text to the left */
            width: 100%;
            text-align: left; /* Align text to the left */
        }

        @media (min-width: 768px) { /* md breakpoint */
            #component-list li .component-content-wrapper {
                width: auto;
            }
        }

        #component-list li strong {
            font-size: 1.125rem;
            font-weight: 600;
            color: #e5e7eb;
            margin-bottom: 0.25rem;
        }

        #component-list select {
            width: 100%;
            max-width: 250px;
            margin-top: 0;
        }

        #component-list .description-text {
            font-family: 'Inter', sans-serif;
            color: #42d232;
            font-size: 1rem;
            margin-top: 0.25rem;
            min-height: 4.5rem;
            line-height: 1.5;
            padding-left: 0.5rem;
        }

        /* MODIFIED: CSS-based image transition for loading */
        .component-option-image,
        #current-tower-image {
            transition: filter 0.4s ease-in-out, opacity 0.4s ease-in-out;
        }

        .component-option-image.loading,
        #current-tower-image.loading {
            filter: grayscale(100%);
            opacity: 0.8;
        }

        #component-list .component-option-image {
            width: 100%; 
            max-width: 20rem; 
            object-fit: contain;
            flex-shrink: 0;
            margin-top: 0; 
            cursor: pointer;
        }

        @media (min-width: 768px) { /* md breakpoint */
            #component-list .component-option-image {
                width: 180px;
                max-width: none;
                left: 6rem;
                position: relative;
            }
        }

        /* Desktop Hover Zoom Effects & New Sizing */
        @media (min-width: 768px) {
            #current-tower-image:hover {
                transform: scale(1);
                transform-origin: center center;
                /* Expand from center */
            }

            #gpu-image,
            #psu-image {
                transform: scale(1.5);
                transform-origin: right center;
            }

/* #gpu-image:hover,
            #psu-image:hover {
                transform: scale(1.7);
            } */

            #ssd-image {
                transform: scale(1);
            }

            #ssd-image:hover {
                transform: scale(1);
            }
        }

        /* Mobile Sticky Price Summary Specific Styles */
        #mobile-price-summary-card {
            padding: 1rem 1.5rem;
            justify-content: center;
            align-items: center;
            position: fixed;
            font-weight: 600;
            bottom: -10px;
            left: 50%;
            transform: translateX(-50%);
            gap: 0rem;
            box-shadow: 0 -4px 15px rgba(0, 0, 0, 0.4);
            opacity: 0;
            width: fit-content;
            visibility: hidden;
            text-shadow: 2px 2px 3px black;
            padding-left: 1.2rem;
            padding-right: 1.2rem;
            transition: opacity 0.5s ease-in-out, visibility 0.5s ease-in-out;
        }

        #mobile-price-summary-card a {
            text-decoration: none;
        }

        #mobile-price-summary-card.show-mobile-price {
            opacity: 1;
            visibility: visible;
        }

        #mobile-price-summary-card .price-section {
            flex-direction: row;
            align-items: baseline;
            font-family: 'Saira', sans-serif;
        }

        #mobile-price-summary-card .currency-value {
            font-size: 3rem;
            /* Larger font size for main value on mobile (text-5xl) */
            line-height: 1;
        }

        #mobile-price-summary-card .currency-text {
            font-size: 1.125rem;
            /* Adjust size for "LUCAS" or "USD" if they were present */
            font-weight: bold;
            line-height: 1;
            margin-left: 0.25rem;
            /* Smaller margin for mobile */
            white-space: nowrap;
        }

        #mobile-price-summary-card .separator {
            width: 1px;
            height: 2.5rem;
            /* Shorter separator for mobile (h-8) */
            background-color: rgba(75, 85, 99, 0.5);
            /* Gray-500 equivalent */
        }

        #mobile-price-summary-card #usd-link-summary-mobile {
            align-self: left;
        }

        #garantia-section{
            font-size: 1.18rem;
        }

        .coneste {
            text-shadow: black 2px 2px 1px;
        }
        .coneste b{
            color: #42d232;
        }
        
        /* NEW: Styles for selected components preview */
        .summary-card-link {
            display: block;
            text-decoration: none;
            color: inherit;
        }
        .summary-card {
            background-color: white;
            color: #1f2937; /* text-gray-800 */
            border-radius: 0.5rem; /* rounded-lg */
            padding: 0.75rem; /* p-3 */
            width: 140px;
            height: 180px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: space-between;
            position: relative;
            overflow: hidden;
            transition: transform 0.2s ease-in-out, box-shadow 0.2s ease-in-out;
        }
        .summary-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 8px 20px rgba(0,0,0,0.2);
        }
        .summary-card-category {
            position: absolute;
            top: 0;
            left: 0;
            background-color: #4f46e5; /* bg-indigo-600 */
            color: white;
            padding: 0.125rem 0.5rem;
            font-size: 0.75rem; /* text-xs */
            font-weight: bold;
            border-top-left-radius: 0.5rem;
            border-bottom-right-radius: 0.5rem;
        }
        .summary-card img {
            margin-top: 1.5rem; /* space for category tag */
            max-height: 96px; /* h-24 */
            width: auto;
            max-width: 100%;
            object-fit: contain;
            flex-grow: 1;
        }
        .summary-card p {
            font-size: 0.75rem; /* text-xs */
            font-weight: 600;
            text-align: center;
            margin-top: 0.5rem;
            line-height: 1.2;
        }
        .component-link {
            color: #60a5fa; /* A subtle blue */
            text-decoration: none;
            font-size: 1rem!important;
            display: inline-block;

        }
        .component-link:hover {
            text-decoration: underline;
        }
        .component-link i {
            margin-left: 0.25rem; /* ml-1 */
            font-size: 0.75rem; /* text-xs */
        }
    </style>
</head>

<body class="bg-gray-900 text-white">

    <div id="dolar-popup"
        class="hidden fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4">
        <div id="popup-content"
            class="bg-gray-800/80 backdrop-blur-lg border border-gray-600/50 rounded-xl p-6 w-full max-w_sm text-white flex flex-col items-center justify-center">
            <h3 class="text-xl font-saira font-bold text-center mb-4 text-cyan-300">Cotizaciones Dólar</h3>
            <div id="dolar-rates-list" class="space-y-3">
            </div>
            <hr class="border-gray-600 my-4">
            <a id="google-link" href="#" target="_blank"
                class="block text-center text-sm text-indigo-400 hover:underline">Googlear &rarr;</a>
        </div>
    </div>


    <div id="error-toast"
        class="bg-red-600 text-white text-base rounded-lg p-4 shadow-2xl flex flex-col items-center gap-2">
        <span id="error-toast-message"></span>
        <button id="reset-selection-btn"
            class="hidden bg-white text-red-600 font-bold py-1 px-3 rounded-md text-sm">Reiniciar Selección</button>
    </div>

    <div class="container main-container mx-auto p-4 md:p-8 max-w-5xl">
        <div id="hero-wrapper" class="relative">
            <div id="hero-background" style="left: -1px; top: 66vh;pointer-events:none;">
                <div id="hero-background-in" style="pointer-events:none;left: 4px; top: -2px;"></div>
            </div>

            <img src="home-crox-A.png" id="home-crox-a" class="hero-crox-img" alt="Gabinete PC Gamer Básico"
                onerror="this.onerror=null;this.src='https://placehold.co/400x600/00000000/ffffff?text=PC+Case'">
            <img src="home-crox-B.png" id="home-crox-b" class="hero-crox-img" alt="Gabinete PC Gamer con Periféricos"
                onerror="this.onerror=null;this.src='https://placehold.co/400x600/00000000/ffffff?text=PC+Bundle'">

            <header class="text-center pt-8 relative">
                <img id="ovniUp" src="ovni1fade.png" class="w-32 h-auto" alt="OVNI"
                    onerror="this.onerror=null;this.src='https://placehold.co/128x128/00000000/ffffff?text=OVNI'">
                <img src="LaNave_LogoLetras.png" alt="Logo de La Nave del Medio" class="w-96 h-auto mx-auto mb-4"
                    onerror="this.onerror=null;this.src='https://placehold.co/192x64/00000000/ffffff?text=Logo'">
                <p class="font-vt323 text-6xl green-333 mt-2 tracking-wider"
                    style="text-shadow: 0 0 8px #42d232;">PC Gamer/Creator </p>
                <p class="green-333 text-2xl font-saira">Tu Opción de Gama Media a Medida</small></p>

                <div class="flex items-center justify-center mt-6">
                    <div class="price-container relative hidden">
                        <div class="launch-badge">JUGÁ & CREÁ con Calidá!!</div>
                        <p class="text-5xl font-bold text-cyan-400 price-highlight font-saira" id="top-total-price">
                            $555.000</p>
                        <div class="mt-1 flex items-baseline justify-center gap-2">
                            <span id="usd-price-display-top"
                                class="hidden font-saira text-violet-500 text-2xl cursor-pointer"></span>
                            <a id="usd-link-top" href="#" class="text-gray-500 text-xs hover:underline hidden">¿cuánto
                                está?</a>
                        </div>
                    </div>
                    <img src="smile-messi.gif" alt="Meme de Messi sonriendo"
                        class="w-24 h-auto -ml-8 z-10 md:w-32 md:ml-4 hidden"
                        onerror="this.onerror=null;this.src='https://placehold.co/128x128/00000000/ffffff?text=Meme'">
                </div>
            <!-- PORDIOCH -->
            <div  class="grid grid-cols-2 md:grid-cols-4 gap-4 ">
                                <div class="feature-card">
                    <img src="HardSelect.png" alt="Icono de Hardware Seleccionado" class="w-24 h-24 mb-3"
                        onerror="this.onerror=null;this.src='https://placehold.co/96x96/00000000/ffffff?text=Hard'">
                    <h4 class="font-saira font-bold text-white text-xl leading-tight">Hardware Seleccionado</h4>
                    <p class="text-s text-gray-300 mt-1">Equilibrando Precio/Calidad </p>
                </div>

                <div class="feature-card">
                    <img src="WinUpRound.png" alt="Logo de Windows 11" class="w-24 h-24 mb-3"
                        onerror="this.onerror=null;this.src='https://placehold.co/96x96/00000000/ffffff?text=Win11'">
                    <h4 class="font-saira font-bold text-white text-xl leading-tight">Windows 11 Optimizado</h4>
                    <p class="text-s text-gray-300 mt-1">Lo llamo <b class="text-white">WindOS</b> . . .<p class="text-xs text-gray-500">FLUYE COMO EL VIENTO ;)</p></p>
                </div>

                <div class="feature-card">
                    <img src="SoftInstalled.png" alt="Icono de Software Instalado" class="w-24 h-24 mb-3"
                        onerror="this.onerror=null;this.src='https://placehold.co/96x96/00000000/ffffff?text=Soft'">
                    <h4 class="font-saira font-bold text-white text-xl leading-tight">Programas Clave</h4>
                    <p class="text-s text-gray-300 mt-1">
                        Instalados para <br><b class="text-green-200">PRENDER</b>
                        <span id="dynamic-word" class="transition-all duration-700 ease-in-out font-bold text-green-333">USAR</span>
                    </p>
                    <script>
                        // Palabras a rotar
                        const words = ["USAR", "JUGAR", "CREAR","VOLAR"];
                        let current = 0;
                        const el = document.getElementById("dynamic-word");
                        // Calcular el ancho máximo
                        const maxLen = Math.max(...words.map(w => w.length));
                        el.style.width = `${maxLen}ch`;
                        el.style.display = "inline-block";
                        el.style.textAlign = "center";
                        setInterval(() => {
                            el.style.opacity = "0.2";
                            setTimeout(() => {
                                current = (current + 1) % words.length;
                                el.textContent = words[current];
                                el.style.opacity = "1";
                            }, 350);
                        }, 2300);
                    </script>
                    <style>
                        #dynamic-word {
                            transition: opacity 0.7s cubic-bezier(.4,0,.2,1);
                            opacity: 1;
                            color: #42d232; /* green-333 */
                            width: 5ch; /* Fallback for 5 characters */
                            display: inline-block;
                            text-align: center;
                        }
                    </style>
                </div>



                <div class="feature-card animated-bg-games">
                    <div class="corner-ribbon-wrapper">
                        <div class="corner-ribbon"><span class="corner-ribbon-text">OFERTA</span><br><span
                                class="despegue-text text-violet-700">DESPEGUE</span></div>
                    </div>
                    <div class="text-orange-400 text-4xl mb-3"><i class="fas fa-gift"></i></div>
                    <h4 class="font-saira font-bold text-white text-xl leading-tight">Hasta <p
                            class="text-orange-400 text-xl">3 Juegos Incluidos</p>
                    </h4>
                    <p class="text-s text-gray-300 mt-1">✔ Elegilos</p>
                </div>
            </div>
                
            </header>

            <div class="hook-section text-center max-w-4xl mx-auto mt-8 space-y-6 relative z-40">
                <div>

                <div class="mt-2 text-base text-gray-200 flex items-center justify-center gap-4">
                    
                    <p ><i class="fas fa-house-circle-check"></i> Entrega a Domicilio</p>
                    <p> </i><i class="fas fa-screwdriver-wrench"></i> Asistencia Técnica</p>
                        <p >en Toda <i class="text-blue-300">🌊La Costa</i></p>
                </div>
                                    <!-- <p class="text-4xl font-bold"><strong><i>¿Gama Alta?</i><br class="sm:hidden"> ¡Ni Hace Falta!</strong></p>
                        <p class="text-gray-200 font-saira text-3xl mt-2">con MENO<span class="text-3xl">$</span> de la 1/2 <i class="text-violet-500 text-4xl">VOLÁS⚡</i></p> -->
                    <h2 class="relative z-40 font-saira font-bold text-center mt-16 text-4xl lg:text-5xl "
                        style="color: #FFD700; text-shadow: 0 2px 12px #000a; letter-spacing: 1px;">¡ARMÁ TU NAVE!</h2>
                        <h1 class="text-2xl">Buscá un Mejor Precio o Potenciala</h1>
                        <p class=" mb-8 text-3xl text-yellow-300">▼</p>
                </div>


            </div>

<!--             <div class="text-center mt-8 md:hidden lg:block">
                <a href="#games-section"
                    class="special-subtitle inline-block text-lg px-6 py-3 transition duration-300 transform hover:scale-105">
                    <div class="flex items-center justify-center gap-5"><i class="fas fa-tasks text-2xl"></i>
                        <div class="text-left">
                            <span class="block leading-tight">Usá esta Web Interactiva</span>
                            <span class="block text-2sm font-sans -mt-2">para simular tu pedido</span>
                        </div>
                    </div>
                </a>
            </div> -->

            <section class="hidden bg-gray-800/50 border border-gray-700 rounded-2xl p-6 md:p-8 max-w-3xl mx-auto">
                <div class="grid grid-cols-1 md:grid-cols-3 gap-8 text-center">
                    <div class="flex flex-col items-center">
                        <i class="fas fa-tasks text-4xl text-orange-400 mb-3"></i>
                        <h3 class="text-xl font-bold text-gray-200">1. Checá tu Pedido</h3>
                    </div>
                    <div class="flex flex-col items-center">
                        <i class="fab fa-whatsapp text-4xl green-333 mb-3"></i>
                        <h3 class="text-xl font-bold text-gray-200">2. Enviámelo</h3>
                    </div>
                    <div class="flex flex-col items-center">
                        <i class="fas fa-comments text-4xl text-cyan-400 mb-3"></i>
                        <h3 class="text-xl font-bold text-gray-200">3. Despejá tus Dudas</h3>
                    </div>
                </div>
            </section>
        </div>

        <div id="price-card-visibility-zone">
            <section ID="section-hardware" class="my-16 -mt-4 text-center max-w-3xl mx-auto px-4 overflow-hidden md:overflow-visible">
<!--                 <h2 class="text-5xl font-bold mb-4 text-white">La Base de<p> La Nave</p>
                </h2> -->
                <p class="text-3xl text-gray-100 font-saira">
                    De <strong class="text-4xl font-vt323">base</strong> usamos:</p>


                <div class="mt-16 space-y-3">
                    <!-- CPU Row -->
                    <div class="grid grid-cols-1 md:grid-cols-12 items-center gap-x-1 gap-y-6">
                        <div class="md:col-span-5">
                            <img id="combo_cpu_ram_mother" src="comps/combos/ryzen5600g.png" alt="Ryzen 5 5600g" class="w-3/4 mx-auto md:w-[130%] md:-ml-16 h-auto rounded-xl shadow-lg" onerror="this.onerror=null;this.src='comps/combos/ryzen5600g.webp';">
                        </div>
                        <div class="md:col-span-7 text-center md:text-left">
                            <p class="font-saira text-4xl md:text-5xl green-333 coneste"><b>Ryzen 5</b> 5600g</p>
                            <p class="font-saira text-2xl md:text-4xl green-333 mt-2 coneste"><b>16 GB</b>  RAM <small>en DualChannel</small></p>
                            <p class="font-saira text-2xl md:text-3xl green-333 coneste">Motherboard <small>A520 Asrock</small></p>
                            <p class="text-lg md:text-xl text-green-200 mt-2 coneste">Con este <b>excelente</b> combo con gráfica integrada <b>¡no te hace falta placa de video!</b></p>
                            <p class="text-lg md:text-xl text-green-600 text-right mt-1">...pero podemos agregarla si buscás gráficos <i>tope de gama</i></p>
                        </div>
                    </div></div>
            
                <h2 class="relative z-40 font-saira font-bold text-center mt-12 text-4xl md:text-2xl lg:text-5xl">
                    <span class="hidden sm:inline"
                        style="color: #FFD700; text-shadow: 0 2px 12px #000a; letter-spacing: 1px;">
                        <span style="color:rgba(66, 210, 50, 0.7);">▼</span> ELEGÍ EL RESTO <span
                            style="color:rgba(66, 210, 50, 0.7);">▼</span>
                    </span>
                    <span class="inline sm:hidden"
                        style="color: #FFD700; text-shadow: 0 2px 12px #000a; letter-spacing: 1px;">
                        ELEGÍ EL RESTO
                        <p style="color:rgba(66, 210, 50, 0.7);">▼</p>
                    </span>

                </h2>
            </section>


            <div id="main-components-container" class="max-w-5xl mx-auto p-6 md:p-8 mb-12 relative section-card-style">
                <section id="component-section" class="flex flex-col md:flex-row items-center gap-x-8 gap-y-6 h-full">
                    <div class="w-full md:w-1/2 flex-shrink-0 h-full flex flex-col items-center justify-center">
                        <div id="tower-selector-container"
                            class="relative w-full rounded-xl shadow-lg overflow-visible flex flex-col items-center h-full">
                            <!-- Main content area for the image, takes remaining height after bottom-controls -->
                            <div class="flex-grow flex items-center justify-center w-full h-full relative">
                                <img id="current-tower-image" src="" alt="Torre PC Gamer"
                                    class="w-full h-full object-contain"
                                    onerror="this.onerror=null;this.src='https://placehold.co/400x500/1f2937/ffffff?text=Torre+PC'">
                            </div>

                            <!-- This wrapper is positioned at the very bottom -->
                            <div id="tower-name-and-arrows-wrapper"
                                class="relative z-10 w-full flex justify-between items-center py-2 px-4">
                                <!-- The actual arrows and name -->
                                <i id="prev-tower" class="fas fa-chevron-left tower-nav-arrow"></i>
                                <span id="current-tower-name" class="bg-gray-800/80 px-2 py-1 rounded"></span>
                                <i id="next-tower" class="fas fa-chevron-right tower-nav-arrow"></i>
                            </div>
                        </div>
                        <p id="current-tower-price-display" class="text-center  text-lg text-gray-300"></p>
                    </div>
                    <div class="w-full md:w-1/2 h-full flex flex-col justify-around">
                        <ul id="component-list" class="space-y-4 text-gray-300 h-full flex flex-col justify-around">
                            <li class="flex flex-col md:flex-row items-center md:items-start w-full gap-4 md:gap-6">
                                <div class="component-content-wrapper text-left md:text-left">
                                    <strong class="text-lg font-semibold">Gráfica:</strong>
                                    <select id="gpu-select" class="ml-0 w-full max-w-[250px]"></select>
                                    <p id="gpu-description" class="description-text"></p>
                                </div>
                                <img id="gpu-image" src="" alt="Tarjeta Gráfica" class="component-option-image w-full max-w-xs mx-auto md:w-48 md:max-w-none md:mx-0">
                            </li>
                            <li class="flex flex-col md:flex-row items-center md:items-start w-full gap-4 md:gap-6">
                                <div class="component-content-wrapper text-left md:text-left">
                                    <strong class="text-lg font-semibold">Almacenamiento:</strong>
                                    <select id="ssd-select" class="ml-0 w-full max-w-[250px]"></select>
                                    <p id="ssd-description" class="description-text"></p>
                                </div>
                                <img id="ssd-image" src="" alt="Almacenamiento SSD" class="component-option-image w-full max-w-xs mx-auto md:w-48 md:max-w-none md:mx-0">
                            </li>
                            <li class="flex flex-col md:flex-row items-center md:items-start w-full gap-4 md:gap-6">
                                <div class="component-content-wrapper text-left md:text-left">
                                    <strong class="text-lg font-semibold">Fuente:</strong>
                                    <select id="psu-select" class="ml-0 w-full max-w-[250px]"></select>
                                    <p id="psu-description" class="description-text"></p>
                                </div>
                                <img id="psu-image" src="" alt="Fuente de Poder" class="component-option-image w-full max-w-xs mx-auto md:w-48 md:max-w-none md:mx-0">
                            </li>
                        </ul>
                    </div>
                </section>

            </div>


            <section id="section-perifericos" class="mb-12 section-card-style">
                <h2 class="text-3xl font-bold text-center mb-3">Periféricos Extra</h2>
                <p class="text-center text-gray-300 mb-8">Agregá Comodidad al Mando</p>
                <div class="grid grid-cols-2 sm:grid-cols-3 gap-6 max-w-4xl mx-auto">
                    <!-- Combo Mouse y Teclado Card -->
                    <div id="combo-card" class="card-peripheral bg-gray-800 p-2 rounded-xl border-2 border-transparent cursor-pointer flex flex-col items-center">
                        <div class="image-wrapper relative aspect-[4/3] w-full">
                            <img id="combo-image" src="" alt="Combo Mouse y Teclado" class="rounded-md w-full h-full object-cover" onerror="this.onerror=null;this.src='https://placehold.co/400x300/111827/ffffff?text=Combo'">
                        </div>
                        <p id="combo-text" class="text-center text-gray-400 mt-2 h-14 flex flex-col items-center justify-center"></p>
                    </div>
                    <!-- Keyboard Card -->
                    <div id="keyboard-card" class="card-peripheral bg-gray-800 p-2 rounded-xl border-2 border-transparent cursor-pointer flex flex-col items-center">
                        <div class="image-wrapper relative aspect-[4/3] w-full">
                            <img id="keyboard-image" src="" alt="Teclado" class="rounded-md w-full h-full object-cover" onerror="this.onerror=null;this.src='https://placehold.co/400x300/111827/ffffff?text=Teclado'">
                        </div>
                        <p id="keyboard-text" class="text-center text-gray-400 mt-2 h-14 flex flex-col items-center justify-center"></p>
                    </div>
                    <!-- Mouse Card -->
                    <div id="mouse-card" class="card-peripheral bg-gray-800 p-2 rounded-xl border-2 border-transparent cursor-pointer flex flex-col items-center">
                        <div class="image-wrapper relative aspect-[4/3] w-full">
                            <img id="mouse-image" src="" alt="Mouse" class="rounded-md w-full h-full object-cover" onerror="this.onerror=null;this.src='https://placehold.co/400x300/111827/ffffff?text=Mouse'">
                        </div>
                        <p id="mouse-text" class="text-center text-gray-400 mt-2 h-14 flex flex-col items-center justify-center"></p>
                    </div>
                    <!-- Monitor Card -->
                    <div id="monitor-card" class="card-peripheral bg-gray-800 p-2 rounded-xl border-2 border-transparent cursor-pointer flex flex-col items-center">
                        <div class="image-wrapper relative aspect-[4/3] w-full">
                            <img id="monitor-image" src="" alt="Monitor" class="rounded-md w-full h-full object-cover" onerror="this.onerror=null;this.src='https://placehold.co/400x300/111827/ffffff?text=Monitor'">
                        </div>
                        <p id="monitor-text" class="text-center text-gray-400 mt-2 h-14 flex flex-col items-center justify-center"></p>
                    </div>
                    <!-- Auriculares Card -->
                    <div id="auriculares-card" class="card-peripheral bg-gray-800 p-2 rounded-xl border-2 border-transparent cursor-pointer flex flex-col items-center">
                        <div class="image-wrapper relative aspect-[4/3] w-full">
                            <img id="auriculares-image" src="" alt="Auriculares" class="rounded-md w-full h-full object-cover" onerror="this.onerror=null;this.src='https://placehold.co/400x300/111827/ffffff?text=Auriculares'">
                        </div>
                        <p id="auriculares-text" class="text-center text-gray-400 mt-2 h-14 flex flex-col items-center justify-center"></p>
                    </div>
                    <!-- Parlantes Card -->
                    <div id="parlantes-card" class="card-peripheral bg-gray-800 p-2 rounded-xl border-2 border-transparent cursor-pointer flex flex-col items-center">
                        <div class="image-wrapper relative aspect-[4/3] w-full">
                            <img id="parlantes-image" src="" alt="Parlantes" class="rounded-md w-full h-full object-cover" onerror="this.onerror=null;this.src='https://placehold.co/400x300/111827/ffffff?text=Parlantes'">
                        </div>
                        <p id="parlantes-text" class="text-center text-gray-400 mt-2 h-14 flex flex-col items-center justify-center"></p>
                    </div>
                </div>
            </section>

            <div id="section-front-features" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 px-4 md:px-0">
           

                <div class="feature-card relative lg:col-span-2 soporte-tecnico-card"
                    style="padding: 1rem; overflow: hidden; min-height: 200px;">
                    <img src="memde_think.png" alt="Soporte técnico personalizado"
                        class="absolute -z-10 bottom-0 right-0 h-4/5 w-auto opacity-30 pointer-events-none" md:z-10
                        md:opacity-100 md:h-[110%] md:-right-4"
                        onerror="this.onerror=null;this.src='https://placehold.co/240x264/00000000/ffffff?text=Yo'">

                    <div class="relative z-10 w-full h-full flex flex-col justify-start items-start text-left">
                        <div class="flex items-center gap-4 mb-2 mt-1 sm:mb-3 sm:mt-0">
                            <img src="SoportePersonal.png" alt="Icono de Soporte Técnico"
                                class="w-20 h-20 sm:w-16 sm:h-16 md:w-20 md:h-20 flex-shrink-0"
                                onerror="this.onerror=null;this.src='https://placehold.co/96x96/00000000/ffffff?text=Soporte'">
                            <h4
                                class="font-saira font-bold text-white text-2xl leading-tight whitespace-nowrap mt-1 sm:mt-0">
                                Soporte Técnico</h4>
                        </div>
                        <div class="space-y-1 text-gray-300 max-w-xs pl-0">
                            <p class="flex items-center justify-start"><i
                                    class="fas fa-comments blueish fa-fw w-6"></i><span class="ml-2">Contacto Directo con @DuendeKenna</span>
                            </p>
                            <p class="flex items-center justify-start"><i class="fas fa-desktop blueish fa-fw w-6"></i><span
                                    class="ml-2">Asistencia Remota via Web</span></p>
                            <div class="flex items-center justify-start">
                                <i class="fas fa-screwdriver blueish fa-fw w-6"></i>
                                <div class="ml-2">
                                    <p>Servicio a Domicilio</p>
                                    <p class=" text-gray-400 -mt-1">en todo el Partido de La Costa</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="hidden md:flex lg:hidden items-center justify-center">
                    <div
                        class="special-subtitle inline-block text-lg px-6 py-3 transition duration-300 transform hover:scale-105">
                        <div class="flex items-center justify-center gap-5">
                            <i class="fas fa-tasks text-2xl"></i>
                            <div class="text-left">
                                <span class="block leading-tight">Usá esta Web Interactiva</span>
                                <span class="block text-2sm font-sans -mt-2">para simular tu pedido</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <section id="garantia-section" class="mb-12 section-card-style garantia-lista">
                <h2 class="text-3xl font-bold text-center mb-8">Condiciones y Garantía</h2>
                <div class="max-w-3xl mx-auto p-6 md:p-8 space-y-6">
                    <ul class="space-y-4 text-gray-300">
                        <li class="flex items-start gap-3"><i
                                class="fas fa-star green-333 mt-1"></i><span><strong>Componentes Nuevos:</strong> Con
                                garantía de proveedores de confianza.</span></li>
                        <li class="flex items-start gap-3"><i
                                class="fas fa-recycle text-cyan-400 mt-1"></i><span><strong>Componentes Usados:</strong>
                                Podemos <i>reciclar</i> los tuyos para abaratar el precio.</span></li>
                        <li class="flex items-start gap-3"><i
                                class="fas fa-shield-alt text-yellow-400 mt-1"></i><span><strong>Garantía Total:</strong> 12
                                meses de garantía en todos los componentes.</span></li>
                    </ul>
                    <div class="neon-green-highlight p-4 rounded-lg flex items-center justify-center gap-3 text-center">
                        <i class="fas fa-headset text-2xl"></i>
                        <span class="text-xl font-bold text-gray-200">Servicio Postventa | </span>
                        <span class="font-gamer text-xs">¿Algún Problema?<br>¡Lo Arreglo!</span>
                    </div>
                </div>
            </section>
        </div>


        <form id="orderForm">
            <section id="games-section" class="mb-12 section-card-style">
                <h2 class="text-3xl font-bold text-center mb-8">Juegazos que Viajan👌</h2>
                <p class="text-center green-333 -mt-4 mb-4 font-gamer">👇Seleccioná hasta 3</p>
                <p class="text-center text-violet-600 -mt-4 mb-8 font-gamer">Van Instalados!💾</p>
                <div id="game-grid-container" class="px-4 pt-4">
                    <div id="game-grid-wrapper">
                        <div id="game-list"
                            class="pt-2 pb-2 grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-6">
                        </div>
                    </div>
                    <div id="load-more-overlay" style="pointer-events:auto;"></div>
                </div>
                <div class="text-center load-more-container">
                    <button type="button" id="load-more-games" class="load-more-button font-gamer text-lg">Ver
                        Más</button>
                </div>
                    <p id="no-more-games" class="text-gray-500 text-center mt-2 mb-4 hidden">¿No viste el que querés? Pedimelo en Notas?
                    </p>
            </section>

            <section id="section-software" class="mb-12 section-card-style">
                <h2 class="text-5xl font-bold text-center mb-8">Programas Clave</h2>
                <p class="text-center font-saira text-xl mb-1">Te marco lo que Recomiendo👍</p>
                <p class="text-center text-gray-100 mb-1 text-xl">✅¡Hacé TU Selección!</p>
                <p class="text-center text-gray-400 mb-6">Podés modificarla luego...</p>
                <div id="software-list" class="max-w-2xl mx-auto space-y-4">
                </div>
                <p class="text-center text-gray-400 mt-6">¿Falta el tuyo? Pedimelo en Notas?</p>
            </section>

            <section class="mb-12 section-card-style">
                <div class="text-center max-w-4xl mx-auto">
                    <div id="selected-games-section" class="mb-6 hidden">
                        <p class="text-gray-400 text-lg">Juegos Incluidos</p>
                        <div id="selected-games-list" class="flex justify-center flex-wrap gap-2 mt-2">
                        </div>
                    </div>
            
                    <div class="flex flex-col items-center">
                        <h2 class="text-4xl font-bold mb-2">Selección y Precio Total</h2>
                        
                        <!-- Contenedor para las imágenes de los componentes seleccionados -->
                        <div id="selected-components-preview" class="w-full p-4 border-y border-gray-700 my-6">
                            <div id="selected-images-container" class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-4 justify-center">
                                <!-- Las imágenes se insertarán aquí con JS -->
                            </div>
                        </div>
            
                        <div class="grid grid-cols-2 gap-y-2 md:gap-x-4 w-full max-w-lg mt-4">
                            <div class="row-start-1 col-start-1 flex justify-center items-center">
                                <div class="relative h-24 w-40">
                                    <span class="offer-banner-contado font-saira">al contado</span>
                                    <span class="offer-banner-main font-saira">¡OFERTA ÚNICA!</span>
                                </div>
                            </div>
            
                            <div class="row-start-1 col-start-2 flex items-center justify-start">
                                <div>
                                    <p class="lucas-price text-left ml-4 font-saira"><span id="total-price">$500.000</span></p>
                                </div>
                            </div>
            
                            <div class="row-start-2 col-start-1 flex items-center justify-center text-right pr-2">
                                <div>
                                    <p class="text-sm green-333 whitespace-nowrap"><i class="fas fa-truck mr-1"></i>Entrega GRATIS</p>
                                    <p class="text-base text-white font-bold">🌊 En Toda <strong class="text-white">La Costa</strong></p>
                                </div>
                            </div>
            
                            <div class="row-start-2 col-start-2 flex items-center justify-start pl-4">
                                <div class="hidden">
                                    <p id="total-price-usd" class="font-saira text-2xl text-violet-400 hidden cursor-pointer"></p>
                                    <a id="usd-link-bottom" href="#" class="text-xs text-gray-500 hover:underline hidden -mt-1">
                                        <p>Ver Cotizaciones</p>
                                    </a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
            <br><br>

            <section id="notes-section" class="mb-12 text-center section-card-style">
                <h2 class="text-3xl font-bold text-center mb-8">Notas📝</h2>
                <textarea id="extra-notes"
                    class="w-full max-w-xl mx-auto block bg-gray-800 border border-gray-700 rounded-lg p-4 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition"
                    rows="4"
                    placeholder="🤔¿Dudas?&#10;💾¿Más Soft?&#10;⚙️¿Otro Hard?&#10;¿Alguna otra cuestión? . . ."></textarea>
            </section>

            <div class="text-center">
                <p id="pre-submit-text" class="text-gray-400 mb-7">Enviame tu Pedido/Consulta</p>
                <div class="flex flex-col items-center">
                    <button id="submit-button" type="submit"
                        class="cta-button text-white font-bold py-4 px-10 rounded-full text-xl flex items-center justify-center gap-4">
                        <i class="fab fa-whatsapp text-4xl"></i>
                        <span>¡Vamos a WhatsApp!</span>
                    </button>
                </div>
                <div id="confirmation-message"
                    class="hidden text-center p-6 bg-gray-900/80 border-2 border-green-333 rounded-2xl max-w-md mx-auto mt-4">
                    <i class="fas fa-check-circle text-5xl green-333 mb-4"></i>
                    <h3 class="text-2xl font-bold text-white mb-2">¡Pedido enviado!</h3>
                    <p class="text-gray-300 font-roboto">Gracias por tu consulta. Te responderemos a la brevedad por
                        WhatsApp.</p>
                </div>
            </div>
        </form>



        <footer class="text-center mt-16 pt-8 border-t border-gray-700">
            <div class="mb-6">
                <img src="logo.png" alt="kenna.inf" class="w-80 mx-auto mb-4"
                    onerror="this.onerror=null;this.src='https://placehold.co/320x80/00000000/ffffff?text=Logo'">
                <a id="service-link" href="https://www.facebook.com/kenna.inf/reviews" target="_blank"
                    class="text-indigo-400 hover:text-indigo-300 transition-colors">
                    <i class="fas fa-star"></i> Clientes Satisfechos<br class="sm:hidden"> con Mi Servicio
                </a>
            </div>
            <p class="text-gray-400 mb-4">Encontrame en Redes Sociales</p>
            <div class="flex justify-center gap-6 text-2xl">
                <a href="https://www.instagram.com/kenna.inf" target="_blank"
                    class="text-gray-400 hover:text-white transition"><i class="fab fa-instagram"></i></a>
                <a href="https://www.facebook.com/kenna.inf" target="_blank"
                    class="text-gray-400 hover:text-white transition"><i class="fab fa-facebook"></i></a>
            </div>
            <img id="memde_pointLeft" src="memde_pointLeft.png" alt=""
                onerror="this.onerror=null;this.src='https://placehold.co/250x300/00000000/ffffff?text=Yo'">
        </footer>

    </div>

    <!-- Fullscreen Overlay for Image Zoom (hidden by default) -->
    <div id="fullscreen-overlay" class="fullscreen-overlay hidden">
        <div class="zoomed-content">
            <img id="zoomed-image" src="" alt="Imagen ampliada del componente">
        </div>
    </div>
    
    <!-- Sticky Price Summary Card -->
    <div id="price-summary-card" class="font-saira">
        <div class="price-section ars-price">
            <div class="price-value-row">
                <span class="currency-value" id="total-price-summary-ars">$500.000</span>
            </div>
        </div>
        <div class="separator hidden"></div>
<!--         <div class="price-section usd-price" id="usd-price-section">
            <div class="price-value-row">
                <span class="currency-value"><span id="total-price-summary-usd"></span></span>
                <span class="currency-text">USD</span>
            </div>
            <a id="usd-link-summary" href="#" class="text-xs text-gray-500 hover:underline">
                <p>Ver cotizaciones</p>
            </a>
        </div> -->
    </div>


    <!-- NEW Mobile Sticky Price Summary -->
    <div id="mobile-price-summary-card"
        class="fixed bottom-0 z-50 p-4 section-card-style bg-gray-800/90 flex md:hidden justify-center items-center">
        <div class="price-section ars-price">
            <div class="price-value-row">
                <span class="currency-value text-cyan-400 font-saira text-right" id="total-price-summary-ars-mobile">$500.000</span>
            </div>
        </div>
        <div class="separator w-1 h-8 hidden"></div> <!-- Adjust height as needed -->
        <div class="price-section usd-price pl-4 hidden" id="usd-price-section-mobile">

            <a id="usd-link-summary-mobile" href="#" class="text-xs text-gray-500 hover:underline">
                <div class="price-value-row">
                    <span class="currency-value text-violet-600 font-saira"><span
                            id="total-price-summary-usd-mobile"></span></span>
                </div>
            </a>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            // --- DATA ---
            const gameNames = ['GTA V', 'LoL', 'Dota 2', 'Overwatch 2', 'Minecraft', 'Rocket League', 'Need for Speed: Hot Pursuit Remastered', 'Need for Speed: Underground HD', 'Half Life: Black Mesa', 'Half Life 2 HD', 'Abe´s Oddysey Remake', 'WoW Classic: en TurtleWoW', 'Dishonored 2', 'Borderlands 2', 'Portal 1 y 2', 'Left 4 Dead 2', 'BioShock Remaster', 'BioShock 2 Remaster', 'BioShock Infinite', 'Fallout 3', 'Fallout: New Vegas', 'Batman: Arkham Asylum', 'Batman: Arkham City', 'Sleeping Dogs: Definitive Edition', 'Tomb Raider (2013)', 'Mass Effect Legendary Edition', 'Far Cry 3', 'Deus Ex: Human Revolution', 'Serious Sam Classics: Revolution', 'Burnout Paradise', 'DiRT 3 Complete Edition', 'Need for Speed: Underground 2 HD', 'Need for Speed: Most Wanted HD', 'Blur', 'GRID 2', 'GRID Autosport', 'F1 2014', 'FIFA 17', 'PES 2017', 'NBA 2K17', 'FallGuys', 'Sims 4 + Expansiones', 'Spore: Aventuras Galacticas', 'Roblox', 'Call of Duty: Black Ops', 'Call of Duty: Black Ops 2', 'Metro 2033', 'Crysis 2', 'Bulletstorm', 'Dishonored', 'Max Payne 3', 'Singularity', 'F.E.A.R.', 'Mortal Kombat 11 Komplete Edition', 'Ultra Street Fighter IV', 'Ultimate Marvel vs. Capcom 3', 'The King of Fighters XIII', 'Injustice Gods Among Us', 'Heroes of Might & Magic HD V', 'Reckoning: Kingdoms of Amalur', 'Divinity Original Sin', 'Age of Empires II Definitive Edition', 'The Elder Scrolls V: Skyrim', 'The Elder Scrolls IV: Oblivion & AddOns HD'];
            const softwareData = [
                // SISTEMA
                { name: 'AVG AntiVirus', slug: 'avg_antivirus', checked: true, disabled: false, category: 'Sistema', descripcion: 'Antivirus gratuito y eficaz.' },
                { name: 'Avast AntiVirus', slug: 'avast_antivirus', checked: false, disabled: false, category: 'Sistema', descripcion: 'Igual que AVG pero más molesto.' },
                { name: 'BitDefender', slug: 'bitdefender', checked: false, disabled: false, category: 'Sistema', descripcion: 'Excelente antivirus. Requiere cuenta gratuita.' },
                { name: 'MalwareBytes', slug: 'malwarebytes', checked: true, disabled: false, category: 'Sistema', descripcion: 'Elimina malware y spyware. Complementa antivirus.' },
                { name: 'Firewall App Blocker', slug: 'firewall_app_blcoker', checked: false, disabled: false, category: 'Sistema', descripcion: 'Bloquea el acceso a internet de las aplicaciones elegidas.' },
                { name: 'Fraps', slug: 'fraps', checked: true, disabled: false, category: 'Sistema', descripcion: 'Captura pantalla y FPS. Para tunear juegos es fundamental.' },
                { name: 'HW Monitor', slug: 'hw_monitor', checked: true, disabled: false, category: 'Sistema', descripcion: 'Monitorea temperatura y voltajes.' },
                { name: 'Macrium Reflect', slug: 'macrium_reflect', checked: false, disabled: false, category: 'Sistema', descripcion: 'Clona y respalda discos.' },
                { name: 'Space Sniffer', slug: 'space_sniffer', checked: true, disabled: false, category: 'Sistema', descripcion: 'Visualiza uso de espacio en disco. Ideal para hacer lugar.' },
                { name: 'Uninstall Tool', slug: 'uninstall_tool', checked: true, disabled: false, category: 'Sistema', descripcion: 'Desinstala programas a fondo.' },
                { name: 'Wise Memory Optimizer', slug: 'wise_memory_optimizer', checked: true, disabled: false, category: 'Sistema', descripcion: 'Libera y optimiza la RAM.' },
                { name: 'Wise Registry Cleaner', slug: 'wise_registry_cleaner', checked: false, disabled: false, category: 'Sistema', descripcion: 'Limpia el registro de Windows.' },
                // MULTIMEDIA
                { name: 'Hear', slug: 'hear', checked: false, disabled: false, category: 'Multimedia', descripcion: 'Mejora el audio del sistema. Alta configuración.' },
                { name: 'PotPlayer', slug: 'potplayer', checked: true, disabled: false, category: 'Multimedia', descripcion: 'Reproductor de video avanzado.' },
                { name: 'VLC Player', slug: 'vlc_player', checked: false, disabled: false, category: 'Multimedia', descripcion: 'Reproduce cualquier formato de video.' },
                { name: 'WinAmp', slug: 'winamp', checked: true, disabled: false, category: 'Multimedia', descripcion: 'Clásico reproductor de música, renovado por la comunidad.' },
                { name: 'YouTube', slug: 'youtube', checked: true, disabled: false, category: 'Multimedia', descripcion: 'YouTube *sin publicidad*.' },
                { name: 'Spotify', slug: 'spotify', checked: true, disabled: false, category: 'Multimedia', descripcion: 'Música en streaming.' },
                { name: 'Stremio', slug: 'stremio', checked: true, disabled: false, category: 'Multimedia', descripcion: 'Películas y series online.' },
                // WEB
                { name: 'Brave', slug: 'brave', checked: true, disabled: false, category: 'Web', descripcion: 'Navegador rápido y seguro basado en Chrome. Bloquea publicidad.' },
                { name: 'Opera GX', slug: 'opera_gx', checked: true, disabled: false, category: 'Web', descripcion: 'Navegador gamer personalizable. Bloquea publicidad.' },
                { name: 'Google Chrome', slug: 'google_chrome', checked: true, disabled: false, category: 'Web', descripcion: 'Navegador web popular.' },
                { name: 'WhatsApp', slug: 'whatsapp', checked: true, disabled: false, category: 'Web', descripcion: 'Mensajería instantánea.' },
                { name: 'Discord', slug: 'discord', checked: false, disabled: false, category: 'Web', descripcion: 'Chat de voz y texto para comunidades.' },
                { name: 'Zoom', slug: 'zoom', checked: false, disabled: false, category: 'Web', descripcion: 'Videollamadas y reuniones online.' },
                { name: 'Free Download Manager', slug: 'freedownloadmanager', checked: true, disabled: false, category: 'Web', descripcion: 'Gestor de descargas y torrents eficiente.' },
                { name: 'JDownloader 2', slug: 'jdownloader_2', checked: false, disabled: false, category: 'Web', descripcion: 'Descarga archivos de internet.' },
                { name: 'qBitTorrent', slug: 'qbittorrent', checked: false, disabled: false, category: 'Web', descripcion: 'Descarga archivos de internet.' },
                // CREACIÓN
                { name: 'Inkscape', slug: 'inkscape', checked: false, disabled: false, category: 'Creación', descripcion: 'Gráficos vectoriales. Ideal para diseñar logos profesionales.' },
                { name: 'Krita', slug: 'krita', checked: false, disabled: false, category: 'Creación', descripcion: 'Pintura y arte digital.' },
                { name: 'Photopea', slug: 'photopea', checked: true, disabled: false, category: 'Creación', descripcion: 'Clon de Photoshop online.' },
                { name: 'Canva', slug: 'canva', checked: true, disabled: false, category: 'Creación', descripcion: 'Diseño gráfico fácil.' },
                { name: 'GIMP', slug: 'gimp', checked: false, disabled: false, category: 'Creación', descripcion: 'Editor de imágenes avanzado.' },
                { name: 'XnConvert', slug: 'xnconvert', checked: true, disabled: false, category: 'Creación', descripcion: 'Conversión y mejora de imágenes por lotes.' },
                { name: 'CapCut', slug: 'capcut', checked: false, disabled: false, category: 'Creación', descripcion: 'Edición de video sencilla.' },
                { name: 'DaVinci Resolve', slug: 'davinci_resolve', checked: true, disabled: false, category: 'Creación', descripcion: 'Edición de video profesional.' },
                { name: 'OBS Studio', slug: 'obs_studio', checked: true, disabled: false, category: 'Creación', descripcion: 'Grabación y streaming.' },
                { name: 'GitHub Desktop', slug: 'github_desktop', checked: false, disabled: false, category: 'Desarrollo', descripcion: 'Cliente visual para Git.' },
                { name: 'Visual Studio Code', slug: 'visual_studio_code', checked: false, disabled: false, category: 'Desarrollo', descripcion: 'Editor de código moderno.' },
            ];
            const toSlug = (str) => str.toLowerCase().replace(/[^\w\s-]/g, '').trim().replace(/[\s_-]+/g, '-').replace(/^-+|-+$/g, '');
            const games = gameNames.map(name => ({ name: name, slug: toSlug(name) }));

            // --- GLOBAL APP STATE ---
            const GAIN_PRICE = 110000;
            let BASE_PRICE = 0;
            let allDolarRates = [];
            let currentTowerIndex = 0;

            // Component Options
            let baseOptions = [];
            let armadasOptions = [];
            let towersOptions = [];
            let ssdOptions = [];
            let gpuOptions = [];
            let psuOptions = [];
            let motherboardOptions = [];
            let cpuOptions = [];
            let ramOptions = [];
            let comboOptions = [];
            let monitorOptions = [];
            let mouseOptions = [];
            let joystickOptions = [];
            let keyboardOptions = [];
            let comboMouseTecladoOptions = [];
            let auricularesOptions = [];
            let parlantesOptions = [];

            // Peripheral State
            const peripheralState = {
                currentMonitorIndex: -1,
                currentMouseIndex: -1,
                currentKeyboardIndex: -1,
                currentComboIndex: -1,
                currentAuricularesIndex: -1,
                currentParlantesIndex: -1,
            };

            // --- FETCH AND INITIALIZE ---
            fetch('products.json')
                .then(response => response.json())
                .then(data => {
                    initializeApp(data);
                })
                .catch(error => {
                    console.error('Error loading products.json:', error);
                });

            async function initializeApp(data) {
                // Populate component options from JSON data
                baseOptions = data.baseOptions || [];
                armadasOptions = data.armadasOptions || [];
                towersOptions = data.towersOptions || [];
                ssdOptions = data.ssdOptions || [];
                gpuOptions = data.gpuOptions || [];
                psuOptions = data.psuOptions || [];
                motherboardOptions = data.motherboardOptions || [];
                cpuOptions = data.cpuOptions || [];
                ramOptions = data.ramOptions || [];
                comboOptions = data.comboOptions || [];
                monitorOptions = data.monitorOptions || [];
                mouseOptions = data.mouseOptions || [];
                joystickOptions = data.joystickOptions || [];
                keyboardOptions = data.keyboardOptions || [];
                comboMouseTecladoOptions = data.comboMouseTecladoOptions || [];
                auricularesOptions = data.auricularesOptions || [];
                parlantesOptions = data.parlantesOptions || [];

                // Set BASE_PRICE from the first base option's total plus GAIN_PRICE
                if (baseOptions.length > 0) {
                    BASE_PRICE = baseOptions[0].total + GAIN_PRICE;
                } else {
                    console.error("No baseOptions found in products.json to set BASE_PRICE.");
                    BASE_PRICE = GAIN_PRICE; // Fallback
                }

                // --- Start dependent initializations ---
                await fetchDolarRate();
                populateUI();
                setupEventListeners();
                updateAllDisplays();
            }
            
            function populateUI() {
                // Populate game list
                const gameListContainer = document.getElementById('game-list');
                games.forEach(game => {
                    const imageSrc = `cover/${game.slug}.webp`;
                    const cardEl = document.createElement('div');
                    cardEl.className = 'card-game';
                    cardEl.id = `card-game-${game.slug}`;
                    cardEl.innerHTML = `
                        <input type="checkbox" id="game-${game.slug}" name="game" value="${game.name}" data-img-src="${imageSrc}" class="hidden">
                        <label for="game-${game.slug}" class="rounded-xl cursor-pointer transition">
                            <img src="${imageSrc}" alt="Carátula de ${game.name}" class="rounded-xl w-full h-full object-cover" onerror="this.onerror=null;this.src='https://placehold.co/300x400/111827/4f46e5?text=${game.name.replace(/\s/g, '+')}';">
                            <div class="game-title-sticker hidden">${game.name}</div>
                        </label>`;
                    gameListContainer.appendChild(cardEl);
                });

                // Populate software list
                const softwareCategories = [
                    { name: 'Sistema', description: 'Herramientas para mantener, optimizar y proteger tu PC.', icon: 'fa-shield-alt' },
                    { name: 'Multimedia', description: 'Reproductores, audio y apps para disfrutar de música y video.', icon: 'fa-photo-film' },
                    { name: 'Web', description: 'Navegadores, mensajería y gestores de descargas.', icon: 'fa-globe' },
                    { name: 'Creación', description: 'Edición de imágenes, video, diseño y herramientas para creadores.', icon: 'fa-paint-brush' },
                    { name: 'Desarrollo', description: 'Herramientas para programar, editar código y gestionar proyectos.', icon: 'fa-code' },
                ];
                const softwareListContainer = document.getElementById('software-list');
                softwareListContainer.innerHTML = '';
                softwareCategories.forEach(category => {
                    const categoryWrapper = document.createElement('div');
                    categoryWrapper.className = 'mb-8';
                    categoryWrapper.innerHTML = `<h3 class="font-bold text-lg text-violet-400 mb-2 flex items-center gap-2"><i class="fas ${category.icon} text-violet-300 text-xl"></i> ${category.name}</h3>`;
                    const descDiv = document.createElement('div');
                    descDiv.className = 'software-cat-desc mb-4 px-4 py-2 rounded-xl text-base text-violet-100 bg-[#1a1332]';
                    descDiv.style.transition = 'background 0.2s, color 0.2s';
                    descDiv.textContent = category.description;
                    categoryWrapper.appendChild(descDiv);
                    const itemsWrapper = document.createElement('div');
                    itemsWrapper.className = 'grid grid-cols-2 md:grid-cols-3 gap-4';
                    const programs = softwareData.filter(item => item.category === category.name);
                    programs.forEach(item => {
                        const essentialClass = item.disabled ? 'essential-software' : '';
                        const disabledClass = item.disabled ? 'cursor-not-allowed opacity-60' : 'cursor-pointer';
                        const labelColorClass = item.disabled ? 'green-333' : 'text-white';
                        const softwareItemHTML = document.createElement('div');
                        softwareItemHTML.className = `relative bg-gray-800 p-3 rounded-lg flex items-center ${disabledClass} ${essentialClass}`;
                        const customCheckbox = document.createElement('div');
                        customCheckbox.className = 'custom-software-checkbox';
                        customCheckbox.dataset.slug = item.slug;
                        if (item.checked) {
                            customCheckbox.classList.add('checked');
                        }
                        const span = document.createElement('span');
                        span.className = `ml-3 text-sm font-medium ${labelColorClass}`;
                        span.textContent = item.name;
                        softwareItemHTML.appendChild(customCheckbox);
                        softwareItemHTML.appendChild(span);
                        softwareItemHTML.addEventListener('mouseenter', () => { descDiv.textContent = `${item.name}: ${item.descripcion}`; });
                        softwareItemHTML.addEventListener('mouseleave', () => { descDiv.textContent = category.description; });
                        softwareItemHTML.addEventListener('click', () => {
                            if (!item.disabled) {
                                customCheckbox.classList.toggle('checked');
                            }
                        });
                        itemsWrapper.appendChild(softwareItemHTML);
                    });
                    categoryWrapper.appendChild(itemsWrapper);
                    softwareListContainer.appendChild(categoryWrapper);
                });

                // Populate component selects
                const ssdSelect = document.getElementById('ssd-select');
                if (ssdSelect) ssdSelect.innerHTML = ssdOptions.map(o => `<option value="${o.price}">${o.name}</option>`).join('');
                
                const gpuSelect = document.getElementById('gpu-select');
                if (gpuSelect) gpuSelect.innerHTML = gpuOptions.map(o => `<option value="${o.price}">${o.name}</option>`).join('');

                const psuSelect = document.getElementById('psu-select');
                if(psuSelect) psuSelect.innerHTML = psuOptions.map(o => `<option value="${o.price}">${o.name}</option>`).join('');
            }

            function setupEventListeners() {
                 // Component Selects
                const ssdSelect = document.getElementById('ssd-select');
                const gpuSelect = document.getElementById('gpu-select');
                const psuSelect = document.getElementById('psu-select');

                if (ssdSelect) ssdSelect.addEventListener('change', () => updateComponentDisplay(ssdSelect, document.getElementById('ssd-description'), document.getElementById('ssd-image'), ssdOptions));
                if (gpuSelect) gpuSelect.addEventListener('change', () => updateComponentDisplay(gpuSelect, document.getElementById('gpu-description'), document.getElementById('gpu-image'), gpuOptions));
                if (psuSelect) psuSelect.addEventListener('change', () => updateComponentDisplay(psuSelect, document.getElementById('psu-description'), document.getElementById('psu-image'), psuOptions));
                
                // Tower navigation
                document.getElementById('prev-tower').addEventListener('click', prevTower);
                document.getElementById('next-tower').addEventListener('click', nextTower);

                // Peripherals
                setupPeripheralCards();

                // Games
                document.querySelectorAll('input[name="game"]').forEach(checkbox => {
                    checkbox.addEventListener('change', handleGameSelectionChange);
                });
                document.getElementById('load-more-games').addEventListener('click', expandGameGrid);
                document.getElementById('reset-selection-btn').addEventListener('click', resetGameSelection);

                // Form submission
                document.getElementById('orderForm').addEventListener('submit', handleFormSubmit);

                // Dolar Popup (Listeners are kept in case they are re-enabled later)
                const dolarTriggers = ['usd-link-top', 'usd-price-display-top', 'usd-link-bottom', 'total-price-usd', 'usd-link-summary', 'total-price-summary-usd', 'usd-link-summary-mobile', 'total-price-summary-usd-mobile'];
                dolarTriggers.forEach(id => document.getElementById(id)?.addEventListener('click', (e) => { e.preventDefault(); showDolarPopup(); }));
                const dolarPopup = document.getElementById('dolar-popup');
                dolarPopup.addEventListener('click', (e) => { if (e.target === dolarPopup) dolarPopup.style.display = 'none'; });

                // Image Zoom
                const fullscreenOverlay = document.getElementById('fullscreen-overlay');
                fullscreenOverlay.addEventListener('click', () => fullscreenOverlay.classList.remove('active'));
                ['current-tower-image', 'gpu-image', 'ssd-image', 'psu-image'].forEach(id => {
                    const imgEl = document.getElementById(id);
                    imgEl?.addEventListener('click', () => {
                        document.getElementById('zoomed-image').src = imgEl.src;
                        fullscreenOverlay.classList.add('active');
                    });
                });
                
                // Price card visibility observer
                const priceVisibilityZone = document.getElementById('price-card-visibility-zone');
                if (priceVisibilityZone) {
                    const observer = new IntersectionObserver(entries => {
                        const isIntersecting = entries[0].isIntersecting;
                        document.getElementById('mobile-price-summary-card').classList.toggle('show-mobile-price', isIntersecting);
                        document.getElementById('price-summary-card').classList.toggle('visible', isIntersecting);
                    });
                    observer.observe(priceVisibilityZone);
                }

                // Window resize
                window.addEventListener('resize', () => {
                    setInitialGridHeight();
                    positionCroxImages();
                });
            }

            function updateAllDisplays() {
                updateTowerDisplay();
                updateComponentDisplay(document.getElementById('ssd-select'), document.getElementById('ssd-description'), document.getElementById('ssd-image'), ssdOptions);
                updateComponentDisplay(document.getElementById('gpu-select'), document.getElementById('gpu-description'), document.getElementById('gpu-image'), gpuOptions);
                updateComponentDisplay(document.getElementById('psu-select'), document.getElementById('psu-description'), document.getElementById('psu-image'), psuOptions);
                updatePeripheralStates();
                updateSelectedGamesList();
                setInitialGridHeight();
                positionCroxImages();
                updatePrices();
            }

            // --- PRICE CALCULATION ---
            function updatePrices() {
                let total = BASE_PRICE;

                // Add prices from selected components
                total += parseInt(document.getElementById('ssd-select')?.value || 0);
                total += parseInt(document.getElementById('gpu-select')?.value || 0);
                total += parseInt(document.getElementById('psu-select')?.value || 0);
                if (towersOptions.length > 0) total += towersOptions[currentTowerIndex].price;

                // Add prices from selected peripherals
                if (peripheralState.currentMonitorIndex > -1) total += monitorOptions[peripheralState.currentMonitorIndex].price;
                if (peripheralState.currentMouseIndex > -1) total += mouseOptions[peripheralState.currentMouseIndex].price;
                if (peripheralState.currentKeyboardIndex > -1) total += keyboardOptions[peripheralState.currentKeyboardIndex].price;
                if (peripheralState.currentComboIndex > -1) total += comboMouseTecladoOptions[peripheralState.currentComboIndex].price;
                if (peripheralState.currentAuricularesIndex > -1) total += auricularesOptions[peripheralState.currentAuricularesIndex].price;
                if (peripheralState.currentParlantesIndex > -1) total += parlantesOptions[peripheralState.currentParlantesIndex].price;

                // Update DOM elements for ARS price
                const formattedArs = '$' + total.toLocaleString('es-AR', { minimumFractionDigits: 0, maximumFractionDigits: 0 });
                document.getElementById('total-price').textContent = formattedArs;
                document.getElementById('top-total-price').textContent = formattedArs;
                document.getElementById('total-price-summary-ars').textContent = formattedArs;
                document.getElementById('total-price-summary-ars-mobile').textContent = formattedArs;
                
                updateSelectedComponentsDisplay();
            }

            async function fetchDolarRate() {
                try {
                    const response = await fetch('https://dolarapi.com/v1/dolares');
                    if (!response.ok) throw new Error('Network response was not ok for Dolar rates');
                    allDolarRates = await response.json();
                } catch (error) {
                    console.error("Could not fetch exchange rate:", error);
                    allDolarRates = [];
                }
            }

            // --- UI UPDATE FUNCTIONS ---
            function updateTowerDisplay() {
                if (towersOptions.length === 0) return;
                const selectedTower = towersOptions[currentTowerIndex];
                loadImageWithGrayscale(document.getElementById('current-tower-image'), selectedTower.image_url);
                document.getElementById('current-tower-name').textContent = selectedTower.name;
                
                let towerPriceHTML = '';
                if (selectedTower.link) {
                    const priceFull = selectedTower.price > 0 ? `$${selectedTower.price.toLocaleString('es-AR')} | ` : '';
                    towerPriceHTML = `<a href="${selectedTower.link}" target="_blank" class="component-link">${priceFull}Ver + <i class="fas fa-external-link-alt"></i></a>`;
                }
                document.getElementById('current-tower-price-display').innerHTML = towerPriceHTML;
                updatePrices();
            }

            function updateComponentDisplay(selectEl, descEl, imageEl, options) {
                if (!selectEl || !descEl || !imageEl || !options) return;
                const selectedOption = options.find(opt => opt.price == selectEl.value);
                if (selectedOption) {
                    let linkHTML = '';
                    if (selectedOption.link) {
                        const priceFull = selectedOption.price > 0 ? `$${selectedOption.price.toLocaleString('es-AR')} | ` : '';
                        linkHTML = `<a href="${selectedOption.link}" target="_blank" class="component-link block">${priceFull}Ver + <i class="fas fa-external-link-alt"></i></a>`;
                    }
                    descEl.innerHTML = selectedOption.description + linkHTML;
                    loadImageWithGrayscale(imageEl, selectedOption.image_url);
                }
                updatePrices();
            }
            
            function setupPeripheralCards() {
                const peripheralConfig = [
                    { id: 'combo-card', options: comboMouseTecladoOptions, stateKey: 'currentComboIndex', onSelect: () => { peripheralState.currentMouseIndex = -1; peripheralState.currentKeyboardIndex = -1; updatePeripheralStates(); } },
                    { id: 'keyboard-card', options: keyboardOptions, stateKey: 'currentKeyboardIndex', onSelect: () => { peripheralState.currentComboIndex = -1; updatePeripheralStates(); } },
                    { id: 'mouse-card', options: mouseOptions, stateKey: 'currentMouseIndex', onSelect: () => { peripheralState.currentComboIndex = -1; updatePeripheralStates(); } },
                    { id: 'monitor-card', options: monitorOptions, stateKey: 'currentMonitorIndex' },
                    { id: 'auriculares-card', options: auricularesOptions, stateKey: 'currentAuricularesIndex' },
                    { id: 'parlantes-card', options: parlantesOptions, stateKey: 'currentParlantesIndex' }
                ];

                peripheralConfig.forEach(({ id, options, stateKey, onSelect }) => {
                    const card = document.getElementById(id);
                    if (!card) return;
                    card.addEventListener('click', () => {
                        if (card.classList.contains('disabled')) return;
                        const optionsLength = options.length;
                        peripheralState[stateKey] = (peripheralState[stateKey] + 2) % (optionsLength + 1) - 1;
                        if (onSelect) onSelect(); else updatePeripheralStates();
                    });
                });
            }

            function updatePeripheralStates() {
                const peripherals = [
                    { id: 'combo-card', options: comboMouseTecladoOptions, stateKey: 'currentComboIndex', defaultText: 'Combo Mouse+Teclado' },
                    { id: 'keyboard-card', options: keyboardOptions, stateKey: 'currentKeyboardIndex', defaultText: 'Teclado' },
                    { id: 'mouse-card', options: mouseOptions, stateKey: 'currentMouseIndex', defaultText: 'Mouse' },
                    { id: 'monitor-card', options: monitorOptions, stateKey: 'currentMonitorIndex', defaultText: 'Monitor' },
                    { id: 'auriculares-card', options: auricularesOptions, stateKey: 'currentAuricularesIndex', defaultText: 'Auriculares' },
                    { id: 'parlantes-card', options: parlantesOptions, stateKey: 'currentParlantesIndex', defaultText: 'Parlantes' }
                ];
                const isComboActive = peripheralState.currentComboIndex > -1;

                peripherals.forEach(p => {
                    const card = document.getElementById(p.id);
                    if (!card) return;
                    const image = card.querySelector('img');
                    const text = card.querySelector('p');
                    const currentIndex = peripheralState[p.stateKey];

                    card.classList.toggle('disabled', isComboActive && (p.id === 'mouse-card' || p.id === 'keyboard-card'));
                    card.classList.toggle('active', currentIndex > -1);
                    
                    if (currentIndex > -1) {
                        const selected = p.options[currentIndex];
                        if (selected) {
                            image.src = selected.image_url;
                            image.style.filter = 'grayscale(0%)';
                            let linkHTML = '';
                            if (selected.link) {
                                const priceFull = selected.price > 0 ? `$${selected.price.toLocaleString('es-AR')} | ` : '';
                                linkHTML = `<a href="${selected.link}" target="_blank" class="component-link text-xs" onclick="event.stopPropagation()">${priceFull}Ver + <i class="fas fa-external-link-alt"></i></a>`;
                            }
                            text.innerHTML = `<span>${selected.name}</span>${linkHTML}`;
                        }
                    } else {
                        card.classList.remove('active');
                        if (p.options.length > 0 && p.options[0]) {
                            image.src = p.options[0].image_url;
                        }
                        image.style.filter = 'grayscale(100%)';
                        text.textContent = p.defaultText;
                    }
                });
                updatePrices();
            }

            function updateSelectedComponentsDisplay() {
                const container = document.getElementById('selected-images-container');
                if (!container) return;
                container.innerHTML = '';
                const createCard = (item, category) => {
                    if (!item || !item.image_url || !item.name) return '';
                    const link = item.link ? `href="${item.link}" target="_blank"` : 'href="#" onclick="event.preventDefault()"';
                    return `<a ${link} class="summary-card-link"><div class="summary-card"><div class="summary-card-category">${category}</div><img src="${item.image_url}" alt="${item.name}" onerror="this.onerror=null;this.src='https://placehold.co/128x96/ffffff/333333?text=Error'"><p>${item.name}</p></div></a>`;
                };
                
                const selectedGPU = gpuOptions.find(opt => opt.price == document.getElementById('gpu-select').value);
                const selectedSSD = ssdOptions.find(opt => opt.price == document.getElementById('ssd-select').value);
                const selectedPSU = psuOptions.find(opt => opt.price == document.getElementById('psu-select').value);

                container.innerHTML += createCard(towersOptions[currentTowerIndex], 'Gabinete');
                container.innerHTML += createCard(selectedGPU, 'Gráfica');
                container.innerHTML += createCard(selectedSSD, 'Almacenamiento');
                container.innerHTML += createCard(selectedPSU, 'Fuente');

                if (peripheralState.currentComboIndex > -1) container.innerHTML += createCard(comboMouseTecladoOptions[peripheralState.currentComboIndex], 'Combo');
                else {
                    if (peripheralState.currentKeyboardIndex > -1) container.innerHTML += createCard(keyboardOptions[peripheralState.currentKeyboardIndex], 'Teclado');
                    if (peripheralState.currentMouseIndex > -1) container.innerHTML += createCard(mouseOptions[peripheralState.currentMouseIndex], 'Mouse');
                }
                if (peripheralState.currentMonitorIndex > -1) container.innerHTML += createCard(monitorOptions[peripheralState.currentMonitorIndex], 'Monitor');
                if (peripheralState.currentAuricularesIndex > -1) container.innerHTML += createCard(auricularesOptions[peripheralState.currentAuricularesIndex], 'Auriculares');
                if (peripheralState.currentParlantesIndex > -1) container.innerHTML += createCard(parlantesOptions[peripheralState.currentParlantesIndex], 'Parlantes');
            }

            // --- EVENT HANDLERS & HELPERS ---
            function prevTower() {
                currentTowerIndex = (currentTowerIndex - 1 + towersOptions.length) % towersOptions.length;
                updateTowerDisplay();
            }

            function nextTower() {
                currentTowerIndex = (currentTowerIndex + 1) % towersOptions.length;
                updateTowerDisplay();
            }
            
            let errorToastTimeout;
            let consecutiveErrorClicks = 0;
            function showErrorToast(message) {
                const errorToast = document.getElementById('error-toast');
                const errorToastMessage = document.getElementById('error-toast-message');
                const resetSelectionBtn = document.getElementById('reset-selection-btn');
                clearTimeout(errorToastTimeout);
                errorToast.classList.remove('show');
                setTimeout(() => {
                    errorToastMessage.textContent = message;
                    if (consecutiveErrorClicks >= 2) resetSelectionBtn.classList.remove('hidden');
                    errorToast.classList.add('show');
                    errorToastTimeout = setTimeout(() => {
                        errorToast.classList.remove('show');
                        resetSelectionBtn.classList.add('hidden');
                    }, 4000);
                }, 150);
            }

            function handleGameSelectionChange(e) {
                if (e.target.checked && document.querySelectorAll('input[name="game"]:checked').length > 3) {
                    e.target.checked = false;
                    consecutiveErrorClicks++;
                    showErrorToast('MAX 3 Juegos Incluidos');
                    return;
                }
                consecutiveErrorClicks = 0;
                clearTimeout(errorToastTimeout);
                document.getElementById('error-toast').classList.remove('show');
                
                const sticker = e.target.nextElementSibling.querySelector('.game-title-sticker');
                if (e.target.checked) {
                    sticker.style.top = `${Math.floor(Math.random() * 50) + 15}%`;
                    sticker.style.left = `${Math.floor(Math.random() * 40) + 10}%`;
                    sticker.style.transform = `rotate(${Math.floor(Math.random() * 20) - 10}deg)`;
                    sticker.classList.remove('hidden');
                } else {
                    sticker.classList.add('hidden');
                }
                updateSelectedGamesList();
            }

            function updateSelectedGamesList() {
                const selectedCheckboxes = document.querySelectorAll('input[name="game"]:checked');
                const listEl = document.getElementById('selected-games-list');
                const sectionEl = document.getElementById('selected-games-section');
                listEl.innerHTML = '';
                if (selectedCheckboxes.length > 0) {
                    sectionEl.classList.remove('hidden');
                    selectedCheckboxes.forEach(cb => {
                        listEl.innerHTML += `<div class="w-1/4 md:w-1/5 p-1"><a href="#card-game-${toSlug(cb.value)}"><img src="${cb.dataset.imgSrc}" alt="Carátula de ${cb.value}" class="rounded-md shadow-lg w-full h-full object-cover" onerror="this.onerror=null;this.src='https://placehold.co/300x400/111827/4f46e5?text=${cb.value.replace(/\s/g, '+')}';"></a></div>`;
                    });
                } else {
                    sectionEl.classList.add('hidden');
                }
            }

            function resetGameSelection() {
                document.querySelectorAll('input[name="game"]:checked').forEach(cb => {
                    cb.checked = false;
                    cb.nextElementSibling.querySelector('.game-title-sticker').classList.add('hidden');
                });
                updateSelectedGamesList();
                document.getElementById('error-toast').classList.remove('show');
                consecutiveErrorClicks = 0;
            }

            let isGridExpanded = false;
            function expandGameGrid() {
                document.getElementById('game-grid-wrapper').style.maxHeight = `${document.getElementById('game-list').scrollHeight}px`;
                document.getElementById('load-more-games').classList.add('hidden');
                document.getElementById('no-more-games').classList.remove('hidden');
                const overlay = document.getElementById('load-more-overlay');
                overlay.style.opacity = '0';
                overlay.style.pointerEvents = 'none';
                isGridExpanded = true;
            }

            function setInitialGridHeight() {
                const gameListContainer = document.getElementById('game-list');
                const allGameCards = Array.from(gameListContainer.children);
                if (isGridExpanded || !allGameCards.length) return;
                const cardHeight = allGameCards[0].offsetHeight;
                if (cardHeight === 0) { setTimeout(setInitialGridHeight, 100); return; }
                const gridGap = parseInt(window.getComputedStyle(gameListContainer).getPropertyValue('grid-row-gap')) || 24;
                const rowHeight = cardHeight + gridGap;
                const teaserHeight = rowHeight / 2;
                const targetHeight = (6 * rowHeight) - gridGap + teaserHeight;
                document.getElementById('game-grid-wrapper').style.maxHeight = `${targetHeight}px`;
            }
            
            function positionCroxImages() {
                const croxA = document.getElementById('home-crox-a');
                const croxB = document.getElementById('home-crox-b');
                const hookSection = document.querySelector('.hook-section');
                const wrapper = document.getElementById('hero-wrapper');
                if (croxA && croxB && hookSection && wrapper && window.innerWidth > 639) {
                    const wrapperRect = wrapper.getBoundingClientRect();
                    const hookSectionRect = hookSection.getBoundingClientRect();
                    const topPosition = hookSectionRect.top - wrapperRect.top - (croxA.offsetHeight / 2);
                    croxA.style.top = `${topPosition}px`;
                    croxB.style.top = `${topPosition}px`;
                    const marginPx = -10 * parseFloat(getComputedStyle(document.documentElement).fontSize);
                    croxA.style.left = `${hookSectionRect.left - wrapperRect.left - croxA.offsetWidth - marginPx + 33}px`;
                    croxB.style.right = `${wrapperRect.right - hookSectionRect.right - croxB.offsetWidth - marginPx + 56}px`;
                    croxB.style.left = 'auto';
                }
            }
            
            function showDolarPopup() {
                if (allDolarRates.length === 0) return;
                const dolarRatesList = document.getElementById('dolar-rates-list');
                dolarRatesList.innerHTML = '';
                const tiposPermitidos = [{ key: 'oficial', label: 'Oficial' }, { key: 'blue', label: 'Blue' }, { key: 'cripto', label: 'Cripto' }];
                let total = BASE_PRICE + parseInt(document.getElementById('ssd-select').value) + parseInt(document.getElementById('gpu-select').value) + parseInt(document.getElementById('psu-select').value) + towersOptions[currentTowerIndex].price;
                // Add peripheral prices to total
                
                tiposPermitidos.forEach(tipo => {
                    const rate = allDolarRates.find(r => r.nombre.toLowerCase().includes(tipo.key));
                    if (!rate) return;
                    const precioEnDolar = rate.venta ? (total / rate.venta).toFixed(0) : '-';
                    dolarRatesList.innerHTML += `<div class="flex flex-col gap-1 mb-3 border-b border-gray-700/50 pb-2 dolar-rate-item"><span class="font-bold text-gray-300 dolar-name">${tipo.label}</span><div class="text-right"><span class="text-gray-400">Compra: </span><span class="font-mono text-green-400">$${rate.compra}</span><br><span class="text-gray-400">Venta: </span><span class="font-mono text-green-400">$${rate.venta}</span></div><div class="font-saira text-violet-400 font-bold text-lg text-center mt-1">serían $${precioEnDolar} USD</div></div>`;
                });
                document.getElementById('google-link').href = `https://www.google.com/search?q=${total}+ars+to+usd`;
                document.getElementById('dolar-popup').style.display = 'flex';
            }

            function handleFormSubmit(e) {
                e.preventDefault();
                const selectedGames = Array.from(document.querySelectorAll('input[name="game"]:checked')).map(cb => cb.value);
                const selectedSoftware = Array.from(document.querySelectorAll('.custom-software-checkbox.checked')).map(cb => softwareData.find(s => s.slug === cb.dataset.slug)?.name).filter(Boolean);
                const extraNotes = document.getElementById('extra-notes').value;
                
                let message = `¡Hola, me interesa esta Nave del Medio!\n\n`;
                message += `*Torre Seleccionada:* ${towersOptions[currentTowerIndex].name}\n`;
                message += `*Almacenamiento:* ${document.getElementById('ssd-select').options[document.getElementById('ssd-select').selectedIndex].text}\n`;
                message += `*Tarjeta Gráfica:* ${document.getElementById('gpu-select').options[document.getElementById('gpu-select').selectedIndex].text}\n`;
                message += `*Fuente de Poder:* ${document.getElementById('psu-select').options[document.getElementById('psu-select').selectedIndex].text}\n`;

                let peripheralsMessage = '';
                if (peripheralState.currentComboIndex > -1) peripheralsMessage += `Combo: ${comboMouseTecladoOptions[peripheralState.currentComboIndex].name}`;
                else {
                    if (peripheralState.currentMouseIndex > -1) peripheralsMessage += `Mouse: ${mouseOptions[peripheralState.currentMouseIndex].name}`;
                    if (peripheralState.currentKeyboardIndex > -1) peripheralsMessage += `${peripheralsMessage ? ', ' : ''}Teclado: ${keyboardOptions[peripheralState.currentKeyboardIndex].name}`;
                }
                if (peripheralState.currentMonitorIndex > -1) peripheralsMessage += `${peripheralsMessage ? ', ' : ''}Monitor: ${monitorOptions[peripheralState.currentMonitorIndex].name}`;
                if (peripheralState.currentAuricularesIndex > -1) peripheralsMessage += `${peripheralsMessage ? ', ' : ''}Auriculares: ${auricularesOptions[peripheralState.currentAuricularesIndex].name}`;
                if (peripheralState.currentParlantesIndex > -1) peripheralsMessage += `${peripheralsMessage ? ', ' : ''}Parlantes: ${parlantesOptions[peripheralState.currentParlantesIndex].name}`;
                if (peripheralsMessage) message += `*Periféricos:* ${peripheralsMessage}\n`;

                if (selectedGames.length > 0) message += `*Juegos:* ${selectedGames.join(', ')}\n`;
                if (selectedSoftware.length > 0) {
                    message += `*Programas:*\n`;
                    ['Sistema', 'Multimedia', 'Web', 'Creación', 'Desarrollo'].forEach(cat => {
                        const programs = selectedSoftware.filter(name => softwareData.find(p => p.name === name)?.category === cat);
                        if (programs.length > 0) message += `- ${cat}: ${programs.join(', ')}\n`;
                    });
                }
                if (extraNotes.trim() !== '') message += `*Notas:* ${extraNotes}\n`;

                message += `\nPrecio Total: ${document.getElementById('top-total-price').textContent}`;
                message += `\n¡Quedo a la espera de tu respuesta!`;
                window.open(`https://wa.me/5492252513233?text=${encodeURIComponent(message)}`, '_blank');
            }

            function loadImageWithGrayscale(imageElement, newSrc) {
                if (!imageElement) return;
                imageElement.classList.add('loading');
                const tempImage = new Image();
                tempImage.src = newSrc;
                tempImage.onload = () => {
                    imageElement.src = newSrc;
                    imageElement.classList.remove('loading');
                };
                tempImage.onerror = () => {
                    console.error(`Failed to load image: ${newSrc}`);
                    imageElement.classList.remove('loading');
                };
            }
        });
    </script>
</body>

</html>
