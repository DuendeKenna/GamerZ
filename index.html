<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>La Nave del Medio - PC Gamer Gama Media</title>
    <link rel="icon"
        href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>✨</text></svg>">
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700;900&family=Press+Start+2P&family=Saira:wght@400;700;900&family=VT323&family=Roboto:wght@400;700&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <script src="https://code.iconify.design/1/1.0.7/iconify.min.js"></script>
    <style>
        body {
            font-family: 'Inter', sans-serif;
            overflow-x: hidden;
            /* Prevent horizontal scroll */
            background-image: url('covers_wall.webp');
            background-size: cover;
            background-position: center;
            background-attachment: fixed;
        }

        h1,
        h2 {
            font-family: 'Saira', sans-serif;
        }

        /* --- Custom Brand Colors --- */
        .green-222 {
            color: #95ef81;
        }

        .green-333 {
            color: #42d232;
        }

        .green-777 {
            color: #107c10;
        }

        .blueish {
            color: #0098e9;
        }

        /* --- Custom Software Checkbox --- */
        .custom-software-checkbox {
            width: 1.25rem;
            /* w-5 */
            height: 1.25rem;
            /* h-5 */
            border-radius: 0.375rem;
            /* rounded-md */
            border: 2px solid #6b7280;
            /* border-gray-500 */
            background-color: #374151;
            /* bg-gray-700 */
            transition: all 0.2s ease-in-out;
            flex-shrink: 0;
            position: relative;
        }

        .custom-software-checkbox.checked {
            background-color: #42d232;
            /* green-333 */
            border-color: #95ef81;
            /* green-222 */
        }

        .custom-software-checkbox.checked::after {
            content: '\2714';
            color: white;
            font-size: 0.9rem;
            font-weight: bold;
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
        }

        /* --- Font Families --- */
        .font-gamer {
            font-family: 'Press Start 2P', cursive;
        }

        .font-vt323 {
            font-family: 'VT323', monospace;
        }

        .font-saira {
            font-family: 'Saira', sans-serif;
        }

        .font-roboto {
            font-family: 'Roboto', sans-serif;
        }

        /* --- Brand Specific Styles --- */
        .brand-title {
            position: relative;
            font-weight: 900;
            background: linear-gradient(to right, #6366f1, #a855f7);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            z-index: 1;
        }

        .special-subtitle {
            font-family: 'Saira';
            letter-spacing: 0.03em;
            background: linear-gradient(to top, #bd570e, #e9bb06);
            border-radius: 25px;
            color: rgb(41, 1, 1) !important;
            box-shadow: rgba(0, 0, 0, 0.849) 0px 0px 50px;
        }

        .special-subtitle:hover {
            background: linear-gradient(to right, #fb923c, #b9a333);
        }

        /* --- Card Effects (Games & Peripherals) --- */
        .card-game {
            position: relative;
        }

        .card-game label {
            position: relative;
            /* Container for the sticker & gloss */
            overflow: hidden;
            display: block;
            border-radius: 0.75rem;
            /* rounded-xl */
            transition: transform 0.3s ease;
            /* Apply transition to the container */
            aspect-ratio: 3/4;
        }

        .card-game label::after {
            /* Glossy effect - Adjusted for plastic relief */
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(to bottom right,
                    rgba(255, 255, 255, 0.4) 0%,
                    /* Top-left highlight - more pronounced */
                    rgba(255, 255, 255, 0.15) 50%,
                    /* Center subtle */
                    rgba(0, 0, 0, 0.15) 50%,
                    /* Bottom-right shadow */
                    rgba(0, 0, 0, 0.4) 100%
                    /* Bottom-right darker shadow - more pronounced */
                );
            border-radius: 0.75rem;
            /* Match card border-radius */
            pointer-events: none;
            mix-blend-mode: overlay;
            /* Blends nicely with image */
            transition: opacity 0.3s ease-in-out;
            opacity: 1;
            /* Base opacity always visible, but subtle */
        }

        .card-game label:hover::after,
        .card-game input:checked+label::after {
            opacity: 1;
            /* Make the effect more notable on hover/checked */
        }

        .card-game label img {
            transition: filter 0.3s ease;
            filter: grayscale(33%);
        }

        .card-game label:hover,
        .card-game input:checked+label {
            transform: scale(1.07);
            z-index: 10;
        }

        .card-game input:checked+label img {
            filter: grayscale(0%) brightness(1.1);
        }

        .card-game input:checked+label {
            box-shadow: 0 0 0 3px rgba(139, 92, 246, 0.5);
        }

        .card-peripheral {
            transition: opacity 0.3s ease-in-out, transform 0.3s ease-in-out;
            opacity: 0.5;
        }

        .card-peripheral:hover,
        .card-peripheral.active {
            opacity: 1;
            transform: scale(1.05);
        }

        .card-peripheral.active {
            box-shadow: 0 0 0 3px rgba(139, 92, 246, 0.5);
        }

        /* --- Game Title Sticker --- */
        .game-title-sticker {
            position: absolute;
            background: linear-gradient(to right, #ef4444, #f97316);
            padding: 0.2rem 0.6rem;
            border-radius: 4px;
            font-weight: 700;
            font-size: 0.75rem;
            /* text-xs */
            color: white;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.5);
            text-align: center;
            max-width: 80%;
            transition: opacity 0.2s ease-in-out;
            z-index: 10;
        }

        /* --- Error Toast Animation --- */
        #error-toast {
            position: fixed;
            bottom: -150px;
            left: 50%;
            transform: translateX(-50%);
            transition: bottom 0.4s ease-out, opacity 0.4s ease-out;
            opacity: 0;
            z-index: 50;
            width: calc(100% - 2rem);
            max-width: 400px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.4);
        }

        #error-toast.show {
            bottom: 20px;
            opacity: 1;
        }

        /* --- Price Badge --- */
        .launch-badge {
            position: absolute;
            top: -24px;
            left: 50%;
            transform: translateX(-50%) rotate(6deg);
            background: linear-gradient(to right, #b12020a4, #cf5f0e);
            padding: 0.2rem 0.5rem;
            border-radius: 6px;
            font-weight: 700;
            letter-spacing: 0.05em;
            font-size: 0.9rem;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.4);
            white-space: nowrap;
        }

        @media (min-width: 768px) {
            .launch-badge {
                left: auto;
                right: -42px;
                transform: rotate(6deg);
            }
        }

        /* --- Animated Games Card Background --- */
        .animated-bg-games {
            min-height: 480px;
            /* Increased height for better effect visibility */
            box-shadow: inset 0 0 12px 4px rgba(0, 0, 0, 0.55);
        }

        .animated-bg-games::before {
            content: '';
            position: absolute;
            top: -10%;
            left: -10%;
            width: 120%;
            height: 120%;
            background-image: url('wall_covers_sm.jpeg');
            background-size: 250%;
            animation:
                ping-pong-path 45s ease-in-out infinite,
                blur-and-fade 10s ease-in-out infinite alternate;
            z-index: 0;
        }

        .animated-bg-games>* {
            position: relative;
            z-index: 1;
        }

        @keyframes ping-pong-path {
            0% {
                background-position: 0% 0%;
            }

            25% {
                background-position: 100% 0%;
            }

            50% {
                background-position: 100% 100%;
            }

            75% {
                background-position: 0% 100%;
            }

            100% {
                background-position: 0% 0%;
            }
        }

        @keyframes blur-and-fade {
            from {
                filter: blur(0px);
                opacity: 0.15;
            }

            to {
                filter: blur(2px);
                /* Dynamic blur effect */
                opacity: 0.3;
            }
        }


        /* --- Neon Highlight (Using brand color) --- */
        .neon-green-highlight {
            border: 2px solid #42d23291;
            box-shadow: 0 0 15px #42d23294, inset 0 0 10px rgba(66, 210, 50, 0.3);
            color: #f0fdf4;
        }

        /* --- CTA Button (WhatsApp Brand Aligned) --- */
        .cta-button {
            animation: glow-whatsapp 4s ease-in-out infinite;
            background: linear-gradient(to right, #25D366, #128C7E);
            border: 2px solid #075e54;
            transition: all 0.3s ease;
        }

        .cta-button:hover {
            background: linear-gradient(to right, #29e66d, #15a589);
            transform: scale(1.05);
        }

        @keyframes glow-whatsapp {

            0%,
            100% {
                box-shadow: 0 0 4px #25D366, 0 0 8px #128C7E, 0 0 12px #075e54;
            }

            50% {
                box-shadow: 0 0 8px #25D366, 0 0 15px #128C7E, 0 0 25px #075e54;
            }
        }

        #games-section {
            padding-bottom: 0px;
        }

        /* --- "Ver más" Neon Button --- */
        .load-more-button {
            background: transparent;
            /* Changed to transparent */
            color: #42d232;
            opacity: 0.6;
            border: 6px solid #107c10;
            /* Solid border */
            border-radius: 15px;
            padding: 20px 35px;
            letter-spacing: 5px;
            cursor: pointer;
            font-weight: bold;
            filter: drop-shadow(0 0 15px #42d232) drop-shadow(0 0 50px #42d232) contrast(2) brightness(2);
            transition: .5s;
        }

        .load-more-button:hover {
            color: black;
            background-color: #42d232;
            filter: drop-shadow(0 0 20px #42d232) contrast(2) brightness(2);
        }

        /* --- Essential Software Highlight --- */
        .essential-software {
            background-color: rgba(66, 210, 50, 0.1);
            border-left: 3px solid #42d232;
        }

        /* --- Animation & Misc --- */
        .animate-float {
            animation: float 6s ease-in-out infinite;
        }

        @keyframes float {

            0%,
            100% {
                transform: translateY(0) translateX(0);
            }

            25% {
                transform: translateY(-5px) translateX(2px);
            }

            50% {
                transform: translateY(0) translateX(-2px);
            }

            75% {
                transform: translateY(5px) translateX(0);
            }
        }

        .lucas-price {
            font-size: 4rem;
            line-height: 1;
            font-weight: bold;
            color: #22d3ee;
            animation: price-glow 3s ease-in-out infinite;
            text-shadow: solid 3px 3px black;
        }

        @keyframes price-glow {

            0%,
            100% {
                text-shadow: 2px 2px 55px rgba(0, 0, 0, 0.5), 0 0 20px rgba(118, 18, 143, 0.801), 0 0 55px rgba(34, 211, 238, 0.2), 0 0 25px rgba(34, 211, 238, 0.2);
            }

            50% {
                text-shadow: 2px 2px 55px rgba(0, 0, 0, 0.5), 0 0 12px rgba(34, 211, 238, 0.35), 0 0 25px rgba(34, 211, 238, 0.25);
            }
        }

        .offer-banner-main,
        .offer-banner-contado {
            position: absolute;
            left: 50%;
            color: #ffffff;
            padding: 0.2rem 1rem;
            border-radius: 0.375rem;
            text-shadow: 1px 1px 2px rgb(0 0 0 / 50%);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.4);
            white-space: nowrap;
        }

        .offer-banner-main {
            background: linear-gradient(to right, #f97316, #fb923c);
            font-size: 1.3rem;
            animation: banner-swing-main 2.5s ease-in-out infinite alternate;
            transform: translateX(-50%) rotate(-7deg);
            bottom: 0;
        }

        .offer-banner-contado {
            background: #c2410c;
            font-size: 1.1rem;
            z-index: 10;
            animation: banner-swing-contado 2.5s ease-in-out infinite alternate;
            transform: translateX(-60%) rotate(-12deg);
            bottom: 2.2rem;
        }

        @keyframes banner-swing-contado {
            from {
                transform: translateX(-60%) rotate(-10deg);
            }

            to {
                transform: translateX(-60%) rotate(0deg);
            }
        }

        /* Hook section highlight */
        .hook-section strong {
            color: #42d232;
            text-shadow: 1px 1px 0 black;
        }

        .hook-section p {
            text-shadow: 2px 2px 3px black;
        }

        .hook-section .font-normal {
            font-family: 'Inter', sans-serif;
        }

        .load-more-container {
            padding-bottom: 4rem;
            margin-top: -4rem;
            background-color: #111827;
        }

        /* --- Feature Cards --- */
        .feature-card {
            background-color: rgba(31, 41, 55, 0.4);
            border: 1px solid rgba(75, 85, 99, 0.5);
            border-radius: 0.75rem;
            padding: 1.25rem 1rem;
            min-height: 160px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            backdrop-filter: blur(4px);
            -webkit-backdrop-filter: blur(4px);
            transition: all 0.3s ease-in-out;
            position: relative;
            overflow: hidden;
            /* Changed to hidden for ribbon */
        }

        .feature-card:hover {
            transform: translateY(-5px) scale(1.03);
            background-color: rgba(55, 65, 81, 0.7);
            border-color: rgba(34, 211, 238, 0.5);
            box-shadow: 0 0 20px rgba(34, 211, 238, 0.15);
        }

        .animated-bg-games:hover {
            box-shadow: 0 0 20px rgba(34, 211, 238, 0.15), inset 0 0 12px 4px rgba(0, 0, 0, 0.55);
        }

        /* --- Corner Ribbon Badge --- */
        .corner-ribbon-wrapper {
            width: 150px;
            height: 150px;
            overflow: hidden;
            position: absolute;
            top: -10px;
            right: -10px;
            z-index: 1;
        }

        .corner-ribbon {
            position: absolute;
            top: 35px;
            right: -35px;
            transform: rotate(45deg);
            width: 200px;
            background: linear-gradient(to right, #f97316, #facc15);
            font-family: 'Press Start 2P', cursive;
            font-size: 0.6rem;
            padding: 5px 0;
            text-align: center;
            box-shadow: 0 5px 10px rgba(0, 0, 0, 0.3);
            line-height: 1.2;
        }

        .corner-ribbon-text {
            color: #422006;
            text-shadow: 1px 1px 0px rgba(255, 255, 255, 0.2);
        }

        .despegue-text {
            text-shadow: 1px 1px 1px rgba(84, 0, 117, 0.2);
            letter-spacing: 1pt;
        }


        #slideshow-container {
            background-color: #353f4d;
        }

        #slideshow-container img {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            object-fit: contain;
            transition: opacity 0.8s ease-in-out;
        }

        #hero-wrapper {
            position: relative;
            /* Removed overflow-x: hidden to allow child elements to extend beyond its bounds */
        }

        #hero-background-in {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            background-image: url('hero-background.webp');
            background-size: cover;
            background-position: center;
            filter: invert(100%) sepia(1) saturate(1000%) hue-rotate(52deg);
            z-index: 0;
            animation: spin 33s linear infinite;
        }

        #hero-background {
            position: absolute;
            overflow: hidden;
            top: 55vh;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            animation: spin 10s ease-in-out infinite, cosmic-pulse 20s ease-in-out infinite;
        }

        @keyframes spin {
            from {
                transform: rotate(0deg);
            }

            to {
                transform: rotate(360deg);
            }
        }

        @keyframes cosmic-pulse {
            0% {
                transform: scale(0.8) rotate(0deg);
                filter: blur(20px);
                opacity: 0.2;
            }

            50% {
                transform: scale(1) rotate(1deg);
                filter: blur(12px);
                opacity: 0.1;
            }

            100% {
                transform: scale(0.8) rotate(0deg);
                filter: blur(20px);
                opacity: 0.2;
            }
        }

        /* @media (max-width: 767px) { #hero-background { display: none; } } */

        @keyframes float-up-down {

            0%,
            100% {
                transform: translateY(0);
            }

            50% {
                transform: translateY(-10px);
            }
        }

        #ovniUp {
            position: absolute;
            left: 55%;
            top: -15px;
            opacity: 0.63;
            filter: hue-rotate(50deg);
            animation: float-up-down 4s ease-in-out infinite, energy-beam 6s ease-in-out infinite;
            z-index: 30;
            /* Ensure OVNI is above other elements */
        }

        @keyframes energy-beam {
            0% {
                filter: hue-rotate(5deg);
                opacity: 0.6;
            }

            50% {
                filter: hue-rotate(50deg);
                opacity: 0.8;
            }

            100% {
                filter: hue-rotate(5deg);
                opacity: 0.6;
            }
        }

        .main-container {
            background-color: #111827;
            /* Restored to bg-gray-700 */
            box-shadow: 0 0 40px rgba(0, 0, 0, 0.7);
            position: relative;
            /* Needed for absolute positioning of child */
            /* Removed overflow-x: hidden to prevent clipping of pop-out images */
            overflow: visible;
            /* Allow content to overflow without being cut */
        }

        #game-grid-container {
            position: relative;
            padding-top: 1.5rem;
            /* Adjusted padding-top */

            /* Adjusted padding-bottom */
        }

        #game-grid-wrapper {
            overflow: hidden;
            transition: max-height 1.8s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            padding: 0 1rem;
        }

        #load-more-overlay {
            position: absolute;
            bottom: 0px;
            left: 0;
            width: 100%;
            height: 500px;
            background: linear-gradient(to top, #111827 25%, transparent);
            pointer-events: none;
            transition: opacity 1.5s;
        }

        footer {
            position: relative;
        }

        #memde_pointLeft {
            display: none;
            /* Hidden by default */
            position: absolute;
            bottom: -20px;
            max-width: 150px;
            /* Max width for general use */
            width: 40%;
            /* For smaller screens, width can be relative */
            z-index: 0;
            overflow-x: hidden;
            right: 0;
            /* Align to the right edge of its parent */
            transform: translateX(50%);
            /* Push half its width outside to the right */
            /* No specific 'left' property here */
        }

        @media (max-width: 767px) {

            /* For mobile specific adjustments */
            #memde_pointLeft {
                right: -10%;
                /* Adjust to keep it within view but slightly off-center */
                width: 50%;
                /* Make it responsive */
                max-width: 120px;
                /* Limit size on very small screens */
                transform: translateX(0%);
                /* Ensure no horizontal translation */
                bottom: -10px;
                /* Adjust vertical position for mobile */
            }
        }

        @media (min-width: 768px) {

            /* Tablet and up */
            #memde_pointLeft {
                bottom: -30px;
                width: auto;
                /* Let image natural width or max-width: 150px apply */
                right: 0;
                /* Keep it on the right for desktop */
                transform: translateX(50%);
                /* Continue pushing it off the right */
            }
        }

        /* --- Nueva Estilo para la Descripción de Categoría --- */
        .software-cat-desc {
            background-color: #1a1332;
            border-radius: 1rem;
            padding: 0.5rem 1rem;
            margin-bottom: 1rem;
            transition: background 0.3s, color 0.3s;
        }

        .software-card {
            background-color: #23272f;
            border-radius: 0.75rem;
            padding: 1rem;
            text-align: center;
            transition: transform 0.3s, background 0.3s;
            position: relative;
            overflow: hidden;
        }

        .software-card.selected {
            background-color: #374151;
        }

        .software-card.unselected {
            opacity: 0.7;
        }

        .software-card:hover {
            transform: translateY(-3px);
            background-color: #374151;
        }

        .software-icon {
            width: 48px;
            height: 48px;
            margin-bottom: 0.5rem;
        }

        .software-name {
            font-weight: 500;
            color: #e5e7eb;
            margin-bottom: 0.25rem;
        }

        .software-tick {
            position: absolute;
            top: 1rem;
            right: 1rem;
            color: #22c55e;
            opacity: 0;
            transition: opacity 0.3s;
        }

        .software-card.selected .software-tick {
            opacity: 1;
        }

        /* --- Soporte Técnico (memde_think.png) Responsive --- */
        #section-front-features .feature-card.soporte-tecnico-card {
            overflow: visible !important;
        }

        #section-front-features img[src*="memde_think.png"] {
            opacity: 1;
            position: absolute;
            bottom: 0;
            right: 0;
            left: auto;
            top: auto;
            height: 80%;
            width: auto;
            pointer-events: none;
            z-index: 30;
            transition: opacity 0.3s, right 0.3s, height 0.3s;
        }

        @media (max-width: 1023px) {
            #section-front-features img[src*="memde_think.png"] {
                opacity: 0.8;
                z-index: 0;
                height: 80%;
                right: 0;
            }
        }

        @media (min-width: 1024px) {
            #section-front-features img[src*="memde_think.png"] {
                height: 115%;
                right: -2.5rem;
                bottom: 0;
                left: auto;
                top: auto;
                z-index: 40;
                opacity: 1;
            }
        }

        @media (min-width: 1280px) {
            #section-front-features img[src*="memde_think.png"] {
                right: -4rem;
                height: 115%;
                bottom: 0;
                left: auto;
                top: auto;
            }
        }

        /* --- Hero Product Images --- */
        .hero-crox-img {
            position: absolute;
            margin-top: -133px;
            top: 55px !important;
            pointer-events: none;
            z-index: 20;
            width: auto;
            transition: all 0.3s ease-in-out;
            will-change: transform, top, left, right;
        }

        /* Desktop and up */
        @media (min-width: 1024px) {
            .hero-crox-img {
                height: 420px;
            }
        }

        /* Tablet */
        @media (max-width: 1023px) {
            .hero-crox-img {
                height: 320px;
            }
        }

        /* Mobile */
        @media (max-width: 767px) {
            .hero-crox-img {
                display: none;
            }
        }

        /* --- Tower Selector Styles --- */
        #tower-selector-container {
            position: relative;
            /* Needed for absolute positioning of children if any, and for overflow */
            width: 100%;
            aspect-ratio: 4/5;
            background-color: #353f4d;
            border-radius: 0.75rem;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3);
            overflow: visible;
            /* Key to allow elements to overflow */
            display: flex;
            /* Changed to flex container */
            flex-direction: column;
            /* Stack children vertically */
            justify-content: space-between;
            /* Push image container to top, controls to bottom */
            align-items: center;
            margin-bottom: 1rem;
            padding-bottom: 2.5rem;
            /* Reserve space for the bottom controls */
        }

        #tower-selector-container .flex-grow {
            /* This div holds the image and expands to fill available space */
            position: absolute;
            /* Place it absolutely to allow name/arrows wrapper at bottom */
            top: 0;
            left: 0;
            width: 100%;
            height: calc(100% - 2.5rem);
            /* Take all height except bottom control height */
            display: flex;
            /* To center the image within it */
            justify-content: center;
            align-items: center;
            overflow: visible;
            /* Important for image to overflow its bounds inside this wrapper */
        }

        #current-tower-image {
            width: 100%;
            /* Fill the `flex-grow` container */
            height: 125%;
            /* Make it taller to overflow upwards */
            object-fit: contain;
            /* Keep aspect ratio, allow overflow if wider/taller than container */
            cursor: pointer;
            /* Change cursor to pointer for click interaction */
            transition: opacity 0.3s ease-in-out, transform 0.3s ease-in-out;
            z-index: 1;
            /* Below bottom controls */
            margin-top: -10%;
            /* Push the image up to show overflow at the top */
        }

        /* New wrapper for name and arrows */
        #tower-name-and-arrows-wrapper {
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 0.5rem 0;
            background-color: rgba(0, 0, 0, 0.6);
            border-top: 1px solid rgba(75, 85, 99, 0.5);
            box-shadow: 0 -2px 5px rgba(0, 0, 0, 0.3);
            height: 2.5rem;
            z-index: 10;
        }

        #current-tower-name {
            /* Styles as requested: same as select, plus padding for arrows */
            font-family: 'Saira', sans-serif;
            font-size: 1.125rem;
            /* text-lg */
            font-weight: 600;
            /* font-semibold */
            color: #95ef81;
            /* green-222 */
            text-shadow: 0 0 3px rgba(149, 239, 129, 0.3);
            white-space: nowrap;
            padding: 0.25rem 3rem;
            /* Increased horizontal padding to make space for arrows */
            background-color: transparent;
            /* No background here, parent wrapper provides it */
            border-radius: 0.25rem;
            z-index: 11;
            /* Ensure name is above arrows */
        }

        .tower-nav-arrow {
            position: absolute;
            /* Absolute relative to #tower-name-and-arrows-wrapper */
            top: 50%;
            transform: translateY(-50%);
            background-color: rgba(66, 210, 50, 0.7);
            /* Green-333 with some transparency */
            color: white;
            padding: 0.75rem;
            /* Increased padding for larger round button */
            border-radius: 50%;
            /* Make it round */
            cursor: pointer;
            z-index: 10;
            transition: background-color 0.3s ease, color 0.3s ease, box-shadow 0.3s ease;
            border: 2px solid #95ef81;
            /* Green-222 border */
            box-shadow: 0 0 8px #42d232, inset 0 0 5px rgba(149, 239, 129, 0.3);
            /* Neon glow */
            display: flex;
            /* Use flex to center icon */
            align-items: center;
            justify-content: center;
            width: 3rem;
            /* Fixed width for roundness */
            height: 3rem;
            /* Fixed height for roundness */
        }

        #prev-tower {
            left: 0;
            /* Align with left edge of wrapper */
            margin-left: -1.5rem;
            /* Pull half its width out to overlap container border */
        }

        #next-tower {
            right: 0;
            /* Align with right edge of wrapper */
            margin-right: -1.5rem;
            /* Pull half its width out to overlap container border */
        }

        .tower-nav-arrow:hover {
            background-color: rgba(66, 210, 50, 1);
            /* Solid green-333 on hover */
            color: #95ef81;
            /* Green-222 on hover */
            box-shadow: 0 0 15px #42d232, inset 0 0 8px rgba(149, 239, 129, 0.5);
            /* Stronger neon glow on hover */
        }

        /* --- Sticky Price Summary Card --- */
        #price-summary-card {
            position: fixed;
            bottom: 0;
            right: 0;
            width: fit-content;
            min-width: 250px;
            padding: 1rem 1.5rem;
            background-color: rgba(31, 41, 55, 0.9);
            border-top: 1px solid rgba(75, 85, 99, 0.5);
            border-left: 1px solid rgba(75, 85, 99, 0.5);
            border-top-left-radius: 0.75rem;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.4);
            backdrop-filter: blur(4px);
            -webkit-backdrop-filter: blur(4px);
            z-index: 100;
            
            opacity: 0;
            visibility: hidden;
            transform: translateY(100%);
            transition: opacity 0.4s ease-out, visibility 0.4s ease-out, transform 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            
            display: none; /* Hidden on mobile by default */
        }

        @media (min-width: 768px) {
            #price-summary-card {
                display: flex; /* Shown on tablet and up */
            }
        }

        #price-summary-card.visible {
            opacity: 1;
            visibility: visible;
            transform: translateY(0);
        }

        #price-summary-card .price-section {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            font-family: 'Saira', sans-serif;
        }

        #price-summary-card .price-value-row {
            display: flex;
            align-items: baseline;
            white-space: nowrap;
        }

        #price-summary-card .currency-value {
            font-weight: bold;
            line-height: 1;
            font-size: 3.5rem;
        }

        #price-summary-card .currency-text {
            font-size: 1.75rem;
            font-weight: bold;
            line-height: 1;
            margin-left: 0.5rem;
        }

        #price-summary-card .ars-price .currency-value,
        #price-summary-card .ars-price .currency-text {
            color: #22d3ee;
            text-shadow: 2px 2px 3px black;
        }

        #price-summary-card .usd-price .currency-value,
        #price-summary-card .usd-price .currency-text {
            color: #7a3ab7;
            text-shadow: 2px 2px 3px black;
        }

        #price-summary-card .separator {
            width: 1px;
            height: 4rem;
            background-color: rgba(75, 85, 99, 0.5);
            margin: 0 1.5rem;
        }
        
        #total-price-summary-usd-mobile {
            font-size: 2rem;
        }

        /* Select Styling */
        #ssd-select,
        #psu-select,
        #gpu-select {
            background-color: #374151;
            /* bg-gray-700 */
            border: 1px solid #42d232;
            /* green-333 border */
            color: #e5e7eb;
            /* text-gray-200 */
            padding: 0.25rem 0.5rem;
            border-radius: 0.375rem;
            /* rounded-md */
            font-size: 1rem;
            cursor: pointer;
            outline: none;
            /* Remove default focus outline */
            -webkit-appearance: none;
            /* Remove default browser styling for select */
            -moz-appearance: none;
            appearance: none;
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 20 20' fill='white'%3E%3Cpath fill-rule='evenodd' d='M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z' clip-rule='evenodd'/%3E%3C/svg%3E");
            background-repeat: no-repeat;
            background-position: right 0.5rem center;
            /* Adjusted position to fix overlap */
            background-size: 1em;
            padding-right: 2em;
            /* Ensure space for the arrow */
            font-family: 'Saira', sans-serif;
            /* Apply Saira font */
            transition: all 0.2s ease-in-out;
            /* Add transition for smoothness */
        }

        #ssd-select:focus,
        #psu-select:focus,
        #gpu-select:focus {
            border-color: #95ef81;
            /* green-222 on focus */
            box-shadow: 0 0 5px rgba(66, 210, 50, 0.4);
            /* Reduced glow intensity */
            background-color: #107c10;
            /* Darker green background on focus/open state */
        }

        /* Styling for the selected option text within the closed select */
        #component-list select {
            color: #95ef81;
            /* green-222 for selected text in closed select */
            font-weight: bold;
            text-shadow: 0 0 3px rgba(149, 239, 129, 0.3);
            /* Reduced text shadow intensity */
        }

        /* Dolar Popup Specific Styling */
        #dolar-popup {
            /* Ensure popup is on top */
            z-index: 1000 !important;

        }

        #popup-content {
            width: 300px;
        }

        #load-more-overlay {
            position: absolute;
        }

        #dolar-rates-list .dolar-rate-item {
            display: flex;
            flex-direction: column;
            align-items: flex-end;
            /* Align all content to the right */
            gap: 0.5rem;
            /* Space between name and values */
        }

        #dolar-rates-list .dolar-rate-item .dolar-name {
            /* New class for the dollar type name */
            font-weight: bold;
            color: #e5e7eb;
            /* Using Tailwind's gray-200 equivalent */
            margin-bottom: 0.5rem;
            /* Space below the name */
        }

        #dolar-rates-list .dolar-rate-item .text-right {
            text-align: right;
            /* Ensure text within this div aligns right */
            align-self: flex-end;
            /* Align values to the right within the item */
        }

        /* New animation for slower glow */
        @keyframes price-glow-slow {

            0%,
            100% {
                text-shadow: 2px 2px 30px rgba(0, 0, 0, 0.5), 0 0 10px rgba(118, 18, 143, 0.5), 0 0 30px rgba(34, 211, 238, 0.1), 0 0 15px rgba(34, 211, 238, 0.1);
            }

            50% {
                text-shadow: 2px 2px 30px rgba(0, 0, 0, 0.5), 0 0 6px rgba(34, 211, 238, 0.2), 0 0 15px rgba(34, 211, 238, 0.1);
            }
        }

        /* Universal section card style */
        .section-card-style {
            background-color: rgba(31, 41, 55, 0.9);
            /* Same background as price card */
            border: 1px solid rgba(75, 85, 99, 0.5);
            border-radius: 0.75rem;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.4);
            backdrop-filter: blur(4px);
            -webkit-backdrop-filter: blur(4px);
            padding-top: 2.5rem;
            /* Increased padding top */
            padding-bottom: 2.5rem;
            /* Increased padding bottom */
        }

        /* Component List Custom Styles */
        #component-list {
            display: flex;
            flex-direction: column;
            justify-content: space-around;
            /* Distribute items vertically */
            height: 100%;
            /* Occupy full height of parent column */
        }

        #component-list li {
            display: flex;
            flex-direction: column; /* Mobile-first: single column */
            align-items: flex-start; /* Align content to the left on mobile */
            gap: 0.5rem; /* Reduced gap for tighter mobile layout */
            width: 100%;
            margin-bottom: 2rem; /* Space between items on mobile */
        }

        @media (min-width: 768px) { /* md breakpoint */
            #component-list li {
                flex-direction: row; /* Revert to row layout on desktop */
                align-items: center;
                gap: 1.5rem; /* Adjusted gap for desktop */
                margin-bottom: 0;
            }
        }

        #component-list li .component-content-wrapper {
            display: flex;
            flex-direction: column;
            align-items: flex-start; /* Align text to the left */
            width: 100%;
            text-align: left; /* Align text to the left */
        }

        @media (min-width: 768px) { /* md breakpoint */
            #component-list li .component-content-wrapper {
                width: auto;
            }
        }

        #component-list li strong {
            font-size: 1.125rem;
            font-weight: 600;
            color: #e5e7eb;
            margin-bottom: 0.25rem;
        }

        #component-list select {
            width: 100%;
            max-width: 250px;
            margin-top: 0;
        }

        #component-list .description-text {
            font-family: 'Inter', sans-serif;
            color: #42d232;
            font-size: 1rem;
            margin-top: 0.25rem;
            min-height: 4.5rem;
            line-height: 1.5;
        }

        /* MODIFIED: CSS-based image transition for loading */
        .component-option-image,
        #current-tower-image {
            transition: filter 0.4s ease-in-out, opacity 0.4s ease-in-out;
        }

        .component-option-image.loading,
        #current-tower-image.loading {
            filter: grayscale(100%);
            opacity: 0.8;
        }

        #component-list .component-option-image {
            width: 100%; 
            max-width: 20rem; 
            object-fit: contain;
            flex-shrink: 0;
            margin-top: 0; 
            cursor: pointer;
        }

        @media (min-width: 768px) { /* md breakpoint */
            #component-list .component-option-image {
                width: 180px;
                max-width: none;
                left: 6rem;
                position: relative;
            }
        }

        /* Desktop Hover Zoom Effects & New Sizing */
        @media (min-width: 768px) {
            #current-tower-image:hover {
                transform: scale(1);
                transform-origin: center center;
                /* Expand from center */
            }

            #gpu-image,
            #psu-image {
                transform: scale(1.5);
                transform-origin: right center;
            }

/* #gpu-image:hover,
            #psu-image:hover {
                transform: scale(1.7);
            } */

            #ssd-image {
                transform: scale(1);
            }

            #ssd-image:hover {
                transform: scale(1);
            }
        }

        /* Mobile Sticky Price Summary Specific Styles */
        #mobile-price-summary-card {
            /* Inherits section-card-style */
            padding: 1rem 1.5rem;
            justify-content: center;
            align-items: center;
            position: fixed;
            font-weight: 600;
            /* Fixed position for sticky effect */
            bottom: -10px;
            /* Stick to the bottom of the viewport */
            gap: 0rem;
            /* Adjust gap for mobile */
            box-shadow: 0 -4px 15px rgba(0, 0, 0, 0.4);
            /* Shadow for sticky effect */
            opacity: 0;
            /* Initially hidden */
            width: fit-content;
            align-self: center;
            visibility: hidden;
            /* Initially hidden */
            text-shadow: 2px 2px 3px black;
            padding-left: 1.2rem;
            padding-right: 1.2rem;
            transition: opacity 0.5s ease-in-out, visibility 0.5s ease-in-out;
            /* Smooth transition */
        }

        #mobile-price-summary-card a {
            text-decoration: none;
        }

        #mobile-price-summary-card.show-mobile-price {
            opacity: 1;
            visibility: visible;
        }

        #mobile-price-summary-card .price-section {
            flex-direction: row;
            align-items: baseline;
            font-family: 'Saira', sans-serif;
        }

        #mobile-price-summary-card .currency-value {
            font-size: 3rem;
            /* Larger font size for main value on mobile (text-5xl) */
            line-height: 1;
        }

        #mobile-price-summary-card .currency-text {
            font-size: 1.125rem;
            /* Adjust size for "LUCAS" or "USD" if they were present */
            font-weight: bold;
            line-height: 1;
            margin-left: 0.25rem;
            /* Smaller margin for mobile */
            white-space: nowrap;
        }

        #mobile-price-summary-card .separator {
            width: 1px;
            height: 2.5rem;
            /* Shorter separator for mobile (h-8) */
            background-color: rgba(75, 85, 99, 0.5);
            /* Gray-500 equivalent */
        }

        #mobile-price-summary-card #usd-link-summary-mobile {
            align-self: left;
        }

        #garantia-section{
            font-size: 1.18rem;
        }
    </style>
</head>

<body class="bg-gray-900 text-white">

    <div id="dolar-popup"
        class="hidden fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4">
        <div id="popup-content"
            class="bg-gray-800/80 backdrop-blur-lg border border-gray-600/50 rounded-xl p-6 w-full max-w_sm text-white flex flex-col items-center justify-center">
            <h3 class="text-xl font-saira font-bold text-center mb-4 text-cyan-300">Cotizaciones Dólar</h3>
            <div id="dolar-rates-list" class="space-y-3">
            </div>
            <hr class="border-gray-600 my-4">
            <a id="google-link" href="#" target="_blank"
                class="block text-center text-sm text-indigo-400 hover:underline">Googlear &rarr;</a>
        </div>
    </div>


    <div id="error-toast"
        class="bg-red-600 text-white text-base rounded-lg p-4 shadow-2xl flex flex-col items-center gap-2">
        <span id="error-toast-message"></span>
        <button id="reset-selection-btn"
            class="hidden bg-white text-red-600 font-bold py-1 px-3 rounded-md text-sm">Reiniciar Selección</button>
    </div>

    <div class="container main-container mx-auto p-4 md:p-8 max-w-5xl">
        <div id="hero-wrapper" class="relative">
            <div id="hero-background" style="left: -1px; top: 66vh;pointer-events:none;">
                <div id="hero-background-in" style="pointer-events:none;left: 4px; top: -2px;"></div>
            </div>

            <img src="home-crox-A.png" id="home-crox-a" class="hero-crox-img" alt="Gabinete PC Gamer Básico"
                onerror="this.onerror=null;this.src='https://placehold.co/400x600/00000000/ffffff?text=PC+Case'">
            <img src="home-crox-B.png" id="home-crox-b" class="hero-crox-img" alt="Gabinete PC Gamer con Periféricos"
                onerror="this.onerror=null;this.src='https://placehold.co/400x600/00000000/ffffff?text=PC+Bundle'">

            <header class="text-center pt-8 relative">
                <img id="ovniUp" src="ovni1fade.png" class="w-32 h-auto" alt="OVNI"
                    onerror="this.onerror=null;this.src='https://placehold.co/128x128/00000000/ffffff?text=OVNI'">
                <img src="LaNave_LogoLetras.png" alt="Logo de La Nave del Medio" class="w-96 h-auto mx-auto mb-4"
                    onerror="this.onerror=null;this.src='https://placehold.co/192x64/00000000/ffffff?text=Logo'">
                <p class="font-vt323 text-5xl green-333 mt-2 tracking-wider"
                    style="text-shadow: 0 0 8px #42d232;">PC Gamer/Creator </p>
                <p class="green-333 text-2xl font-saira">Óptima Opción de Gama Media</small></p>

                <div class="flex items-center justify-center mt-6">
                    <div class="price-container relative hidden">
                        <div class="launch-badge">JUGÁ & CREÁ con Calidá!!</div>
                        <p class="text-5xl font-bold text-cyan-400 price-highlight font-saira" id="top-total-price">
                            $555.000</p>
                        <div class="mt-1 flex items-baseline justify-center gap-2">
                            <span id="usd-price-display-top"
                                class="hidden font-saira text-violet-500 text-2xl cursor-pointer"></span>
                            <a id="usd-link-top" href="#" class="text-gray-500 text-xs hover:underline hidden">¿cuánto
                                está?</a>
                        </div>
                    </div>
                    <img src="smile-messi.gif" alt="Meme de Messi sonriendo"
                        class="w-24 h-auto -ml-8 z-10 md:w-32 md:ml-4 hidden"
                        onerror="this.onerror=null;this.src='https://placehold.co/128x128/00000000/ffffff?text=Meme'">
                </div>
            <!-- PORDIOCH -->
            <div  class="grid grid-cols-2 md:grid-cols-4 gap-4 ">
                                <div class="feature-card">
                    <img src="HardSelect.png" alt="Icono de Hardware Seleccionado" class="w-24 h-24 mb-3"
                        onerror="this.onerror=null;this.src='https://placehold.co/96x96/00000000/ffffff?text=Hard'">
                    <h4 class="font-saira font-bold text-white text-xl leading-tight">Hardware Seleccionado</h4>
                    <p class="text-s text-gray-300 mt-1">Equilibrando Precio/Calidad </p>
                </div>

                <div class="feature-card">
                    <img src="WinUpRound.png" alt="Logo de Windows 11" class="w-24 h-24 mb-3"
                        onerror="this.onerror=null;this.src='https://placehold.co/96x96/00000000/ffffff?text=Win11'">
                    <h4 class="font-saira font-bold text-white text-xl leading-tight">Windows 11 Optimizado</h4>
                    <p class="text-s text-gray-300 mt-1">Lo llamo WindOS<p class="text-xs text-gray-500">FLUYE COMO EL VIENTO ;)</p></p>
                </div>

                <div class="feature-card">
                    <img src="SoftInstalled.png" alt="Icono de Software Instalado" class="w-24 h-24 mb-3"
                        onerror="this.onerror=null;this.src='https://placehold.co/96x96/00000000/ffffff?text=Soft'">
                    <h4 class="font-saira font-bold text-white text-xl leading-tight">Programas Clave</h4>
                    <p class="text-s text-gray-300 mt-1">
                        Instalados para <br><b class="text-green-200">PRENDER</b>
                        <span id="dynamic-word" class="transition-all duration-700 ease-in-out font-bold text-green-333">USAR</span>
                    </p>
                    <script>
                        // Palabras a rotar
                        const words = ["USAR", "JUGAR", "CREAR","VOLAR"];
                        let current = 0;
                        const el = document.getElementById("dynamic-word");
                        // Calcular el ancho máximo
                        const maxLen = Math.max(...words.map(w => w.length));
                        el.style.width = `${maxLen}ch`;
                        el.style.display = "inline-block";
                        el.style.textAlign = "center";
                        setInterval(() => {
                            el.style.opacity = "0.2";
                            setTimeout(() => {
                                current = (current + 1) % words.length;
                                el.textContent = words[current];
                                el.style.opacity = "1";
                            }, 350);
                        }, 2300);
                    </script>
                    <style>
                        #dynamic-word {
                            transition: opacity 0.7s cubic-bezier(.4,0,.2,1);
                            opacity: 1;
                            color: #42d232; /* green-333 */
                            width: 5ch; /* Fallback for 5 characters */
                            display: inline-block;
                            text-align: center;
                        }
                    </style>
                </div>



                <div class="feature-card animated-bg-games">
                    <div class="corner-ribbon-wrapper">
                        <div class="corner-ribbon"><span class="corner-ribbon-text">OFERTA</span><br><span
                                class="despegue-text text-violet-700">DESPEGUE</span></div>
                    </div>
                    <div class="text-orange-400 text-4xl mb-3"><i class="fas fa-gift"></i></div>
                    <h4 class="font-saira font-bold text-white text-xl leading-tight">Hasta <p
                            class="text-orange-400 text-xl">3 Juegos Incluidos</p>
                    </h4>
                    <p class="text-s text-gray-300 mt-1">✔ Elegilos</p>
                </div>
            </div>
                
            </header>

            <div class="hook-section text-center max-w-4xl mx-auto mt-8 space-y-6 relative z-40">
                <div>

                <div class="mt-2 text-base text-gray-200 flex items-center justify-center gap-4">
                    
                    <p ><i class="fas fa-house-circle-check"></i> Entrega a Domicilio</p>
                    <p> </i><i class="fas fa-screwdriver-wrench"></i> Asistencia Técnica</p>
                        <p >en Toda <i class="text-blue-300">🌊La Costa</i></p>
                </div>
                                    <!-- <p class="text-4xl font-bold"><strong><i>¿Gama Alta?</i><br class="sm:hidden"> ¡Ni Hace Falta!</strong></p>
                        <p class="text-gray-200 font-saira text-3xl mt-2">con MENO<span class="text-3xl">$</span> de la 1/2 <i class="text-violet-500 text-4xl">VOLÁS⚡</i></p> -->
                    <h2 class="relative z-40 font-saira font-bold text-center mt-16 text-4xl lg:text-5xl "
                        style="color: #FFD700; text-shadow: 0 2px 12px #000a; letter-spacing: 1px;">¡ARMÁ TU NAVE!</h2>
                        <h1 class="text-2xl">Buscá un Mejor Precio o Potenciala</h1>
                        <p class=" mb-8 text-3xl text-yellow-300">▼</p>
                </div>


            </div>

<!--             <div class="text-center mt-8 md:hidden lg:block">
                <a href="#games-section"
                    class="special-subtitle inline-block text-lg px-6 py-3 transition duration-300 transform hover:scale-105">
                    <div class="flex items-center justify-center gap-5"><i class="fas fa-tasks text-2xl"></i>
                        <div class="text-left">
                            <span class="block leading-tight">Usá esta Web Interactiva</span>
                            <span class="block text-2sm font-sans -mt-2">para simular tu pedido</span>
                        </div>
                    </div>
                </a>
            </div> -->

            <section class="hidden bg-gray-800/50 border border-gray-700 rounded-2xl p-6 md:p-8 max-w-3xl mx-auto">
                <div class="grid grid-cols-1 md:grid-cols-3 gap-8 text-center">
                    <div class="flex flex-col items-center">
                        <i class="fas fa-tasks text-4xl text-orange-400 mb-3"></i>
                        <h3 class="text-xl font-bold text-gray-200">1. Checá tu Pedido</h3>
                    </div>
                    <div class="flex flex-col items-center">
                        <i class="fab fa-whatsapp text-4xl green-333 mb-3"></i>
                        <h3 class="text-xl font-bold text-gray-200">2. Enviámelo</h3>
                    </div>
                    <div class="flex flex-col items-center">
                        <i class="fas fa-comments text-4xl text-cyan-400 mb-3"></i>
                        <h3 class="text-xl font-bold text-gray-200">3. Despejá tus Dudas</h3>
                    </div>
                </div>
            </section>
        </div>

        <div id="price-card-visibility-zone">
            <section ID="section-hardware" class="my-16 -mt-4 text-center max-w-3xl mx-auto px-4 overflow-hidden md:overflow-visible">
<!--                 <h2 class="text-5xl font-bold mb-4 text-white">La Base de<p> La Nave</p>
                </h2> -->
                <p class="text-3xl text-gray-100 font-saira">
                    De <strong class="text-4xl font-vt323">base</strong> usamos:</p>


                <div class="mt-16 space-y-3">
                    <!-- CPU Row -->
                    <div class="grid grid-cols-1 md:grid-cols-12 items-center gap-x-1 gap-y-6">
                        <div class="md:col-span-5">
                            <img src="comps/combos/ryzen5600g.png" alt="Ryzen 5 5600g" class="w-3/4 mx-auto md:w-[130%] md:-ml-16 h-auto rounded-xl shadow-lg" onerror="this.onerror=null;this.src='comps/combos/ryzen5600g.webp';">
                        </div>
                        <div class="md:col-span-7 text-center md:text-left">
                            <p class="font-saira text-4xl md:text-5xl green-333">Ryzen 5 5600g</p>
                            <p class="font-saira text-2xl md:text-3xl green-333 mt-2">16GB RAM <small>en DualChannel</small></p>
                            <p class="font-saira text-2xl md:text-3xl green-333">Motherboard <small>Gigabyte o Asus</small></p>
                            <p class="text-lg md:text-xl text-green-500 mt-2">Con este <b>excelente</b> combo con gráfica integrada ¡no te hace falta placa de video!</p>
                            <p class="text-lg md:text-xl text-green-600 text-right mt-1">...pero podemos agregarla si buscás gráficos <i>tope de gama</i></p>
                        </div>
                    </div></div>
            
                <h2 class="relative z-40 font-saira font-bold text-center mt-12 text-4xl md:text-2xl lg:text-5xl">
                    <span class="hidden sm:inline"
                        style="color: #FFD700; text-shadow: 0 2px 12px #000a; letter-spacing: 1px;">
                        <span style="color:rgba(66, 210, 50, 0.7);">▼</span> ELEGÍ EL RESTO <span
                            style="color:rgba(66, 210, 50, 0.7);">▼</span>
                    </span>
                    <span class="inline sm:hidden"
                        style="color: #FFD700; text-shadow: 0 2px 12px #000a; letter-spacing: 1px;">
                        ELEGÍ EL RESTO
                        <p style="color:rgba(66, 210, 50, 0.7);">▼</p>
                    </span>

                </h2>
            </section>


            <div id="main-components-container" class="max-w-5xl mx-auto p-6 md:p-8 mb-12 relative section-card-style">
                <section id="component-section" class="flex flex-col md:flex-row items-center gap-x-8 gap-y-6 h-full">
                    <div class="w-full md:w-1/2 flex-shrink-0 h-full flex items-center justify-center">
                        <div id="tower-selector-container"
                            class="relative w-full rounded-xl shadow-lg overflow-visible flex flex-col items-center h-full">
                            <!-- Main content area for the image, takes remaining height after bottom-controls -->
                            <div class="flex-grow flex items-center justify-center w-full h-full relative">
                                <img id="current-tower-image" src="" alt="Torre PC Gamer"
                                    class="w-full h-full object-contain"
                                    onerror="this.onerror=null;this.src='https://placehold.co/400x500/1f2937/ffffff?text=Torre+PC'">
                            </div>

                            <!-- This wrapper is positioned at the very bottom -->
                            <div id="tower-name-and-arrows-wrapper"
                                class="relative z-10 w-full flex justify-between items-center py-2 px-4">
                                <!-- The actual arrows and name -->
                                <i id="prev-tower" class="fas fa-chevron-left tower-nav-arrow"></i>
                                <span id="current-tower-name" class="bg-gray-800/80 px-2 py-1 rounded"></span>
                                <i id="next-tower" class="fas fa-chevron-right tower-nav-arrow"></i>
                            </div>
                        </div>
                    </div>
                    <div class="w-full md:w-1/2 h-full flex flex-col justify-around">
                        <ul id="component-list" class="space-y-4 text-gray-300 h-full flex flex-col justify-around">
                            <li class="flex flex-col md:flex-row items-center md:items-start w-full gap-4 md:gap-6">
                                <div class="component-content-wrapper text-left md:text-left">
                                    <strong class="text-lg font-semibold">Gráfica:</strong>
                                    <select id="gpu-select" class="ml-0 w-full max-w-[250px]"></select>
                                    <p id="gpu-description" class="description-text"></p>
                                </div>
                                <img id="gpu-image" src="" alt="Tarjeta Gráfica" class="component-option-image w-full max-w-xs mx-auto md:w-48 md:max-w-none md:mx-0">
                            </li>
                            <li class="flex flex-col md:flex-row items-center md:items-start w-full gap-4 md:gap-6">
                                <div class="component-content-wrapper text-left md:text-left">
                                    <strong class="text-lg font-semibold">Almacenamiento:</strong>
                                    <select id="ssd-select" class="ml-0 w-full max-w-[250px]"></select>
                                    <p id="ssd-description" class="description-text"></p>
                                </div>
                                <img id="ssd-image" src="" alt="Almacenamiento SSD" class="component-option-image w-full max-w-xs mx-auto md:w-48 md:max-w-none md:mx-0">
                            </li>
                            <li class="flex flex-col md:flex-row items-center md:items-start w-full gap-4 md:gap-6">
                                <div class="component-content-wrapper text-left md:text-left">
                                    <strong class="text-lg font-semibold">Fuente:</strong>
                                    <select id="psu-select" class="ml-0 w-full max-w-[250px]"></select>
                                    <p id="psu-description" class="description-text"></p>
                                </div>
                                <img id="psu-image" src="" alt="Fuente de Poder" class="component-option-image w-full max-w-xs mx-auto md:w-48 md:max-w-none md:mx-0">
                            </li>
                        </ul>
                    </div>
                </section>

            </div>


            <section class="mb-12 section-card-style">
                <h2 class="text-3xl font-bold text-center mb-3">Periféricos Extra</h2>
                <p class="text-center text-gray-300 mb-3">Agregá Comodidad al Mando</p>
                <div class="grid grid-cols-2 gap-6 max-w-lg mx-auto">
                    <div id="joystick-card"
                        class="card-peripheral bg-gray-800 p-2 rounded-xl border-2 border-transparent cursor-pointer">
                        <div class="image-wrapper relative aspect-[4/3]">
                            <img src="comps/xboxc1.jpg" alt="Joystick Xbox 360 Genérico"
                                class="rounded-md w-full h-full object-cover"
                                onerror="this.onerror=null;this.src='https://placehold.co/400x300/111827/ffffff?text=Joystick'">
                            <span id="joystick-badge"
                                class="absolute top-2 right-2 bg-indigo-500 text-white text-xs font-bold rounded-full h-6 w-6 items-center justify-center hidden">x2</span>
                        </div>
                    </div>
                    <div id="mouse-keyboard-card"
                        class="card-peripheral bg-gray-800 p-2 rounded-xl border-2 border-transparent cursor-pointer">
                        <div class="image-wrapper aspect-[4/3]">
                            <img src="comps/tecmou.jpg" alt="Combo Teclado y Mouse Inalámbrico"
                                class="rounded-md w-full h-full object-cover"
                                onerror="this.onerror=null;this.src='https://placehold.co/400x300/111827/ffffff?text=Teclado+y+Mouse'">
                        </div>
                    </div>
                </div>
                <div class="grid grid-cols-2 gap-6 max-w_lg mx-auto mt-2 text-center text-gray-400 text-sm">
                    <p>Joystick Xbox 360 (+22k)<br>Cable 2.5 mts</p>
                    <p>Mouse y Teclado (+36k)<br>Inalámbrico</p>
                </div>
            </section>

            <div id="section-front-features" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 px-4 md:px-0">
           

                <div class="feature-card relative lg:col-span-2 soporte-tecnico-card"
                    style="padding: 1rem; overflow: hidden; min-height: 200px;">
                    <img src="memde_think.png" alt="Soporte técnico personalizado"
                        class="absolute -z-10 bottom-0 right-0 h-4/5 w-auto opacity-30 pointer-events-none" md:z-10
                        md:opacity-100 md:h-[110%] md:-right-4"
                        onerror="this.onerror=null;this.src='https://placehold.co/240x264/00000000/ffffff?text=Yo'">

                    <div class="relative z-10 w-full h-full flex flex-col justify-start items-start text-left">
                        <div class="flex items-center gap-4 mb-2 mt-1 sm:mb-3 sm:mt-0">
                            <img src="SoportePersonal.png" alt="Icono de Soporte Técnico"
                                class="w-20 h-20 sm:w-16 sm:h-16 md:w-20 md:h-20 flex-shrink-0"
                                onerror="this.onerror=null;this.src='https://placehold.co/96x96/00000000/ffffff?text=Soporte'">
                            <h4
                                class="font-saira font-bold text-white text-2xl leading-tight whitespace-nowrap mt-1 sm:mt-0">
                                Soporte Técnico</h4>
                        </div>
                        <div class="space-y-1 text-sm text-gray-300 max-w-xs pl-0">
                            <p class="flex items-center justify-start"><i
                                    class="fas fa-comments blueish fa-fw w-6"></i><span class="ml-2">Contacto Directo</span>
                            </p>
                            <p class="flex items-center justify-start"><i class="fas fa-desktop blueish fa-fw w-6"></i><span
                                    class="ml-2">Asistencia Remota</span></p>
                            <div class="flex items-center justify-start">
                                <i class="fas fa-screwdriver blueish fa-fw w-6"></i>
                                <div class="ml-2">
                                    <p>Servicio a Domicilio</p>
                                    <p class="text-xs text-gray-400 -mt-1">en todo el Partido de La Costa</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="hidden md:flex lg:hidden items-center justify-center">
                    <div
                        class="special-subtitle inline-block text-lg px-6 py-3 transition duration-300 transform hover:scale-105">
                        <div class="flex items-center justify-center gap-5">
                            <i class="fas fa-tasks text-2xl"></i>
                            <div class="text-left">
                                <span class="block leading-tight">Usá esta Web Interactiva</span>
                                <span class="block text-2sm font-sans -mt-2">para simular tu pedido</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <section id="garantia-section" class="mb-12 section-card-style garantia-lista">
                <h2 class="text-3xl font-bold text-center mb-8">Condiciones y Garantía</h2>
                <div class="max-w-3xl mx-auto p-6 md:p-8 space-y-6">
                    <ul class="space-y-4 text-gray-300">
                        <li class="flex items-start gap-3"><i
                                class="fas fa-star green-333 mt-1"></i><span><strong>Componentes Nuevos:</strong> Con
                                garantía de proveedores de confianza.</span></li>
                        <li class="flex items-start gap-3"><i
                                class="fas fa-recycle text-cyan-400 mt-1"></i><span><strong>Componentes Usados:</strong>
                                Podemos <i>reciclar</i> los tuyos para abaratar el precio.</span></li>
                        <li class="flex items-start gap-3"><i
                                class="fas fa-shield-alt text-yellow-400 mt-1"></i><span><strong>Garantía Total:</strong> 12
                                meses de garantía en todos los componentes.</span></li>
                    </ul>
                    <div class="neon-green-highlight p-4 rounded-lg flex items-center justify-center gap-3 text-center">
                        <i class="fas fa-headset text-2xl"></i>
                        <span class="text-xl font-bold text-gray-200">Servicio Postventa | </span>
                        <span class="font-gamer text-xs">¿Algún Problema?<br>¡Lo Arreglo!</span>
                    </div>
                </div>
            </section>
        </div>


        <form id="orderForm">
            <section id="games-section" class="mb-12 section-card-style">
                <h2 class="text-3xl font-bold text-center mb-8">Juegazos que Viajan👌</h2>
                <p class="text-center green-333 -mt-4 mb-4 font-gamer">👇Seleccioná hasta 3</p>
                <p class="text-center text-violet-600 -mt-4 mb-8 font-gamer">Van Instalados!💾</p>
                <div id="game-grid-container" class="px-4 pt-4">
                    <div id="game-grid-wrapper">
                        <div id="game-list"
                            class="pt-2 pb-2 grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-6">
                        </div>
                    </div>
                    <div id="load-more-overlay" style="pointer-events:auto;"></div>
                </div>
                <div class="text-center load-more-container">
                    <button type="button" id="load-more-games" class="load-more-button font-gamer text-lg">Ver
                        Más</button>
                </div>
                    <p id="no-more-games" class="text-gray-500 text-center mt-2 mb-4 hidden">¿No viste el que querés? Pedimelo en Notas?
                    </p>
            </section>

            <section id="section-software" class="mb-12 section-card-style">
                <h2 class="text-5xl font-bold text-center mb-8">Programas Clave</h2>
                <p class="text-center font-saira text-xl mb-1">Te marco lo que Recomiendo👍</p>
                <p class="text-center text-gray-100 mb-1 text-xl">✅¡Hacé TU Selección!</p>
                <p class="text-center text-gray-400 mb-6">Podés modificarla luego...</p>
                <div id="software-list" class="max-w-2xl mx-auto space-y-4">
                </div>
                <p class="text-center text-gray-400 mt-6">¿Falta el tuyo? Pedimelo en Notas?</p>
            </section>

            <section class="mb-12 section-card-style">
                <!-- <h2 class="text-3xl font-bold text-center mb-3">Periféricos Extra</h2>
                <p class="text-center text-gray-300 mb-3">Agregá Comodidad al Mando</p>
                <div class="grid grid-cols-2 gap-6 max-w-lg mx-auto">
                    <div id="joystick-card"
                        class="card-peripheral bg-gray-800 p-2 rounded-xl border-2 border-transparent cursor-pointer">
                        <div class="image-wrapper relative aspect-[4/3]">
                            <img src="comps/xboxc1.jpg" alt="Joystick Xbox 360 Genérico"
                                class="rounded-md w-full h-full object-cover"
                                onerror="this.onerror=null;this.src='https://placehold.co/400x300/111827/ffffff?text=Joystick'">
                            <span id="joystick-badge"
                                class="absolute top-2 right-2 bg-indigo-500 text-white text-xs font-bold rounded-full h-6 w-6 items-center justify-center hidden">x2</span>
                        </div>
                    </div>
                    <div id="mouse-keyboard-card"
                        class="card-peripheral bg-gray-800 p-2 rounded-xl border-2 border-transparent cursor-pointer">
                        <div class="image-wrapper aspect-[4/3]">
                            <img src="comps/tecmou.jpg" alt="Combo Teclado y Mouse Inalámbrico"
                                class="rounded-md w-full h-full object-cover"
                                onerror="this.onerror=null;this.src='https://placehold.co/400x300/111827/ffffff?text=Teclado+y+Mouse'">
                        </div>
                    </div>
                </div>
                <div class="grid grid-cols-2 gap-6 max-w_lg mx-auto mt-2 text-center text-gray-400 text-sm">
                    <p>Joystick Xbox 360 (+22k)<br>Cable 2.5 mts</p>
                    <p>Mouse y Teclado (+36k)<br>Inalámbrico</p>
                </div> -->

                <div class="text-center mt-10 max-w-4xl mx-auto">
                    <div id="selected-games-section" class="mb-6 hidden">
                        <p class="text-gray-400 text-lg">Juegos Incluidos</p>
                        <div id="selected-games-list" class="flex justify-center flex-wrap gap-2 mt-2">
                        </div>
                    </div>

                    <div class="flex flex-col items-center">
                        <h2 class="text-3xl font-bold mb-4">Precio Total</h2>
                        <div class="grid grid-cols-2 gap-y-2 md:gap-x-4 w-full max-w-lg mt-4">
                            <div class="row-start-1 col-start-1 flex justify-center items-center">
                                <div class="relative h-24 w-40">
                                    <span class="offer-banner-contado font-saira">al contado</span>
                                    <span class="offer-banner-main font-saira">¡OFERTA ÚNICA!</span>
                                </div>
                            </div>

                            <div class="row-start-1 col-start-2 flex items-center justify-start">
                                <div>
                                    <p class="lucas-price text-left ml-4 font-saira">$<span id="total-price">500</span>
                                    </p>
                                    <p class="text-2xl md:text-3xl text-cyan-400/70 font-saira text-left ml-4 -mt-2">
                                        LUCAS</p>
                                </div>
                            </div>

                            <div class="row-start-2 col-start-1 flex items-center justify-center text-right pr-2">
                                <div>
                                    <p class="text-sm green-333 whitespace-nowrap"><i
                                            class="fas fa-truck mr-1"></i>Entrega GRATIS</p>
                                    <p class="text-base text-white font-bold">🌊 En Toda <strong class="text-white">La
                                            Costa</strong></p>
                                </div>
                            </div>

                            <div class="row-start-2 col-start-2 flex items-center justify-start pl-4">
                                <div>
                                    <p id="total-price-usd"
                                        class="font-saira text-2xl text-violet-400 hidden cursor-pointer"></p>
                                    <a id="usd-link-bottom" href="#"
                                        class="text-xs text-gray-500 hover:underline hidden -mt-1">
                                        <p>Ver Cotizaciones</p>
                                    </a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

            </section>
            <br><br>

            <section id="notes-section" class="mb-12 text-center section-card-style">
                <h2 class="text-3xl font-bold text-center mb-8">Notas📝</h2>
                <textarea id="extra-notes"
                    class="w-full max-w-xl mx-auto block bg-gray-800 border border-gray-700 rounded-lg p-4 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition"
                    rows="4"
                    placeholder="🤔¿Dudas?&#10;💾¿Más Soft?&#10;⚙️¿Otro Hard?&#10;¿Alguna otra cuestión? . . ."></textarea>
            </section>

            <div class="text-center">
                <p id="pre-submit-text" class="text-gray-400 mb-7">Enviame tu Pedido/Consulta</p>
                <div class="flex flex-col items-center">
                    <button id="submit-button" type="submit"
                        class="cta-button text-white font-bold py-4 px-10 rounded-full text-xl flex items-center justify-center gap-4">
                        <i class="fab fa-whatsapp text-4xl"></i>
                        <span>¡Vamos a WhatsApp!</span>
                    </button>
                </div>
                <div id="confirmation-message"
                    class="hidden text-center p-6 bg-gray-900/80 border-2 border-green-333 rounded-2xl max-w-md mx-auto mt-4">
                    <i class="fas fa-check-circle text-5xl green-333 mb-4"></i>
                    <h3 class="text-2xl font-bold text-white mb-2">¡Pedido enviado!</h3>
                    <p class="text-gray-300 font-roboto">Gracias por tu consulta. Te responderemos a la brevedad por
                        WhatsApp.</p>
                </div>
            </div>
        </form>



        <footer class="text-center mt-16 pt-8 border-t border-gray-700">
            <div class="mb-6">
                <img src="logo.png" alt="kenna.inf" class="w-80 mx-auto mb-4"
                    onerror="this.onerror=null;this.src='https://placehold.co/320x80/00000000/ffffff?text=Logo'">
                <a id="service-link" href="https://www.facebook.com/kenna.inf/reviews" target="_blank"
                    class="text-indigo-400 hover:text-indigo-300 transition-colors">
                    <i class="fas fa-star"></i> Clientes Satisfechos<br class="sm:hidden"> con Mi Servicio
                </a>
            </div>
            <p class="text-gray-400 mb-4">Encontrame en Redes Sociales</p>
            <div class="flex justify-center gap-6 text-2xl">
                <a href="https://www.instagram.com/kenna.inf" target="_blank"
                    class="text-gray-400 hover:text-white transition"><i class="fab fa-instagram"></i></a>
                <a href="https://www.facebook.com/kenna.inf" target="_blank"
                    class="text-gray-400 hover:text-white transition"><i class="fab fa-facebook"></i></a>
            </div>
            <img id="memde_pointLeft" src="memde_pointLeft.png" alt=""
                onerror="this.onerror=null;this.src='https://placehold.co/250x300/00000000/ffffff?text=Yo'">
        </footer>

    </div>

    <!-- Fullscreen Overlay for Image Zoom (hidden by default) -->
    <div id="fullscreen-overlay" class="fullscreen-overlay hidden">
        <div class="zoomed-content">
            <img id="zoomed-image" src="" alt="Imagen ampliada del componente">
        </div>
    </div>
    
    <!-- Sticky Price Summary Card -->
    <div id="price-summary-card" class="font-saira">
        <div class="price-section ars-price">
            <div class="price-value-row">
                <span class="currency-value">$<span id="total-price-summary-ars">500</span></span>
                <span class="currency-text">LUCAS</span>
            </div>
        </div>
        <div class="separator"></div>
        <div class="price-section usd-price" id="usd-price-section">
            <div class="price-value-row">
                <span class="currency-value"><span id="total-price-summary-usd"></span></span>
                <span class="currency-text">USD</span>
            </div>
            <a id="usd-link-summary" href="#" class="text-xs text-gray-500 hover:underline">
                <p>Ver cotizaciones</p>
            </a>
        </div>
    </div>


    <!-- NEW Mobile Sticky Price Summary -->
    <div id="mobile-price-summary-card"
        class="fixed bottom-0 left-0 right-0 z-50 p-4 section-card-style bg-gray-800/90 flex md:hidden justify-center items-center">
        <div class="price-section ars-price pr-4">
            <div class="price-value-row">
                <span class="currency-value text-cyan-400 font-saira text-right">$<span
                        id="total-price-summary-ars-mobile">500.000</span></span>
            </div>
        </div>
        <div class="separator w-1 h-8"></div> <!-- Adjust height as needed -->
        <div class="price-section usd-price pl-4" id="usd-price-section-mobile">

            <a id="usd-link-summary-mobile" href="#" class="text-xs text-gray-500 hover:underline">
                <div class="price-value-row">
                    <span class="currency-value text-violet-600 font-saira"><span
                            id="total-price-summary-usd-mobile"></span></span>
                </div>
            </a>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            // --- DATA ---
            const gameNames = ['GTA V', 'LoL', 'Dota 2', 'Overwatch 2', 'Minecraft', 'Rocket League', 'Need for Speed: Hot Pursuit Remastered', 'Need for Speed: Underground HD', 'Half Life: Black Mesa', 'Half Life 2 HD', 'Abe´s Oddysey Remake', 'WoW Classic: en TurtleWoW', 'Dishonored 2', 'Borderlands 2', 'Portal 1 y 2', 'Left 4 Dead 2', 'BioShock Remaster', 'BioShock 2 Remaster', 'BioShock Infinite', 'Fallout 3', 'Fallout: New Vegas', 'Batman: Arkham Asylum', 'Batman: Arkham City', 'Sleeping Dogs: Definitive Edition', 'Tomb Raider (2013)', 'Mass Effect Legendary Edition', 'Far Cry 3', 'Deus Ex: Human Revolution', 'Serious Sam Classics: Revolution', 'Burnout Paradise', 'DiRT 3 Complete Edition', 'Need for Speed: Underground 2 HD', 'Need for Speed: Most Wanted HD', 'Blur', 'GRID 2', 'GRID Autosport', 'F1 2014', 'FIFA 17', 'PES 2017', 'NBA 2K17', 'FallGuys', 'Sims 4 + Expansiones', 'Spore: Aventuras Galacticas', 'Roblox', 'Call of Duty: Black Ops', 'Call of Duty: Black Ops 2', 'Metro 2033', 'Crysis 2', 'Bulletstorm', 'Dishonored', 'Max Payne 3', 'Singularity', 'F.E.A.R.', 'Mortal Kombat 11 Komplete Edition', 'Ultra Street Fighter IV', 'Ultimate Marvel vs. Capcom 3', 'The King of Fighters XIII', 'Injustice Gods Among Us', 'Heroes of Might & Magic HD V', 'Reckoning: Kingdoms of Amalur', 'Divinity Original Sin', 'Age of Empires II Definitive Edition', 'The Elder Scrolls V: Skyrim', 'The Elder Scrolls IV: Oblivion & AddOns HD'];
            const softwareData = [
                // SISTEMA
                { name: 'AVG AntiVirus', slug: 'avg_antivirus', checked: true, disabled: false, category: 'Sistema', descripcion: 'Antivirus gratuito y eficaz.' },
                { name: 'Avast AntiVirus', slug: 'avast_antivirus', checked: false, disabled: false, category: 'Sistema', descripcion: 'Igual que AVG pero más molesto.' },
                { name: 'BitDefender', slug: 'bitdefender', checked: false, disabled: false, category: 'Sistema', descripcion: 'Excelente antivirus. Requiere cuenta gratuita.' },
                { name: 'MalwareBytes', slug: 'malwarebytes', checked: true, disabled: false, category: 'Sistema', descripcion: 'Elimina malware y spyware. Complementa antivirus.' },
                { name: 'Firewall App Blocker', slug: 'firewall_app_blcoker', checked: false, disabled: false, category: 'Sistema', descripcion: 'Bloquea el acceso a internet de las aplicaciones elegidas.' },
                { name: 'Fraps', slug: 'fraps', checked: true, disabled: false, category: 'Sistema', descripcion: 'Captura pantalla y FPS. Para tunear juegos es fundamental.' },
                { name: 'HW Monitor', slug: 'hw_monitor', checked: true, disabled: false, category: 'Sistema', descripcion: 'Monitorea temperatura y voltajes.' },
                { name: 'Macrium Reflect', slug: 'macrium_reflect', checked: false, disabled: false, category: 'Sistema', descripcion: 'Clona y respalda discos.' },
                { name: 'Space Sniffer', slug: 'space_sniffer', checked: true, disabled: false, category: 'Sistema', descripcion: 'Visualiza uso de espacio en disco. Ideal para hacer lugar.' },
                { name: 'Uninstall Tool', slug: 'uninstall_tool', checked: true, disabled: false, category: 'Sistema', descripcion: 'Desinstala programas a fondo.' },
                { name: 'Wise Memory Optimizer', slug: 'wise_memory_optimizer', checked: true, disabled: false, category: 'Sistema', descripcion: 'Libera y optimiza la RAM.' },
                { name: 'Wise Registry Cleaner', slug: 'wise_registry_cleaner', checked: false, disabled: false, category: 'Sistema', descripcion: 'Limpia el registro de Windows.' },
                // MULTIMEDIA
                { name: 'Hear', slug: 'hear', checked: false, disabled: false, category: 'Multimedia', descripcion: 'Mejora el audio del sistema. Alta configuración.' },
                { name: 'PotPlayer', slug: 'potplayer', checked: true, disabled: false, category: 'Multimedia', descripcion: 'Reproductor de video avanzado.' },
                { name: 'VLC Player', slug: 'vlc_player', checked: false, disabled: false, category: 'Multimedia', descripcion: 'Reproduce cualquier formato de video.' },
                { name: 'WinAmp', slug: 'winamp', checked: true, disabled: false, category: 'Multimedia', descripcion: 'Clásico reproductor de música, renovado por la comunidad.' },
                { name: 'YouTube', slug: 'youtube', checked: true, disabled: false, category: 'Multimedia', descripcion: 'YouTube *sin publicidad*.' },
                { name: 'Spotify', slug: 'spotify', checked: true, disabled: false, category: 'Multimedia', descripcion: 'Música en streaming.' },
                { name: 'Stremio', slug: 'stremio', checked: true, disabled: false, category: 'Multimedia', descripcion: 'Películas y series online.' },
                // WEB
                { name: 'Brave', slug: 'brave', checked: true, disabled: false, category: 'Web', descripcion: 'Navegador rápido y seguro basado en Chrome. Bloquea publicidad.' },
                { name: 'Opera GX', slug: 'opera_gx', checked: true, disabled: false, category: 'Web', descripcion: 'Navegador gamer personalizable. Bloquea publicidad.' },
                { name: 'Google Chrome', slug: 'google_chrome', checked: true, disabled: false, category: 'Web', descripcion: 'Navegador web popular.' },
                { name: 'WhatsApp', slug: 'whatsapp', checked: true, disabled: false, category: 'Web', descripcion: 'Mensajería instantánea.' },
                { name: 'Discord', slug: 'discord', checked: false, disabled: false, category: 'Web', descripcion: 'Chat de voz y texto para comunidades.' },
                { name: 'Zoom', slug: 'zoom', checked: false, disabled: false, category: 'Web', descripcion: 'Videollamadas y reuniones online.' },
                { name: 'Free Download Manager', slug: 'freedownloadmanager', checked: true, disabled: false, category: 'Web', descripcion: 'Gestor de descargas y torrents eficiente.' },
                { name: 'JDownloader 2', slug: 'jdownloader_2', checked: false, disabled: false, category: 'Web', descripcion: 'Descarga archivos de internet.' },
                { name: 'qBitTorrent', slug: 'qbittorrent', checked: false, disabled: false, category: 'Web', descripcion: 'Descarga archivos de internet.' },
                // CREACIÓN
                { name: 'Inkscape', slug: 'inkscape', checked: false, disabled: false, category: 'Creación', descripcion: 'Gráficos vectoriales. Ideal para diseñar logos profesionales.' },
                { name: 'Krita', slug: 'krita', checked: false, disabled: false, category: 'Creación', descripcion: 'Pintura y arte digital.' },
                { name: 'Photopea', slug: 'photopea', checked: true, disabled: false, category: 'Creación', descripcion: 'Clon de Photoshop online.' },
                { name: 'Canva', slug: 'canva', checked: true, disabled: false, category: 'Creación', descripcion: 'Diseño gráfico fácil.' },
                { name: 'GIMP', slug: 'gimp', checked: false, disabled: false, category: 'Creación', descripcion: 'Editor de imágenes avanzado.' },
                { name: 'XnConvert', slug: 'xnconvert', checked: true, disabled: false, category: 'Creación', descripcion: 'Conversión y mejora de imágenes por lotes.' },
                { name: 'CapCut', slug: 'capcut', checked: false, disabled: false, category: 'Creación', descripcion: 'Edición de video sencilla.' },
                { name: 'DaVinci Resolve', slug: 'davinci_resolve', checked: true, disabled: false, category: 'Creación', descripcion: 'Edición de video profesional.' },
                { name: 'OBS Studio', slug: 'obs_studio', checked: true, disabled: false, category: 'Creación', descripcion: 'Grabación y streaming.' },
                { name: 'GitHub Desktop', slug: 'github_desktop', checked: false, disabled: false, category: 'Desarrollo', descripcion: 'Cliente visual para Git.' },
                { name: 'Visual Studio Code', slug: 'visual_studio_code', checked: false, disabled: false, category: 'Desarrollo', descripcion: 'Editor de código moderno.' },
            ];
            const toSlug = (str) => str.toLowerCase().replace(/[^\w\s-]/g, '').trim().replace(/[\s_-]+/g, '-').replace(/^-+|-+$/g, '');
            const games = gameNames.map(name => ({ name: name, slug: toSlug(name) }));

            let towersOptions = [];
            let ssdOptions = [];
            let gpuOptions = [];
            let psuOptions = [];
            let motherboardOptions = [];
            let cpuOptions = [];
            let ramOptions = [];
            let comboOptions = [];

            // Cargar los datos desde products.json usando fetch
            fetch('products.json')
                .then(response => response.json())
                .then(data => {
                    towersOptions = data.towersOptions || [];
                    ssdOptions = data.ssdOptions || [];
                    gpuOptions = data.gpuOptions || [];
                    psuOptions = data.psuOptions || [];
                    motherboardOptions = data.motherboardOptions || [];
                    cpuOptions = data.cpuOptions || [];
                    ramOptions = data.ramOptions || [];
                    comboOptions = data.comboOptions || [];

                    // --- POBLAR SELECTS Y ACTUALIZAR UI ---
                    // SSD
                    const ssdSelect = document.getElementById('ssd-select');
                    if (ssdSelect) {
                        ssdSelect.innerHTML = ssdOptions.map((option, index) =>
                            `<option value="${option.price}" ${index === 0 ? 'selected' : ''}>${option.name}</option>`
                        ).join('');
                    }
                    // GPU
                    const gpuSelect = document.getElementById('gpu-select');
                    if (gpuSelect) {
                        gpuSelect.innerHTML = gpuOptions.map((option, index) =>
                            `<option value="${option.price}" ${index === 0 ? 'selected' : ''}>${option.name}</option>`
                        ).join('');
                    }
                    // PSU
                    const psuSelect = document.getElementById('psu-select');
                    if (psuSelect) {
                        psuSelect.innerHTML = psuOptions.map((option, index) =>
                            `<option value="${option.price}" ${index === 0 ? 'selected' : ''}>${option.name}</option>`
                        ).join('');
                    }

                    // Llamar a las funciones de actualización SOLO después de poblar los selects
                    updateTowerDisplay();
                    updateComponentDisplay(ssdSelect, document.getElementById('ssd-description'), document.getElementById('ssd-image'), ssdOptions);
                    updateComponentDisplay(gpuSelect, document.getElementById('gpu-description'), document.getElementById('gpu-image'), gpuOptions);
                    updateComponentDisplay(psuSelect, document.getElementById('psu-description'), document.getElementById('psu-image'), psuOptions);

                })
                .catch(error => {
                    console.error('Error cargando products.json:', error);
                });

            // --- PRECIOS ---
            // Precios base y componentes
            const GAIN = 121000;
            const COMBO_MOTHER_CPU_RAM = 325000;
            const BASE_PRICE = COMBO_MOTHER_CPU_RAM + GAIN;
            const JOYSTICK_PRICE = 22000;
            const MOUSE_KEYBOARD_PRICE = 36000;
            let joystickCount = 0;
            let hasMouseKeyboard = false;
            const totalPriceEl = document.getElementById('total-price'); // Price in the hero section (main footer)
            const topTotalPriceEl = document.getElementById('top-total-price'); // Price in the hero section (top header)

            const usdPriceTopEl = document.getElementById('usd-price-display-top');
            const usdPriceBottomEl = document.getElementById('total-price-usd');
            const usdLinkBottom = document.getElementById('usd-link-bottom');
            const usdLinkTop = document.getElementById('usd-link-top');

            // Floating price display elements (now renamed to summary card)
            const totalPriceSummaryArsEl = document.getElementById('total-price-summary-ars');
            const totalPriceSummaryUsdEl = document.getElementById('total-price-summary-usd');
            const usdLinkSummary = document.getElementById('usd-link-summary');
            const usdPriceSectionEl = document.getElementById('usd-price-section'); // Get the USD price section element

            // Mobile sticky price summary elements
            const totalPriceSummaryArsMobileEl = document.getElementById('total-price-summary-ars-mobile');
            const totalPriceSummaryUsdMobileEl = document.getElementById('total-price-summary-usd-mobile');
            const usdPriceSectionMobileEl = document.getElementById('usd-price-section-mobile');
            const usdLinkSummaryMobile = document.getElementById('usd-link-summary-mobile');


            let allDolarRates = []; // To store all rates for the popup
            let currentTowerIndex = 0; // Index of the currently selected tower

            /**
             * Updates the displayed prices (ARS and USD) based on selected components and exchange rates.
             * @param {number} rate - The current official USD selling rate.
             */
            function updatePrices(rate) {
                let total = BASE_PRICE;
                if (joystickCount > 0) total += joystickCount * JOYSTICK_PRICE;
                if (hasMouseKeyboard) total += MOUSE_KEYBOARD_PRICE;

                // Add selected tower price
                if (towersOptions.length > 0) {
                    total += towersOptions[currentTowerIndex].price;
                }

                // Add selected SSD storage price from the select value
                const ssdSelect = document.getElementById('ssd-select');
                if (ssdSelect && ssdSelect.value) {
                    total += parseInt(ssdSelect.value);
                }

                // Add selected GPU price from the select value
                const gpuSelect = document.getElementById('gpu-select');
                if (gpuSelect && gpuSelect.value) {
                    total += parseInt(gpuSelect.value);
                }

                // Add selected PSU price from the select value
                const psuSelect = document.getElementById('psu-select');
                if (psuSelect && psuSelect.value) {
                    total += parseInt(psuSelect.value);
                }


                // Update prices in main section and summary card (desktop/tablet)
                const formattedTotal = Math.floor(total / 1000);
                if (totalPriceEl) totalPriceEl.textContent = `${formattedTotal}`; // Removed .000 here
                if (topTotalPriceEl) topTotalPriceEl.textContent = `$${formattedTotal}.000`; // Always add .000
                if (totalPriceSummaryArsEl) totalPriceSummaryArsEl.textContent = formattedTotal;
                // Mobile price: show full amount with .000
                if (totalPriceSummaryArsMobileEl) totalPriceSummaryArsMobileEl.textContent = `${total.toLocaleString('es-AR')}`;


                let oficial = null;
                if (allDolarRates && allDolarRates.length) {
                    oficial = allDolarRates.find(r => r.nombre && r.nombre.toLowerCase().includes('oficial'));
                }
                if (!oficial && rate) {
                    oficial = { venta: rate };
                }

                if (oficial && oficial.venta) {
                    const totalUSD = total / oficial.venta;
                    const usdText = `$${totalUSD.toFixed(0)}`; // Formatear sin decimales y sin "USD" al final

                    // Main section USD display
                    if (usdPriceTopEl) {
                        usdPriceTopEl.textContent = `${usdText} USD`; // Add "USD" back for this element
                        usdPriceTopEl.classList.remove('hidden');
                        usdPriceTopEl.parentElement.style.display = '';
                    }
                    if (usdPriceBottomEl) {
                        usdPriceBottomEl.textContent = `${usdText} USD`; // Add "USD" back for this element
                        usdPriceBottomEl.classList.remove('hidden');
                        usdPriceBottomEl.parentElement.style.display = '';
                    }
                    if (usdLinkTop) usdLinkTop.classList.remove('hidden');
                    if (usdLinkBottom) usdLinkBottom.classList.remove('hidden');

                    // Summary card USD display (desktop/tablet)
                    if (totalPriceSummaryUsdEl) {
                        totalPriceSummaryUsdEl.textContent = usdText; // No "USD" text here, it's in the span
                    }
                    if (usdLinkSummary) usdLinkSummary.classList.remove('hidden');
                    // Ensure USD section is visible
                    if (usdPriceSectionEl) {
                        usdPriceSectionEl.style.display = 'flex';
                    }

                    // Mobile sticky price summary USD display
                    if (totalPriceSummaryUsdMobileEl) {
                        totalPriceSummaryUsdMobileEl.textContent = usdText;
                    }
                    if (usdLinkSummaryMobile) usdLinkSummaryMobile.classList.remove('hidden');
                    if (usdPriceSectionMobileEl) {
                        usdPriceSectionMobileEl.style.display = 'flex';
                    }

                } else {
                    // Hide USD display if API fails for all sections
                    if (usdPriceTopEl) usdPriceTopEl.parentElement.style.display = 'none';
                    if (usdPriceBottomEl) usdPriceBottomEl.parentElement.style.display = 'none';
                    if (usdPriceSectionEl) usdPriceSectionEl.style.display = 'none'; // Hide USD section on error
                    if (usdPriceSectionMobileEl) usdPriceSectionMobileEl.style.display = 'none'; // Hide mobile USD section on error
                }
            }

            // UPDATED to use dolarapi.com
            /**
             * Fetches the current dollar exchange rates from an API.
             */
            async function fetchDolarRate() {
                try {
                    // Fetch for default display rate (Oficial)
                    const responseOficial = await fetch('https://dolarapi.com/v1/dolares/oficial');
                    if (!responseOficial.ok) throw new Error('Network response was not ok for Oficial rate');
                    const dataOficial = await responseOficial.json();

                    if (dataOficial && dataOficial.venta) {
                        updatePrices(dataOficial.venta);
                    }

                    // Fetch all rates for the popup
                    const responseAll = await fetch('https://dolarapi.com/v1/dolares');
                    if (!responseAll.ok) throw new Error('Network response was not ok for All rates');
                    allDolarRates = await responseAll.json();

                } catch (error) {
                    console.error("Could not fetch exchange rate:", error);
                    // Hide USD display if API fails
                    if (usdPriceTopEl) usdPriceTopEl.parentElement.style.display = 'none';
                    if (usdPriceBottomEl) usdPriceBottomEl.parentElement.style.display = 'none';
                    if (usdPriceSectionEl) usdPriceSectionEl.style.display = 'none'; // Hide USD section on error
                    if (usdPriceSectionMobileEl) usdPriceSectionMobileEl.style.display = 'none'; // Hide mobile USD section on error
                }
            }

            // --- UI POPULATION ---
            const gameListContainer = document.getElementById('game-list');
            games.forEach(game => {
                const imageSrc = `cover/${game.slug}.webp`;
                const cardEl = document.createElement('div');
                cardEl.className = 'card-game';
                cardEl.id = `card-game-${game.slug}`;
                cardEl.innerHTML = `
                        <input type="checkbox" id="game-${game.slug}" name="game" value="${game.name}" data-img-src="${imageSrc}" class="hidden">
                        <label for="game-${game.slug}" class="rounded-xl cursor-pointer transition">
                            <img src="${imageSrc}" alt="Carátula de ${game.name}" class="rounded-xl w-full h-full object-cover" onerror="this.onerror=null;this.src='https://placehold.co/300x400/111827/4f46e5?text=${game.name.replace(/\s/g, '+')}';">
                            <div class="game-title-sticker hidden">${game.name}</div>
                        </label>`;
                gameListContainer.appendChild(cardEl);
            });


            const softwareCategories = [
                { name: 'Sistema', description: 'Herramientas para mantener, optimizar y proteger tu PC.', icon: 'fa-shield-alt' },
                { name: 'Multimedia', description: 'Reproductores, audio y apps para disfrutar de música y video.', icon: 'fa-photo-film' },
                { name: 'Web', description: 'Navegadores, mensajería y gestores de descargas.', icon: 'fa-globe' },
                { name: 'Creación', description: 'Edición de imágenes, video, diseño y herramientas para creadores.', icon: 'fa-paint-brush' },
                { name: 'Desarrollo', description: 'Herramientas para programar, editar código y gestionar proyectos.', icon: 'fa-code' },
            ];

            const softwareListContainer = document.getElementById('software-list');
            softwareListContainer.innerHTML = '';

            softwareCategories.forEach(category => {
                const categoryWrapper = document.createElement('div');
                categoryWrapper.className = 'mb-8';
                // Add icon to category heading
                categoryWrapper.innerHTML = `<h3 class="font-bold text-lg text-violet-400 mb-2 flex items-center gap-2"><i class="fas ${category.icon} text-violet-300 text-xl"></i> ${category.name}</h3>`;
                // Descripción de categoría
                const descDiv = document.createElement('div');
                descDiv.className = 'software-cat-desc mb-4 px-4 py-2 rounded-xl text-base text-violet-100 bg-[#1a1332]';
                descDiv.style.transition = 'background 0.2s, color 0.2s';
                descDiv.textContent = category.description;
                categoryWrapper.appendChild(descDiv);
                // Grid de programas (checkboxes)
                const itemsWrapper = document.createElement('div');
                itemsWrapper.className = 'grid grid-cols-2 md:grid-cols-3 gap-4';
                const programs = softwareData.filter(item => item.category === category.name);
                programs.forEach(item => {
                    const essentialClass = item.disabled ? 'essential-software' : '';
                    const disabledClass = item.disabled ? 'cursor-not-allowed opacity-60' : 'cursor-pointer';
                    const labelColorClass = item.disabled ? 'green-333' : 'text-white';

                    // Main container for the software item
                    const softwareItemHTML = document.createElement('div');
                    softwareItemHTML.className = `relative bg-gray-800 p-3 rounded-lg flex items-center ${disabledClass} ${essentialClass}`;

                    // Custom Checkbox Element
                    const customCheckbox = document.createElement('div');
                    customCheckbox.className = 'custom-software-checkbox';
                    customCheckbox.dataset.slug = item.slug; // Store the slug for submission
                    if (item.checked) {
                        customCheckbox.classList.add('checked');
                    }

                    // Text Span
                    const span = document.createElement('span');
                    span.className = `ml-3 text-sm font-medium ${labelColorClass}`;
                    span.textContent = item.name;

                    softwareItemHTML.appendChild(customCheckbox);
                    softwareItemHTML.appendChild(span);

                    // --- HOVER Y TOUCH EN TODO EL DIV ---
                    function showProgramDesc() {
                        descDiv.textContent = `${item.name}: ${item.descripcion}`;
                    }
                    function showCategoryDesc() {
                        descDiv.textContent = category.description;
                    }
                    softwareItemHTML.addEventListener('mouseenter', showProgramDesc);
                    softwareItemHTML.addEventListener('mouseleave', showCategoryDesc);

                    // Add a single, reliable click listener to the parent div
                    softwareItemHTML.addEventListener('click', () => {
                        if (!item.disabled) {
                            customCheckbox.classList.toggle('checked');
                        }
                    });

                    itemsWrapper.appendChild(softwareItemHTML);
                });
                categoryWrapper.appendChild(itemsWrapper);
                softwareListContainer.appendChild(categoryWrapper);
            });

            // --- SELECTED GAMES DISPLAY ---
            const selectedGamesSection = document.getElementById('selected-games-section');
            const selectedGamesList = document.getElementById('selected-games-list');

            /**
             * Updates the list of selected games displayed on the page.
             */
            function updateSelectedGamesList() {
                const selectedCheckboxes = document.querySelectorAll('input[name="game"]:checked');
                selectedGamesList.innerHTML = '';
                if (selectedCheckboxes.length > 0) {
                    selectedGamesSection.classList.remove('hidden');
                    selectedCheckboxes.forEach(checkbox => {
                        const gameName = checkbox.value;
                        const gameImageSrc = checkbox.dataset.imgSrc;
                        const gameSlug = toSlug(gameName);
                        const gameEl = document.createElement('div');
                        gameEl.className = 'w-1/4 md:w-1/5 p-1';
                        gameEl.innerHTML = `<a href="#card-game-${gameSlug}"><img src="${gameImageSrc}" alt="Carátula de ${gameName}" class="rounded-md shadow-lg w-full h-full object-cover" onerror="this.onerror=null;this.src='https://placehold.co/300x400/111827/4f46e5?text=${gameName.replace(/\s/g, '+')}';"></a>`;
                        selectedGamesList.appendChild(gameEl);
                    });
                } else {
                    selectedGamesSection.classList.add('hidden');
                }
            }


            // --- ERROR TOAST ---
            const errorToast = document.getElementById('error-toast');
            const errorToastMessage = document.getElementById('error-toast-message');
            const resetSelectionBtn = document.getElementById('reset-selection-btn');
            let errorToastTimeout;
            let consecutiveErrorClicks = 0;

            /**
             * Hides the error toast message.
             */
            function hideErrorToast() {
                clearTimeout(errorToastTimeout);
                errorToast.classList.remove('show');
                resetSelectionBtn.classList.add('hidden');
            }

            /**
             * Displays an error toast message.
             * @param {string} message - The message to display.
             */
            function showErrorToast(message) {
                hideErrorToast();
                setTimeout(() => {
                    errorToastMessage.textContent = message;
                    if (consecutiveErrorClicks >= 2) {
                        resetSelectionBtn.classList.remove('hidden');
                    }

                    errorToast.classList.add('show');
                    errorToastTimeout = setTimeout(hideErrorToast, 4000);
                }, 150);
            }

            /**
             * Resets the game selection to none.
             */
            function resetGameSelection() {
                document.querySelectorAll('input[name="game"]:checked').forEach(cb => {
                    cb.checked = false;
                    const label = cb.nextElementSibling;
                    const sticker = label.querySelector('.game-title-sticker');
                    sticker.classList.add('hidden');
                });
                updateSelectedGamesList();
                hideErrorToast();
                consecutiveErrorClicks = 0;
            }
            resetSelectionBtn.addEventListener('click', resetGameSelection);


            // --- GAME GRID AND "LOAD MORE" LOGIC ---
            const gameGridWrapper = document.getElementById('game-grid-wrapper');
            const loadMoreGamesBtn = document.getElementById('load-more-games');
            const noMoreGamesMsg = document.getElementById('no-more-games');
            const loadMoreOverlay = document.getElementById('load-more-overlay');
            const ROWS_TO_SHOW_INITIALLY = 6;
            let isGridExpanded = false;
            const allGameCards = Array.from(gameListContainer.children);

            /**
             * Sets the initial height of the game grid to show a limited number of rows.
             */
            function setInitialGridHeight() {

                if (isGridExpanded || !allGameCards.length) return;

                const gridGap = parseInt(window.getComputedStyle(gameListContainer).getPropertyValue('grid-row-gap')) || 24;
                const cardHeight = allGameCards[0].offsetHeight;

                if (cardHeight === 0) {
                    setTimeout(setInitialGridHeight, 100); return;
                }

                const rowHeight = cardHeight + gridGap;
                const teaserHeight = rowHeight / 2;
                const targetHeight = (ROWS_TO_SHOW_INITIALLY * rowHeight) - gridGap + teaserHeight;

                gameGridWrapper.style.maxHeight = `${targetHeight}px`;

                const totalRows = Math.ceil(allGameCards.length / getColumnCount());
                if (ROWS_TO_SHOW_INITIALLY >= totalRows) {
                    loadMoreGamesBtn.click();
                }
            }

            /**
             * Determines the number of columns in the game grid based on screen width.
             * @returns {number} The number of columns.
             */
            function getColumnCount() {
                const screenWidth = window.innerWidth;
                if (screenWidth >= 1024) return 5;
                if (screenWidth >= 768) return 4;
                if (screenWidth >= 640) return 3;
                return 2;
            }

            loadMoreGamesBtn.addEventListener('click', () => {
                gameGridWrapper.style.maxHeight = `${gameListContainer.scrollHeight}px`;
                loadMoreGamesBtn.classList.add('hidden');
                noMoreGamesMsg.classList.remove('hidden');
                loadMoreOverlay.style.opacity = '0';
                isGridExpanded = true;
                loadMoreOverlay.style.pointerEvents = 'none';
            });

            // --- HERO PRODUCT IMAGES POSITIONING ---
            /**
             * Positions the main product images (Crox A and Crox B) dynamically.
             */
            function positionCroxImages() {
                const croxA = document.getElementById('home-crox-a');
                const croxB = document.getElementById('home-crox-b');
                const hookSection = document.querySelector('.hook-section');
                const wrapper = document.getElementById('hero-wrapper');

                if (croxA && croxB && hookSection && wrapper) {
                    if (window.innerWidth > 639) {
                        const wrapperRect = wrapper.getBoundingClientRect();
                        const hookSectionRect = hookSection.getBoundingClientRect();

                        const topPosition = hookSectionRect.top - wrapperRect.top - (croxA.offsetHeight / 2);

                        croxA.style.top = `${topPosition}px`;
                        croxB.style.top = `${topPosition}px`;

                        const marginRem = -10;
                        const marginPx = marginRem * parseFloat(getComputedStyle(document.documentElement).fontSize);

                        const croxALeft = hookSectionRect.left - wrapperRect.left - croxA.offsetWidth - marginPx;
                        croxA.style.left = `${croxALeft + 33}px`;

                        const croxBRight = wrapperRect.right - hookSectionRect.right - croxB.offsetWidth - marginPx;
                        croxB.style.right = `${croxBRight + 56}px`;
                        croxB.style.left = 'auto';
                    }
                }
            }

            window.addEventListener('resize', () => {
                setInitialGridHeight();
                positionCroxImages();
            });


            // --- EVENT LISTENERS ---
            document.querySelectorAll('input[name="game"]').forEach(checkbox => {
                checkbox.addEventListener('change', (e) => {
                    if (e.target.checked && document.querySelectorAll('input[name="game"]:checked').length > 3) {
                        e.target.checked = false;
                        consecutiveErrorClicks++;
                        showErrorToast('MAX 3 Juegos Incluidos');
                        return;
                    }

                    consecutiveErrorClicks = 0;
                    hideErrorToast();

                    const label = e.target.nextElementSibling;
                    const sticker = label.querySelector('.game-title-sticker');
                    if (e.target.checked) {
                        const randomTop = Math.floor(Math.random() * 50) + 15;
                        const randomLeft = Math.floor(Math.random() * 40) + 10;
                        const randomRotate = Math.floor(Math.random() * 20) - 10;
                        sticker.style.top = `${randomTop}%`;
                        sticker.style.left = `${randomLeft}%`;

                        sticker.style.transform = `rotate(${randomRotate}deg)`;
                        sticker.classList.remove('hidden');
                    } else {
                        sticker.classList.add('hidden');
                    }
                    updateSelectedGamesList();
                });
            });

            const joystickCard = document.getElementById('joystick-card');
            const joystickImg = joystickCard.querySelector('img');
            const joystickBadge = document.getElementById('joystick-badge');
            joystickCard.addEventListener('click', () => {
                joystickCount = (joystickCount + 1) % 3; // Cycle 0, 1, 2
                joystickCard.classList.toggle('active', joystickCount > 0);
                joystickBadge.classList.toggle('hidden', joystickCount !== 2);

                if (joystickCount === 2) {
                    joystickImg.src = 'comps/xboxc2.jpg';
                } else {
                    joystickImg.src = 'comps/xboxc1.jpg';
                }

                updatePrices(allDolarRates.find(rate => rate.casa === 'oficial')?.venta);
            });

            const mouseKeyboardCard = document.getElementById('mouse-keyboard-card');
            mouseKeyboardCard.addEventListener('click', () => {
                hasMouseKeyboard = !hasMouseKeyboard;
                mouseKeyboardCard.classList.toggle('active', hasMouseKeyboard);
                updatePrices(allDolarRates.find(rate => rate.casa === 'oficial')?.venta);
            });

            document.getElementById('orderForm').addEventListener('submit', function (e) {
                e.preventDefault();
                const phoneNumber = '5492252513233';

                const selectedGames = Array.from(document.querySelectorAll('input[name="game"]:checked')).map(cb => cb.value);
                const selectedSoftware = Array.from(document.querySelectorAll('.custom-software-checkbox.checked')).map(cb => {
                    const slug = cb.dataset.slug;
                    const software = softwareData.find(s => s.slug === slug);
                    return software ? software.name : '';
                }).filter(name => name);

                const extraNotes = document.getElementById('extra-notes').value;

                let message = `¡Hola, me interesa esta Nave del Medio!\n\n`;
                if (selectedGames.length > 0) message += `*Juegos:* ${selectedGames.join(', ')}\n`;

                let peripheralsMessage = '';
                if (joystickCount > 0) peripheralsMessage += `${joystickCount} Joystick(s)`;
                if (hasMouseKeyboard) {
                    if (peripheralsMessage) peripheralsMessage += ' y ';
                    peripheralsMessage += 'Mouse y Teclado Inalámbrico';
                }
                if (peripheralsMessage) message += `*Periféricos:* ${peripheralsMessage}\n`;

                // Add selected tower to WhatsApp message
                if (towersOptions.length > 0) {
                    message += `*Torre Seleccionada:* ${towersOptions[currentTowerIndex].name}\n`;
                }

                // Add selected SSD to WhatsApp message
                const ssdSelect = document.getElementById('ssd-select');
                if (ssdSelect) {
                    const selectedOption = ssdSelect.options[ssdSelect.selectedIndex];
                    message += `*Almacenamiento:* ${selectedOption.textContent}\n`;
                }

                // Add selected GPU to WhatsApp message
                const gpuSelect = document.getElementById('gpu-select');
                if (gpuSelect) {
                    const selectedOption = gpuSelect.options[gpuSelect.selectedIndex];
                    message += `*Tarjeta Gráfica:* ${selectedOption.textContent}\n`;
                }

                // Add selected PSU to WhatsApp message
                const psuSelect = document.getElementById('psu-select');
                if (psuSelect) {
                    const selectedOption = psuSelect.options[psuSelect.selectedIndex];
                    message += `*Fuente de Poder:* ${selectedOption.textContent}\n`;
                }


                // --- Programas seleccionados, agrupados por categoría ---
                if (selectedSoftware.length > 0) {
                    const catOrder = ['Sistema', 'Multimedia', 'Web', 'Creación', 'Desarrollo'];
                    let programasPorCat = {};
                    catOrder.forEach(cat => programasPorCat[cat] = []);

                    selectedSoftware.forEach(name => {
                        const prog = softwareData.find(p => p.name === name);
                        if (prog && programasPorCat[prog.category]) {
                            programasPorCat[prog.category].push(prog.name);
                        }
                    });

                    message += `*Programas:*\n`;
                    catOrder.forEach(cat => {
                        if (programasPorCat[cat].length > 0) {
                            message += `- ${cat}: ${programasPorCat[cat].join(', ')}\n`;
                        }
                    });
                }

                if (extraNotes.trim() !== '') message += `*Notas:* ${extraNotes}\n`;

                message += `\nPrecio Total: ${topTotalPriceEl.textContent}`; // Use the top price for consistency
                message += `\n¡Quedo a la espera de tu respuesta!`;
                window.open(`https://wa.me/${phoneNumber}?text=${encodeURIComponent(message)}`, '_blank');
            });

            // --- DOLAR POPUP LOGIC ---
            const dolarPopup = document.getElementById('dolar-popup');
            const dolarRatesList = document.getElementById('dolar-rates-list');
            const googleLink = document.getElementById('google-link');

            // Asegura que el popup esté oculto al inicio con display: none;
            dolarPopup.style.display = 'none';

            /**
             * Displays the dollar exchange rates popup.
             */
            function showDolarPopup() {
                if (allDolarRates.length === 0) return;
                dolarRatesList.innerHTML = '';
                // Solo mostrar Oficial, Blue y Cripto
                const tiposPermitidos = [
                    { key: 'oficial', label: 'Oficial' },
                    { key: 'blue', label: 'Blue' },
                    { key: 'cripto', label: 'Cripto' }
                ];
                const mapApiKey = (nombre) => {
                    const n = nombre.toLowerCase();
                    if (n.includes('oficial')) return 'oficial';
                    if (n.includes('blue')) return 'blue';
                    if (n.includes('cripto')) return 'cripto';
                    return '';
                };
                let total = BASE_PRICE;
                if (joystickCount > 0) total += joystickCount * JOYSTICK_PRICE;
                if (hasMouseKeyboard) total += MOUSE_KEYBOARD_PRICE;
                if (towersOptions.length > 0) {
                    total += towersOptions[currentTowerIndex].price;
                }
                const ssdSelect = document.getElementById('ssd-select');
                if (ssdSelect) {
                    total += parseInt(ssdSelect.value);
                }
                const gpuSelect = document.getElementById('gpu-select');
                if (gpuSelect) {
                    total += parseInt(gpuSelect.value);
                }
                const psuSelect = document.getElementById('psu-select');
                if (psuSelect) {
                    total += parseInt(psuSelect.value);
                }


                tiposPermitidos.forEach(tipo => {
                    const rate = allDolarRates.find(r => mapApiKey(r.nombre) === tipo.key);
                    if (!rate) return;
                    const precioEnDolar = rate.venta ? (total / rate.venta) : null;
                    const name = tipo.label;
                    const rateEl = document.createElement('div');
                    rateEl.className = 'flex flex-col gap-1 mb-3 border-b border-gray-700/50 pb-2 dolar-rate-item'; // Added class for styling
                    rateEl.innerHTML = `
                            <span class="font-bold text-gray-300 dolar-name">${name}</span>
                            <div class="text-right">
                                <span class="text-gray-400">Compra: </span><span class="font-mono text-green-400">$${rate.compra}</span><br>
                                <span class="text-gray-400">Venta: </span><span class="font-mono text-green-400">$${rate.venta}</span>
                            </div>
                            <div class="font-saira text-violet-400 font-bold text-lg text-center mt-1">serían $${precioEnDolar ? precioEnDolar.toFixed(0) : '-'} USD</div>
                        `;
                    dolarRatesList.appendChild(rateEl);
                });
                googleLink.href = `https://www.google.com/search?q=${total}+ars+to+usd`;
                dolarPopup.style.display = 'flex'; // Cambiar a flex para mostrar
            }

            dolarPopup.addEventListener('click', (e) => {
                // Check if the click occurred on the overlay itself, not its children
                if (e.target === dolarPopup) { // Fixed: Ensure e.target is the popup overlay itself
                    dolarPopup.style.display = 'none'; // Ocultar al hacer clic fuera
                }
            });

            document.getElementById('usd-link-top').addEventListener('click', (e) => { e.preventDefault(); showDolarPopup(); });
            document.getElementById('usd-price-display-top').addEventListener('click', showDolarPopup);
            document.getElementById('usd-link-bottom').addEventListener('click', (e) => { e.preventDefault(); showDolarPopup(); });
            document.getElementById('total-price-usd').addEventListener('click', showDolarPopup);
            // New listeners for summary USD price
            document.getElementById('usd-link-summary').addEventListener('click', (e) => { e.preventDefault(); showDolarPopup(); });
            document.getElementById('total-price-summary-usd').addEventListener('click', showDolarPopup);
            // New listeners for mobile summary USD price
            document.getElementById('usd-link-summary-mobile').addEventListener('click', (e) => { e.preventDefault(); showDolarPopup(); });
            document.getElementById('total-price-summary-usd-mobile').addEventListener('click', showDolarPopup);


            // --- TOWER SELECTION LOGIC ---
            const towerImageEl = document.getElementById('current-tower-image');
            const currentTowerNameEl = document.getElementById('current-tower-name');
            const prevTowerBtn = document.getElementById('prev-tower');
            const nextTowerBtn = document.getElementById('next-tower');

            // --- Component Selector Logic ---
            const ssdSelect = document.getElementById('ssd-select');
            const ssdDescriptionEl = document.getElementById('ssd-description');
            const ssdImageEl = document.getElementById('ssd-image');

            const gpuSelect = document.getElementById('gpu-select');
            const gpuDescriptionEl = document.getElementById('gpu-description');
            const gpuImageEl = document.getElementById('gpu-image');

            const psuSelect = document.getElementById('psu-select');
            const psuDescriptionEl = document.getElementById('psu-description');
            const psuImageEl = document.getElementById('psu-image');

            /**
             * MODIFIED: Handles image loading gracefully with a grayscale effect.
             * @param {HTMLElement} imageElement - The <img> element to update.
             * @param {string} newSrc - The URL of the new image to load.
             */
            function loadImageWithGrayscale(imageElement, newSrc) {
                // Apply loading styles (grayscale) to the image
                imageElement.classList.add('loading');

                // Create a temporary image object to load the new source in the background
                const tempImage = new Image();
                tempImage.src = newSrc;

                // Event handler for when the new image is successfully loaded
                tempImage.onload = () => {
                    // Update the actual image element's source on the page
                    imageElement.src = newSrc;
                    // Remove the loading style, which will trigger the CSS transition back to full color
                    imageElement.classList.remove('loading');
                };

                // Event handler for loading errors
                tempImage.onerror = () => {
                    console.error(`Failed to load image: ${newSrc}`);
                    // If the image fails to load, remove the loading style to un-grayscale the old image
                    imageElement.classList.remove('loading');
                };
            }

            /**
             * MODIFIED: Updates the tower display using the new image loading logic.
             */
            function updateTowerDisplay() {
                if (towersOptions.length === 0) return;
                const selectedTower = towersOptions[currentTowerIndex];
                loadImageWithGrayscale(towerImageEl, selectedTower.image_url);
                currentTowerNameEl.textContent = selectedTower.name;
                updatePrices(allDolarRates.find(rate => rate.nombre && rate.nombre.toLowerCase().includes('oficial'))?.venta);
            }
            
            function prevTower() {
                currentTowerIndex = (currentTowerIndex - 1 + towersOptions.length) % towersOptions.length;
                updateTowerDisplay();
            }

            function nextTower() {
                currentTowerIndex = (currentTowerIndex + 1) % towersOptions.length;
                updateTowerDisplay();
            }

            prevTowerBtn.addEventListener('click', prevTower);
            nextTowerBtn.addEventListener('click', nextTower);

            /**
             * MODIFIED: Updates a component's display (description and image) using the new loading logic.
             * @param {HTMLElement} selectEl - The <select> element for the component.
             * @param {HTMLElement} descEl - The <p> element for the description.
             * @param {HTMLElement} imageEl - The <img> element for the component.
             * @param {Array} options - The array of options for this component.
             */
            function updateComponentDisplay(selectEl, descEl, imageEl, options) {
                const selectedOption = options.find(opt => opt.price == selectEl.value);
                
                if (selectedOption) {
                    descEl.textContent = selectedOption.description;
                    loadImageWithGrayscale(imageEl, selectedOption.image_url);
                } else {
                    descEl.textContent = '';
                    imageEl.src = '';
                }
                updatePrices(allDolarRates.find(rate => rate.nombre && rate.nombre.toLowerCase().includes('oficial'))?.venta);
            }

            if (ssdSelect) {
                ssdSelect.addEventListener('change', () => updateComponentDisplay(ssdSelect, ssdDescriptionEl, ssdImageEl, ssdOptions));
            }
            if (gpuSelect) {
                gpuSelect.addEventListener('change', () => updateComponentDisplay(gpuSelect, gpuDescriptionEl, gpuImageEl, gpuOptions));
            }
            if (psuSelect) {
                psuSelect.addEventListener('change', () => updateComponentDisplay(psuSelect, psuDescriptionEl, psuImageEl, psuOptions));
            }

            // --- Fullscreen Overlay Logic ---
            const fullscreenOverlay = document.getElementById('fullscreen-overlay');
            const zoomedImage = document.getElementById('zoomed-image');

            function openFullscreenZoom(imageSrc) {
                zoomedImage.src = imageSrc;
                fullscreenOverlay.classList.add('active');
            }

            function closeFullscreenZoom() {
                fullscreenOverlay.classList.remove('active');
                setTimeout(() => { zoomedImage.src = ''; }, 300);
            }

            fullscreenOverlay.addEventListener('click', closeFullscreenZoom);

            const componentImagesForZoom = [towerImageEl, gpuImageEl, ssdImageEl, psuImageEl];
            componentImagesForZoom.forEach(imgEl => {
                imgEl.addEventListener('click', (e) => {
                    e.preventDefault();
                    openFullscreenZoom(imgEl.src);
                });
            });

            // --- Intersection Observer for Price Summary Cards ---
            const mobilePriceSummaryCard = document.getElementById('mobile-price-summary-card');
            const priceSummaryCard = document.getElementById('price-summary-card');
            const priceVisibilityZone = document.getElementById('price-card-visibility-zone');

            const observerOptions = {
                root: null,
                rootMargin: '0px',
                threshold: 0
            };

            const priceCardObserver = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        mobilePriceSummaryCard.classList.add('show-mobile-price');
                        priceSummaryCard.classList.add('visible');
                    } else {
                        mobilePriceSummaryCard.classList.remove('show-mobile-price');
                        priceSummaryCard.classList.remove('visible');
                    }
                });
            }, observerOptions);

            if (priceVisibilityZone) {
                priceCardObserver.observe(priceVisibilityZone);
            }


            // --- Initial calls ---
            fetchDolarRate();
            updateSelectedGamesList();
            setInitialGridHeight();
            positionCroxImages();

            // Set initial SSD, GPU, PSU values and update prices
            if (ssdSelect && ssdOptions.length > 0) {
                ssdSelect.value = ssdOptions[0].price;
                updateComponentDisplay(ssdSelect, ssdDescriptionEl, ssdImageEl, ssdOptions);
            }
            if (gpuSelect && gpuOptions.length > 0) {
                gpuSelect.value = gpuOptions[0].price;
                updateComponentDisplay(gpuSelect, gpuDescriptionEl, gpuImageEl, gpuOptions);
            }
            if (psuSelect && psuOptions.length > 0) {
                psuSelect.value = psuOptions[0].price;
                updateComponentDisplay(psuSelect, psuDescriptionEl, psuImageEl, psuOptions);
            }
            
            updateTowerDisplay();

            // --- Event Listeners ---
            window.addEventListener('resize', () => {
                setInitialGridHeight();
                positionCroxImages();
            });
        });
    </script>
</body>

</html>
