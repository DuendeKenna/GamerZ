<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>La Nave del Medio - PC Gamer Gama Media</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>‚ú®</text></svg>">
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700;900&family=Press+Start+2P&family=Saira:wght@700&family=VT323&family=Roboto:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <script src="https://code.iconify.design/1/1.0.7/iconify.min.js"></script>
    <style>
        body {
            font-family: 'Inter', sans-serif;
            overflow-x: hidden; /* Prevent horizontal scroll */
            background-image: url('covers_wall.webp');
            background-size: cover;
            background-position: center;
            background-attachment: fixed;
        }
        h1, h2 {
            font-family: 'Saira', sans-serif;
        }
        /* --- Custom Brand Colors --- */
        .green-222 { color: #95ef81; }
        .green-333 { color: #42d232; }
        .green-777 { color: #107c10; }
        .blueish { color: #0098e9; }

        /* --- Green Checkbox Styles --- */
        .custom-checkbox {
            appearance: none;
            -webkit-appearance: none;
            background-color: #23272f;
            border: 2.5px solid #42d232;
            border-radius: 0.5em;
            width: 1.4em;
            height: 1.4em;
            cursor: pointer;
            position: relative;
            outline: none;
            transition: border-color 0.2s, box-shadow 0.2s;
            vertical-align: middle;
            margin-right: 0.5em;
        }
        .custom-checkbox:checked {
            background-color: #42d232;
            border-color: #42d232;
        }
        .custom-checkbox:checked::after {
            content: '\2714';
            color: #fff;
            font-size: 1.1em;
            position: absolute;
            left: 0.18em;
            top: 0.05em;
        }
        .custom-checkbox:focus {
            box-shadow: 0 0 0 2px #95ef81;
        }
        /* For accessibility: show focus ring */
        .custom-checkbox:focus-visible {
            outline: 2px solid #42d232;
        }
        /* Hide default tick for input[type=checkbox] */
        input[type="checkbox"].custom-checkbox {
            accent-color: #42d232;
        }
        /* Hide the default tick for all browsers */
        input[type="checkbox"].custom-checkbox::-ms-check {
            color: transparent;
        }

        /* --- Font Families --- */
        .font-gamer { font-family: 'Press Start 2P', cursive; }
        .font-vt323 { font-family: 'VT323', monospace; }
        .font-saira { font-family: 'Saira', sans-serif; }
        .font-roboto { font-family: 'Roboto', sans-serif; }
        
        /* --- Brand Specific Styles --- */
        .brand-title {
            position: relative;
            font-weight: 900;
            background: linear-gradient(to right, #6366f1, #a855f7);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            z-index: 1;
        }
        .special-subtitle {
            font-family:'Saira';
            letter-spacing: 0.03em;
            background: linear-gradient(to top, #bd570e, #e9bb06);
            border-radius: 25px;
            color: rgb(41, 1, 1)!important;
            box-shadow: rgba(0, 0, 0, 0.849) 0px 0px 50px;
        }
         .special-subtitle:hover {
            background: linear-gradient(to right, #fb923c, #b9a333);
        }

        /* --- Card Effects (Games & Peripherals) --- */
        .card-game {
            position: relative;
        }
        .card-game label {
            position: relative; /* Container for the sticker & gloss */
            overflow: hidden; 
            display: block;
            border-radius: 0.75rem; /* rounded-xl */
            transition: transform 0.3s ease; /* Apply transition to the container */
            aspect-ratio: 3/4;
        }
        .card-game label::after { /* Glossy effect */
            content: '';
            position: absolute;
            top: -50%; left: -60%;
            width: 200%; height: 200%;
            background: linear-gradient(to bottom, rgba(255, 255, 255, 0.25) 0%, rgba(255, 255, 255, 0.1) 40%, transparent 50%);
            transform: rotate(35deg);
            pointer-events: none;
        }
        .card-game label img {
            transition: filter 0.3s ease;
            filter: grayscale(33%); 
        }
        .card-game label:hover,
        .card-game input:checked + label {
            transform: scale(1.07);
            z-index: 10;
        }
        .card-game label:hover img,
        .card-game input:checked + label img {
            filter: grayscale(0%) brightness(1.1);
        }
        .card-game input:checked + label {
            box-shadow: 0 0 0 3px rgba(139, 92, 246, 0.5);
        }

        .card-peripheral {
            transition: opacity 0.3s ease-in-out, transform 0.3s ease-in-out;
            opacity: 0.5;
        }
        .card-peripheral:hover,
        .card-peripheral.active {
            opacity: 1;
            transform: scale(1.05);
        }
        .card-peripheral.active {
            box-shadow: 0 0 0 3px rgba(139, 92, 246, 0.5);
        }

        /* --- Game Title Sticker --- */
        .game-title-sticker {
            position: absolute;
            background: linear-gradient(to right, #ef4444, #f97316);
            padding: 0.2rem 0.6rem;
            border-radius: 4px;
            font-weight: 700;
            font-size: 0.75rem; /* text-xs */
            color: white;
            box-shadow: 0 2px 5px rgba(0,0,0,0.5);
            text-align: center;
            max-width: 80%;
            transition: opacity 0.2s ease-in-out;
            z-index: 10;
        }

        /* --- Error Toast Animation --- */
        #error-toast {
            position: fixed;
            bottom: -150px;
            left: 50%;
            transform: translateX(-50%);
            transition: bottom 0.4s ease-out, opacity 0.4s ease-out;
            opacity: 0;
            z-index: 50;
            width: calc(100% - 2rem);
            max-width: 400px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.4);
        }
        #error-toast.show {
            bottom: 20px;
            opacity: 1;
        }
        
        /* --- Price Badge --- */
        .launch-badge {
            position: absolute;
            top: -24px; left: 50%;
            transform: translateX(-50%) rotate(6deg);
            background: linear-gradient(to right, #b12020a4, #cf5f0e);
            padding: 0.2rem 0.5rem;
            border-radius: 6px;
            font-weight: 700;
            letter-spacing: 0.05em;
            font-size: 0.9rem;
            box-shadow: 0 4px 10px rgba(0,0,0,0.4);
            white-space: nowrap;
        }
        @media (min-width: 768px) {
            .launch-badge {
                left: auto;
                right: -42px;
                transform: rotate(6deg);
            }
        }
        
        /* --- Animated Games Card Background --- */
        .animated-bg-games {
            min-height: 480px; /* Increased height for better effect visibility */
            box-shadow: inset 0 0 12px 4px rgba(0, 0, 0, 0.55);
        }

        .animated-bg-games::before {
            content: '';
            position: absolute;            
            top: -10%; left: -10%;
            width: 120%; height: 120%;
            background-image: url('wall_covers_sm.jpeg');
            background-size: 250%;
            animation: 
                ping-pong-path 45s ease-in-out infinite,
                blur-and-fade 10s ease-in-out infinite alternate;
            z-index: 0;
        }

        .animated-bg-games > * {
            position: relative;
            z-index: 1;
        }

        @keyframes ping-pong-path {
            0%   { background-position: 0% 0%; }
            25%  { background-position: 100% 0%; }
            50%  { background-position: 100% 100%; }
            75%  { background-position: 0% 100%; }
            100% { background-position: 0% 0%; }
        }

        @keyframes blur-and-fade {
            from {
                filter: blur(0px);
                opacity: 0.15;
            }
            to {
                filter: blur(2px); /* Dynamic blur effect */
                opacity: 0.3;
            }
        }


        /* --- Neon Highlight (Using brand color) --- */
        .neon-green-highlight {
            border: 2px solid #42d23291;
            box-shadow: 0 0 15px #42d23294, inset 0 0 10px rgba(66, 210, 50, 0.3);
            color: #f0fdf4;
        }

        /* --- CTA Button (WhatsApp Brand Aligned) --- */
        .cta-button {
            animation: glow-whatsapp 4s ease-in-out infinite;
            background: linear-gradient(to right, #25D366, #128C7E);
            border: 2px solid #075e54;
            transition: all 0.3s ease;
        }
        .cta-button:hover {
             background: linear-gradient(to right, #29e66d, #15a589);
             transform: scale(1.05);
        }
        @keyframes glow-whatsapp {
            0%, 100% {
                box-shadow: 0 0 4px #25D366, 0 0 8px #128C7E, 0 0 12px #075e54;
            }
            50% {
                box-shadow: 0 0 8px #25D366, 0 0 15px #128C7E, 0 0 25px #075e54;
            }
        }
        
        /* --- "Ver m√°s" Neon Button --- */
        .load-more-button {
            color: #42d232;
            opacity: 0.6;
            border: 6px solid #107c1054;
            border-radius: 15px; padding: 20px 35px;
            letter-spacing: 5px; cursor: pointer; font-weight: bold;
            filter: drop-shadow(0 0 15px #42d232) drop-shadow(0 0 50px #42d232) contrast(2) brightness(2);
            transition: .5s;
        }
        .load-more-button:hover {
            color: black;
            background-color: #42d232;
            filter: drop-shadow(0 0 20px #42d232) contrast(2) brightness(2);
        }

        /* --- Essential Software Highlight --- */
        .essential-software {
            background-color: rgba(66, 210, 50, 0.1);
            border-left: 3px solid #42d232;
        }
        
        /* --- Animation & Misc --- */
        .animate-float {
            animation: float 6s ease-in-out infinite;
        }
        @keyframes float {
            0%, 100% { transform: translateY(0) translateX(0); }
            25% { transform: translateY(-5px) translateX(2px); }
            50% { transform: translateY(0) translateX(-2px); }
            75% { transform: translateY(5px) translateX(0); }
        }

        .lucas-price {
            font-size: 4rem; line-height: 1; font-weight: bold;
            color: #22d3ee;
            animation: price-glow 3s ease-in-out infinite;
            text-shadow: solid 3px 3px black;
        }
        @keyframes price-glow {
            0%, 100% { text-shadow: 2px 2px 55px rgba(0,0,0,0.5), 0 0 20px rgba(118, 18, 143, 0.801), 0 0 55px rgba(34, 211, 238, 0.2), 0 0 25px rgba(34, 211, 238, 0.2); }
            50% { text-shadow: 2px 2px 55px rgba(0,0,0,0.5), 0 0 12px rgba(34, 211, 238, 0.35), 0 0 25px rgba(34, 211, 238, 0.25); }
        }

        .offer-banner-main, .offer-banner-contado {
            position: absolute; left: 50%; color: #ffffff; padding: 0.2rem 1rem;
            border-radius: 0.375rem; text-shadow: 1px 1px 2px rgb(0 0 0 / 50%);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.4); white-space: nowrap;
        }
        .offer-banner-main {
            background: linear-gradient(to right, #f97316, #fb923c); font-size: 1.3rem;
            animation: banner-swing-main 2.5s ease-in-out infinite alternate;
            transform: translateX(-50%) rotate(-7deg); bottom: 0;
        }
        .offer-banner-contado {
            background: #c2410c; font-size: 1.1rem; z-index: 10;
            animation: banner-swing-contado 2.5s ease-in-out infinite alternate;
            transform: translateX(-60%) rotate(-12deg); bottom: 2.2rem;
        }
        @keyframes banner-swing-main {
            from { transform: translateX(-50%) rotate(-5deg); } to { transform: translateX(-50%) rotate(5deg); }
        }
        @keyframes banner-swing-contado {
            from { transform: translateX(-60%) rotate(-10deg); } to { transform: translateX(-60%) rotate(0deg); }
        }
        
        /* Hook section highlight */
        .hook-section strong {
            color: #42d232; 
            text-shadow: 1px 1px 0 black;
        }
        .hook-section p { text-shadow: 2px 2px 3px black; }
        .hook-section .font-normal { font-family: 'Inter', sans-serif; }

        /* --- Feature Cards --- */
        .feature-card {
            background-color: rgba(31, 41, 55, 0.4);
            border: 1px solid rgba(75, 85, 99, 0.5);
            border-radius: 0.75rem;
            padding: 1.25rem 1rem;
            min-height: 160px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            backdrop-filter: blur(4px);
            -webkit-backdrop-filter: blur(4px);
            transition: all 0.3s ease-in-out;
            position: relative;
            overflow: hidden; /* Changed to hidden for ribbon */
        }
        .feature-card:hover {
            transform: translateY(-5px) scale(1.03);
            background-color: rgba(55, 65, 81, 0.7);
            border-color: rgba(34, 211, 238, 0.5);
            box-shadow: 0 0 20px rgba(34, 211, 238, 0.15);
        }

        .animated-bg-games:hover {
             box-shadow: 0 0 20px rgba(34, 211, 238, 0.15), inset 0 0 12px 4px rgba(0, 0, 0, 0.55);
        }

        /* --- Corner Ribbon Badge --- */
        .corner-ribbon-wrapper {
            width: 150px;
            height: 150px;
            overflow: hidden;
            position: absolute;
            top: -10px;
            right: -10px;
            z-index: 1;
        }
        .corner-ribbon {
            position: absolute;
            top: 35px;
            right: -35px;
            transform: rotate(45deg);
            width: 200px;
            background: linear-gradient(to right, #f97316, #facc15);
            font-family: 'Press Start 2P', cursive;
            font-size: 0.6rem;
            padding: 5px 0;
            text-align: center;
            box-shadow: 0 5px 10px rgba(0,0,0,0.3);
            line-height: 1.2;
        }
        .corner-ribbon-text {
            color: #422006;
            text-shadow: 1px 1px 0px rgba(255,255,255,0.2);
        }
        .despegue-text {
            text-shadow: 1px 1px 1px rgba(84, 0, 117, 0.2);
            letter-spacing: 1pt;
        }


        #slideshow-container { background-color: #353f4d; }
        #slideshow-container img {
            position: absolute; top: 0; left: 0;
            width: 100%; height: 100%; object-fit: contain;
            transition: opacity 0.8s ease-in-out;
        }
        
        #hero-wrapper { position: relative; padding-bottom: 2rem; }
        #hero-background-in {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            pointer-events:none; background-image: url('hero-background.webp');
            background-size: cover; background-position: center;
            filter: invert(100%) sepia(1) saturate(1000%) hue-rotate(52deg);
            z-index: 0; animation: spin 33s linear infinite;
        }
        #hero-background { 
            position: absolute; overflow: hidden; top: 0; left: 0;
            width: 100%; height: 100%; pointer-events:none;
            animation: spin 10s ease-in-out infinite, cosmic-pulse 20s ease-in-out infinite;
        }
        @keyframes spin { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }
        @keyframes cosmic-pulse {
            0% { transform: scale(0.8) rotate(0deg); filter: blur(20px); opacity: 0.06; }
            50% { transform: scale(1) rotate(1deg); filter: blur(12px); opacity: 0.1; }
            100% { transform: scale(0.8) rotate(0deg); filter: blur(20px); opacity: 0.06; }
        }
        /* @media (max-width: 767px) { #hero-background { display: none; } } */
        
        @keyframes float-up-down {
            0%, 100% { transform: translateY(0); } 50% { transform: translateY(-10px); }
        }
        #ovniUp {
            position: absolute; left: 56%; top:-15px; opacity: 0.63;
            filter: hue-rotate(50deg); animation: float-up-down 4s ease-in-out infinite;
        }

        .main-container {
            background-color: #111827; /* Restored to bg-gray-700 */
            box-shadow: 0 0 40px rgba(0, 0, 0, 0.7);
            position: relative; /* Needed for absolute positioning of child */
        }
        #game-grid-container { position: relative; }
        #game-grid-wrapper {
            overflow: hidden;
            transition: max-height 1.8s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            padding: 0 1rem;
        }
        #load-more-overlay {
            position: absolute; bottom: 0; left: 0;
            width: 100%; height: 12rem;
            background: linear-gradient(to top, #111827 25%, transparent);
            pointer-events: none;
            transition: opacity 1.5s;
        }
        footer {
            position: relative;
        }
        #memde_pointLeft {
            position: absolute;
            bottom: -20px;
            max-width: 150px;
            width: 40%;
            z-index: 10;
            left: 576.422px;
        }
        @media (min-width: 768px) {
            #memde_pointLeft {
                bottom: -30px;
                width: auto; /* Let max-width control the size */
            }
        }

        /* --- Nueva Estilo para la Descripci√≥n de Categor√≠a --- */
        .software-cat-desc {
            background-color: #1a1332;
            border-radius: 1rem;
            padding: 0.5rem 1rem;
            margin-bottom: 1rem;
            transition: background 0.3s, color 0.3s;
        }
        .software-card {
            background-color: #23272f;
            border-radius: 0.75rem;
            padding: 1rem;
            text-align: center;
            transition: transform 0.3s, background 0.3s;
            position: relative;
            overflow: hidden;
        }
        .software-card.selected {
            background-color: #374151;
        }
        .software-card.unselected {
            opacity: 0.7;
        }
        .software-card:hover {
            transform: translateY(-3px);
            background-color: #374151;
        }
        .software-icon {
            width: 48px;
            height: 48px;
            margin-bottom: 0.5rem;
        }
        .software-name {
            font-weight: 500;
            color: #e5e7eb;
            margin-bottom: 0.25rem;
        }
        .software-tick {
            position: absolute;
            top: 1rem;
            right: 1rem;
            color: #22c55e;
            opacity: 0;
            transition: opacity 0.3s;
        }
        .software-card.selected .software-tick {
            opacity: 1;
        }

        /* --- Soporte T√©cnico (memde_think.png) Responsive --- */
        #section-front-features .feature-card.soporte-tecnico-card {
            overflow: visible !important;
        }
        #section-front-features img[src*="memde_think.png"] {
            opacity: 1;
            position: absolute;
            bottom: 0;
            right: 0;
            left: auto;
            top: auto;
            height: 80%;
            width: auto;
            pointer-events: none;
            z-index: 30;
            transition: opacity 0.3s, right 0.3s, height 0.3s;
        }
        @media (max-width: 1023px) {
            #section-front-features img[src*="memde_think.png"] {
                opacity: 0.2;
                height: 80%;
                right: 0;
            }
        }
        @media (min-width: 1024px) {
            #section-front-features img[src*="memde_think.png"] {
                height: 115%;
                right: -2.5rem;
                bottom: 0;
                left: auto;
                top: auto;
                z-index: 40;
                opacity: 1;
            }
        }
        @media (min-width: 1280px) {
            #section-front-features img[src*="memde_think.png"] {
                right: -4rem;
                height: 115%;
                bottom: 0;
                left: auto;
                top: auto;
            }
        }

        /* --- Hero Product Images --- */
        #home-crox-a, #home-crox-b {
            position: absolute;
            pointer-events: none;
            z-index: 5;
            width: auto;
            transition: all 0.3s ease-in-out;
        }

        /* Desktop and up */
        @media (min-width: 1024px) {
            #home-crox-a, #home-crox-b {
                height: 420px;
            }
        }

        /* Tablet */
        @media (max-width: 1023px) {
            #home-crox-a, #home-crox-b {
                height: 320px;
            }
        }
        
        /* Mobile */
        @media (max-width: 767px) {
             #home-crox-a, #home-crox-b {
                height: 250px;
             }
        }

        /* Small mobile - hide */
        @media (max-width: 639px) {
            #home-crox-a, #home-crox-b {
                display: none;
            }
        }
    </style>
</head>
<body class="bg-gray-900 text-white">

    <!-- Dolar Popup Modal -->
    <div id="dolar-popup" class="hidden fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4">
        <div id="popup-content" class="bg-gray-800/80 backdrop-blur-lg border border-gray-600/50 rounded-xl p-6 w-full max-w-sm text-white flex flex-col items-center justify-center">
            <h3 class="text-xl font-saira font-bold text-center mb-4 text-cyan-300">Cotizaciones D√≥lar</h3>
            <div id="dolar-rates-list" class="space-y-3">
                <!-- Rates will be injected here by JS -->
            </div>
            <!-- Solo una l√≠nea separadora debajo de la lista -->
            <hr class="border-gray-600 my-4">
            <a id="google-link" href="#" target="_blank" class="block text-center text-sm text-indigo-400 hover:underline">Ver en Google &rarr;</a>
        </div>
    </div>


    <div id="error-toast" class="bg-red-600 text-white text-base rounded-lg p-4 shadow-2xl flex flex-col items-center gap-2">
        <span id="error-toast-message"></span>
        <button id="reset-selection-btn" class="hidden bg-white text-red-600 font-bold py-1 px-3 rounded-md text-sm">Reiniciar Selecci√≥n</button>
    </div>

    <div class="container main-container mx-auto p-4 md:p-8 max-w-5xl">
        <div id="hero-wrapper" class="mb-12" style="top: -2px; left: 0px;">
            <div id="hero-background" style="left: -1px; top: 0px;pointer-events:none;"><div id="hero-background-in" style="pointer-events:none;left: 4px; top: -2px;"></div></div>
            <header class="text-center pt-8 mb-12 relative">
                <img id="ovniUp" src="ovni1fade.png" class="w-32 h-auto" alt="OVNI" onerror="this.onerror=null;this.src='https://placehold.co/128x128/00000000/ffffff?text=OVNI'">
                 <img src="LaNave_LogoLetras.png" alt="Logo de La Nave del Medio" class="w-96 h-auto mx-auto mb-4" onerror="this.onerror=null;this.src='https://placehold.co/192x64/00000000/ffffff?text=Logo'">
                <p class="font-vt323 text-4xl md:text-6xl green-333 mt-2 tracking-wider" style="text-shadow: 0 0 8px #42d232;">PC Gamer/Creator </p><p class="green-777 font-saira md:text-2xl">Sistema Completo de HW + SW + Service</p><p></p>
                
                <div class="flex items-center justify-center mt-8">
                    <div class="price-container relative">
                        <div class="launch-badge">a un precio de LOCOS!!</div>
                        <p class="text-5xl font-bold text-cyan-400 price-highlight font-saira">$555.000</p>
                         <div class="mt-1 flex items-baseline justify-center gap-2">
                             <span id="usd-price-display-top" class="hidden font-saira text-violet-500 text-2xl cursor-pointer"></span>
                             <a id="usd-link-top" href="#" class="text-gray-500 text-xs hover:underline hidden">Ver Cotizaciones</a>
                         </div>
                    </div>
                    <img src="smile-messi.gif" alt="Meme de Messi sonriendo" class="w-24 h-auto -ml-8 z-10 md:w-32 md:ml-4" onerror="this.onerror=null;this.src='https://placehold.co/128x128/00000000/ffffff?text=Meme'">
                </div>

                <div class="mt-2 text-base text-gray-400 flex items-center justify-center gap-4">
                    <span class="flex items-center gap-2 "><i class="fas fa-house-circle-check"></i>Entrega y Service en <strong class="text-white"><i>üåäLa Costa</i></strong></span>
                </div>
            </header>
            
            <!-- Hero Product Images -->
            <img src="home-crox-A.png" id="home-crox-a" alt="Gabinete PC Gamer B√°sico" onerror="this.onerror=null;this.src='https://placehold.co/400x600/00000000/ffffff?text=PC+Case'">
            <img src="home-crox-B.png" id="home-crox-b" alt="Gabinete PC Gamer con Perif√©ricos" onerror="this.onerror=null;this.src='https://placehold.co/400x600/00000000/ffffff?text=PC+Bundle'">

             <div class="hook-section text-center max-w-4xl mx-auto mt-6 space-y-6">
                <div style="position: relative; z-index: 50;">
                    <p class="text-3xl font-bold"><strong><i>¬øGama Alta?</i><br class="sm:hidden"> ¬°Ni Hace Falta!</strong></p>
                    <p class="text-gray-200 font-saira text-xl mt-2">con MENO<b class="text-2xl">$</b> de la 1/2 <i class="text-violet-500 text-2xl">VOL√ÅS‚ö°</i></p>
                    <p class="text-gray-200 font-saira text-xl mt-1">pq lo que cuenta</p>
                    <p class="text-gray-200 font-saira text-xl mt-1">no es <i>La M√°quina</i>... es <i><b>La Experiencia ‚ôæÔ∏è</b></i></p>
                </div>
                 
                 <!-- NEW GRID LAYOUT FOR FEATURE CARDS -->
                 <div id="section-front-features" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 px-4 md:px-0">
                     <div class="feature-card">
                         <img src="WinUpRound.png" alt="Logo de Windows 11" class="w-24 h-24 mb-3" onerror="this.onerror=null;this.src='https://placehold.co/96x96/00000000/ffffff?text=Win11'">
                         <h4 class="font-saira font-bold text-white text-xl leading-tight">Windows 11 Optimizado</h4>
                         <p class="text-s text-gray-300 mt-1">Ligero | Moderno | Eficaz</p>
                     </div>
             
                     <div class="feature-card">
                         <img src="SoftInstalled.png" alt="Icono de Software Instalado" class="w-24 h-24 mb-3" onerror="this.onerror=null;this.src='https://placehold.co/96x96/00000000/ffffff?text=Soft'">
                         <h4 class="font-saira font-bold text-white text-xl leading-tight">Software Clave Integrado</h4>
                         <p class="text-s text-gray-300 mt-1">A Elecci√≥n ‚úî</p>
                     </div>
             
                     <div class="feature-card">
                         <img src="HardSelect.png" alt="Icono de Hardware Seleccionado" class="w-24 h-24 mb-3" onerror="this.onerror=null;this.src='https://placehold.co/96x96/00000000/ffffff?text=Hard'">
                         <h4 class="font-saira font-bold text-white text-xl leading-tight">Hardware Seleccionado</h4>
                         <p class="text-s text-gray-300 mt-1">Equilibrando Precio/Calidad </p>
                     </div>
             
                     <div class="feature-card animated-bg-games">
                         <div class="corner-ribbon-wrapper"><div class="corner-ribbon"><span class="corner-ribbon-text">OFERTA</span><br><span class="despegue-text text-violet-700">DESPEGUE</span></div></div>
                         <div class="text-orange-400 text-4xl mb-3"><i class="fas fa-gift"></i></div>
                         <h4 class="font-saira font-bold text-white text-xl leading-tight">Hasta <p class="text-orange-400 text-xl">3 Juegos Incluidos</p></h4>
                         <p class="text-s text-gray-300 mt-1">Elegilos ‚úî</p>
                     </div>

                    <!-- Card de Soporte T√©cnico Modificada -->
                    <div class="feature-card relative lg:col-span-2 soporte-tecnico-card" style="padding: 1rem; overflow: hidden; min-height: 200px;">
                        <img src="memde_think.png" alt="Soporte t√©cnico personalizado"
                            class="absolute -z-10 bottom-0 right-0 h-4/5 w-auto opacity-80 pointer-events-none
                                md:z-10 md:opacity-100 md:h-[110%] md:-right-4"
                            onerror="this.onerror=null;this.src='https://placehold.co/240x264/00000000/ffffff?text=Yo'">
                        
                        <div class="relative z-10 w-full h-full flex flex-col justify-start items-start text-left">
                            <div class="flex items-center gap-4 mb-2 mt-1 sm:mb-3 sm:mt-0">
                                <img src="SoportePersonal.png" alt="Icono de Soporte T√©cnico" class="w-20 h-20 sm:w-16 sm:h-16 md:w-20 md:h-20 flex-shrink-0" onerror="this.onerror=null;this.src='https://placehold.co/96x96/00000000/ffffff?text=Soporte'">
                                <h4 class="font-saira font-bold text-white text-2xl leading-tight whitespace-nowrap mt-1 sm:mt-0">Soporte T√©cnico</h4>
                            </div>
                            <div class="space-y-1 text-sm text-gray-300 max-w-xs pl-0">
                                <p class="flex items-center justify-start"><i class="fas fa-comments blueish fa-fw w-6"></i><span class="ml-2">Contacto Directo</span></p>
                                <p class="flex items-center justify-start"><i class="fas fa-desktop blueish fa-fw w-6"></i><span class="ml-2">Asistencia Remota</span></p>
                                <div class="flex items-center justify-start">
                                    <i class="fas fa-screwdriver blueish fa-fw w-6"></i>
                                    <div class="ml-2">
                                        <p>Servicio a Domicilio</p>
                                        <p class="text-xs text-gray-400 -mt-1">en todo el Partido de La Costa</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Yellow Button for Tablet View -->
                    <div class="hidden md:flex lg:hidden items-center justify-center">
                        <a href="#games-section" class="special-subtitle inline-block text-lg px-6 py-3 transition duration-300 transform hover:scale-105">
                            <div class="flex items-center justify-center gap-5">
                                <i class="fas fa-tasks text-2xl"></i>
                                <div class="text-left">
                                    <span class="block leading-tight">Us√° esta Web Interactiva</span>
                                    <span class="block text-2sm font-sans -mt-2">para simular tu pedido</span>
                                </div>
                            </div>
                        </a>
                    </div>
                 </div>
             </div>

             <div class="text-center mt-8 md:hidden lg:block">
                <a href="#games-section" class="special-subtitle inline-block text-lg px-6 py-3 transition duration-300 transform hover:scale-105">
                    <div class="flex items-center justify-center gap-5">
                        <i class="fas fa-tasks text-2xl"></i>
                        <div class="text-left">
                            <span class="block leading-tight">Us√° esta Web Interactiva</span>
                            <span class="block text-2sm font-sans -mt-2">para simular tu pedido</span>
                        </div>
                    </div>
                </a>
             </div>
             
             <section class="hidden bg-gray-800/50 border border-gray-700 rounded-2xl p-6 md:p-8 max-w-3xl mx-auto">
                <div class="grid grid-cols-1 md:grid-cols-3 gap-8 text-center">
                    <div class="flex flex-col items-center">
                        <i class="fas fa-tasks text-4xl text-orange-400 mb-3"></i>
                        <h3 class="text-xl font-bold text-gray-200">1. Chec√° tu Pedido</h3>
                    </div>
                    <div class="flex flex-col items-center">
                         <i class="fab fa-whatsapp text-4xl green-333 mb-3"></i>
                        <h3 class="text-xl font-bold text-gray-200">2. Envi√°melo</h3>
                    </div>
                    <div class="flex flex-col items-center">
                        <i class="fas fa-comments text-4xl text-cyan-400 mb-3"></i>
                        <h3 class="text-xl font-bold text-gray-200">3. Despej√° tus Dudas</h3>
                    </div>
                </div>
            </section>
        </div>

        <section class="my-16 text-center max-w-3xl mx-auto px-4">
            <h2 class="text-5xl font-bold mb-4 text-white">La M√°quina</h2>
            <p class="text-lg text-gray-300 font-saira">
               El <span class="text-indigo-400 text-2">hardware</span> impacta directamente en los limites de la experiencia. Luego de investigarlo en profundidad y testear diversas opciones, eleg√≠ promediar una √∫nica <b class="text-amber-400">configuraci√≥n balanceada</b>.
               <div class="font-vt323 text-5xl mt-3 green-333">
                <p>Combo Recomendado</p>
               <p class="text-3xl green-777 -mt-3">Poderosamente Suficiente</p>
               <p class="-mt-3">‚ñº</p>
               </div>
            </p>
        </section>


        <h2 class="-mt-10 text-4xl font-bold mb-4 text-center">Componentes</h2>
        <div class="max-w-3xl mx-auto bg-gray-800 rounded-2xl p-6 md:p-8 mb-12">
            <section id="component-section" class="flex flex-col md:flex-row items-center gap-x-8 gap-y-6">
                <div class="w-full md:w-1/3 flex-shrink-0">
                    <div id="slideshow-container" class="relative w-full rounded-xl shadow-lg overflow-hidden cursor-pointer">
                        </div>
                </div>
                <div class="w-full md:w-2/3">
                    <ul id="component-list" class="space-y-3 text-gray-300">
                        <li class="flex items-start gap-3"><i class="fas fa-microchip text-indigo-500 mt-1"></i><span><strong>Procesador:</strong> Intel i5 3.1Ghz <small class="font-black">4 N√∫cleos</small></span></li>
                        <li class="flex items-start gap-3"><i class="fas fa-desktop text-indigo-500 mt-1"></i><span><strong>Motherboard:</strong> H61-M2 <small>OEM</small></span></li>
                        <li class="flex items-start gap-3"><i class="fas fa-memory text-indigo-500 mt-1"></i><span><strong>RAM:</strong> 16GB DDR3 <small class="font-black">Dual Channel</small></span></li>
                        <li class="flex items-start gap-3"><i class="fas fa-gamepad text-indigo-500 mt-1"></i><span><strong>Gr√°ficos:</strong> NVIDIA GT 740 2GB<small class="font-black"> GDDR5</small></span></li>
                        <li class="flex items-start gap-3"><i class="fas fa-hdd text-indigo-500 mt-1"></i><span><strong>Almacenamiento:</strong> 480GB SSD <small class="font-black">SATA</small></span></li>
                        <li class="flex items-start gap-3"><i class="fas fa-bolt text-indigo-500 mt-1"></i><span><strong>Fuente:</strong> ATX 550w</span></li>
                        <li class="flex items-start gap-3"><i class="fab fa-windows text-indigo-500 mt-1"></i><span><strong>Sistema Operativo:</strong> WindOS 11 Pro<small> 23H2</small></span></li>
                        <small>*monitor/teclado/mouse aparte*</small>
                    </ul>
                </div>
            </section>
        </div>

        <section id="garantia-section" class="mb-12">
            <h2 class="text-3xl font-bold text-center mb-8">Condiciones y Garant√≠a</h2>
            <div class="max-w-3xl mx-auto bg-gray-800 rounded-2xl p-6 md:p-8 space-y-6">
                <ul class="space-y-4 text-gray-300">
                    <li class="flex items-start gap-3"><i class="fas fa-star green-333 mt-1"></i><span><strong>Componentes Nuevos:</strong> Con garant√≠a de proveedores de confianza.</span></li>
                    <li class="flex items-start gap-3"><i class="fas fa-recycle text-cyan-400 mt-1"></i><span><strong>Componentes Usados:</strong> Podemos <i>reciclar</i> los tuyos para abaratar el precio.</span></li>
                    <li class="flex items-start gap-3"><i class="fas fa-shield-alt text-yellow-400 mt-1"></i><span><strong>Garant√≠a Total:</strong> 12 meses de garant√≠a en todos los componentes.</span></li>
                </ul>
                <div class="neon-green-highlight p-4 rounded-lg flex items-center justify-center gap-3 text-center">
                    <i class="fas fa-headset text-2xl"></i>
                    <span class="text-xl font-bold text-gray-200">Servicio Postventa | </span>
                    <span class="font-gamer text-xs">¬øAlg√∫n Problema?<br>¬°Lo Arreglo!</span>
                </div>
            </div>
        </section>

        <form id="orderForm">
            <section id="games-section" class="mb-12">
                <h2 class="text-3xl font-bold text-center mb-8">Juegazos que Viajanüëå</h2>
                <p class="text-center green-333 -mt-4 mb-4 font-gamer">üëáSeleccion√° hasta 3</p>
                <p class="text-center text-violet-600 -mt-4 mb-8 font-gamer">Van Instalados!üíæ</p>
                <div id="game-grid-container" class="px-4">
                    <div id="game-grid-wrapper">
                        <div id="game-list" class="pt-2 pb-2 grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-6">
                        </div>
                    </div>
                    <div id="load-more-overlay" style="pointer-events:auto;"></div>
                </div>
                <div class="text-center mt-6">
                    <button type="button" id="load-more-games" class="load-more-button font-gamer text-lg">Ver M√°s</button>
                    <p id="no-more-games" class="text-gray-500 mt-4 hidden">¬øNo viste el que quer√©s? Pedimelo en Notasüìù</p>
                </div>
            </section>

            <section id="section-software" class="mb-12">
                <h2 class="text-5xl font-bold text-center mb-8">Programas Clave</h2>
                <p class="text-center font-saira text-xl mb-1">Te marco lo que Recomiendoüëç</p>
                <p class="text-center text-gray-100 mb-1 text-xl">‚úÖ¬°Hac√© TU Selecci√≥n!</p>
                <p class="text-center text-gray-400 mb-6">Pod√©s modificarla luego...</p>
                <div id="software-list" class="max-w-2xl mx-auto space-y-4">
                    </div>
                <p class="text-center text-gray-400 mt-6">¬øFalta el tuyo? Pedimelo en Notasüìù</p>
            </section>

            <section class="mb-12">
                <h2 class="text-3xl font-bold text-center mb-3">Perif√©ricos Extra</h2>
                <p class="text-center text-gray-300 mb-3">Agreg√° Comodidad al Mando</p>
                <div class="grid grid-cols-2 gap-6 max-w-lg mx-auto">
                    <div id="joystick-card" class="card-peripheral bg-gray-800 p-2 rounded-xl border-2 border-transparent cursor-pointer">
                        <div class="image-wrapper relative aspect-[4/3]">
                            <img src="comps/xboxc1.jpg" alt="Joystick Xbox 360 Gen√©rico" class="rounded-md w-full h-full object-cover" onerror="this.onerror=null;this.src='https://placehold.co/400x300/111827/ffffff?text=Joystick'">
                            <span id="joystick-badge" class="absolute top-2 right-2 bg-indigo-500 text-white text-xs font-bold rounded-full h-6 w-6 items-center justify-center hidden">x2</span>
                        </div>
                    </div>
                    <div id="mouse-keyboard-card" class="card-peripheral bg-gray-800 p-2 rounded-xl border-2 border-transparent cursor-pointer">
                        <div class="image-wrapper aspect-[4/3]">
                           <img src="comps/tecmou.jpg" alt="Combo Teclado y Mouse Inal√°mbrico" class="rounded-md w-full h-full object-cover" onerror="this.onerror=null;this.src='https://placehold.co/400x300/111827/ffffff?text=Teclado+y+Mouse'">
                        </div>
                    </div>
                </div>
                <div class="grid grid-cols-2 gap-6 max-w-lg mx-auto mt-2 text-center text-gray-400 text-sm">
                    <p>Joystick Xbox 360 (+25k)<br>Cable 2.5 mts</p>
                    <p>Mouse y Teclado (+36k)<br>Inal√°mbrico</p>
                </div>

                <div class="text-center mt-10 max-w-4xl mx-auto">
                    <div id="selected-games-section" class="mb-6 hidden">
                      <p class="text-gray-400 text-lg">Juegos Incluidos</p>
                      <div id="selected-games-list" class="flex justify-center flex-wrap gap-2 mt-2">
                        </div>
                    </div>
                    
                    <div class="flex flex-col items-center">
                        <h2 class="text-3xl font-bold mb-4">Precio Total</h2>
                        <div class="grid grid-cols-2 gap-y-2 md:gap-x-4 w-full max-w-lg mt-4">
                            <div class="row-start-1 col-start-1 flex justify-center items-center">
                                <div class="relative h-24 w-40">
                                    <span class="offer-banner-contado font-saira">al contado</span>
                                    <span class="offer-banner-main font-saira">¬°OFERTA √öNICA!</span>
                                </div>
                            </div>

                            <div class="row-start-1 col-start-2 flex items-center justify-start">
                                <div>
                                    <p class="lucas-price text-left ml-4 font-saira">$<span id="total-price">500</span></p>
                                    <p class="text-2xl md:text-3xl text-cyan-400/70 font-saira text-left ml-4 -mt-2">LUCAS</p>
                                </div>
                            </div>
                            
                            <div class="row-start-2 col-start-1 flex items-center justify-center text-right pr-2">
                                <div>
                                    <p class="text-sm green-333 whitespace-nowrap"><i class="fas fa-truck mr-1"></i>Entrega GRATIS</p>
                                    <p class="text-base text-white font-bold">üåä En Toda <strong class="text-white">La Costa</strong></p>
                                </div>
                            </div>

                            <div class="row-start-2 col-start-2 flex items-center justify-start pl-4">
                                <div>
                                    <p id="total-price-usd" class="font-saira text-2xl text-violet-400 hidden cursor-pointer"></p>
                                    <a id="usd-link-bottom" href="#" class="text-xs text-gray-500 hover:underline hidden -mt-1"><p>Ver Cotizaciones</p></a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

            </section>
<br><br>

            <section class="mb-12 text-center">
                <h2 class="text-3xl font-bold text-center mb-8">Notasüìù</h2>
                <textarea id="extra-notes" class="w-full max-w-xl mx-auto block bg-gray-800 border border-gray-700 rounded-lg p-4 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition" rows="4" placeholder="ü§î¬øDudas?&#10;üíæ¬øM√°s Soft?&#10;‚öôÔ∏è¬øOtro Hard?&#10;¬øAlguna otra cuesti√≥n? . . ."></textarea>
            </section>

            <div class="text-center">
                <p id="pre-submit-text" class="text-gray-400 mb-7">Enviame tu Pedido/Consulta</p>
                <div class="flex items-center justify-center">
                    <button id="submit-button" type="submit" class="cta-button text-white font-bold py-4 px-10 rounded-full text-xl flex items-center justify-center gap-4">
                        <i class="fab fa-whatsapp text-4xl"></i>
                        <span>¬°Vamos a WhatsApp!</span>
                    </button>
                </div>
                <div id="confirmation-message" class="hidden text-center p-6 bg-gray-900/80 border-2 border-green-333 rounded-2xl max-w-md mx-auto mt-4">
                    <i class="fas fa-check-circle text-5xl green-333 mb-4"></i>
                    <h3 class="text-2xl font-bold text-white mb-2">¬°Pedido enviado!</h3>
                    <p class="text-gray-300 font-roboto">Gracias por tu consulta. Te responderemos a la brevedad por WhatsApp.</p>
                </div>
            </div>
        </form>



        <footer class="text-center mt-16 pt-8 border-t border-gray-700">
            <div class="mb-6">
                <img src="logo.png" alt="kenna.inf" class="w-80 mx-auto mb-4" onerror="this.onerror=null;this.src='https://placehold.co/320x80/00000000/ffffff?text=Logo'">
                <a id="service-link" href="https://www.facebook.com/kenna.inf/reviews" target="_blank" class="text-indigo-400 hover:text-indigo-300 transition-colors">
                    <i class="fas fa-star"></i> Clientes Satisfechos<br class="sm:hidden"> con Mi Servicio
                </a>
            </div>
            <p class="text-gray-400 mb-4">Encontrame en Redes Sociales</p>
            <div class="flex justify-center gap-6 text-2xl">
                <a href="https://www.instagram.com/kenna.inf" target="_blank" class="text-gray-400 hover:text-white transition"><i class="fab fa-instagram"></i></a>
                <a href="https://www.facebook.com/kenna.inf" target="_blank" class="text-gray-400 hover:text-white transition"><i class="fab fa-facebook"></i></a>
            </div>
            <img id="memde_pointLeft" src="memde_pointLeft.png" alt="" onerror="this.onerror=null;this.src='https://placehold.co/250x300/00000000/ffffff?text=Yo'" style="left: 576.422px;">
        </footer>

    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // --- SMOOTH SCROLL FOR SPECIFIC LINK ---
            document.querySelector('a.special-subtitle[href="#games-section"]').addEventListener('click', function(e) {
                e.preventDefault();
                const targetId = this.getAttribute('href');
                const targetElement = document.querySelector(targetId);

                if (targetElement) {
                    const targetPosition = targetElement.offsetTop;
                    const startPosition = window.pageYOffset;
                    const distance = targetPosition - startPosition;
                    const duration = 1500; // 1.5 seconds for a slow, smooth scroll
                    let startTime = null;

                    function animation(currentTime) {
                        if (startTime === null) startTime = currentTime;
                        const timeElapsed = currentTime - startTime;
                        const run = ease(timeElapsed, startPosition, distance, duration);
                        window.scrollTo(0, run);
                        if (timeElapsed < duration) requestAnimationFrame(animation);
                    }

                    // easeInOutQuad easing function
                    function ease(t, b, c, d) {
                        t /= d / 2;
                        if (t < 1) return c / 2 * t * t + b;
                        t--;
                        return -c / 2 * (t * (t - 2) - 1) + b;
                    }
                    requestAnimationFrame(animation);
                }
            });

            // --- DATA ---
            const gameNames = ['GTA V','LoL', 'Dota 2', 'Overwatch 2', 'Minecraft', 'Rocket League', 'Need for Speed: Hot Pursuit Remastered','Need for Speed: Underground HD','Half Life: Black Mesa','Half Life 2 HD','Abe¬¥s Oddysey Remake','WoW Classic: en TurtleWoW','Dishonored 2', 'Borderlands 2', 'Portal 1 y 2', 'Left 4 Dead 2', 'BioShock Remaster','BioShock 2 Remaster', 'BioShock Infinite', 'Fallout 3','Fallout: New Vegas', 'Batman: Arkham Asylum','Batman: Arkham City', 'Sleeping Dogs: Definitive Edition', 'Tomb Raider (2013)', 'Mass Effect Legendary Edition', 'Far Cry 3', 'Deus Ex: Human Revolution', 'Serious Sam Classics: Revolution', 'Burnout Paradise', 'DiRT 3 Complete Edition', 'Need for Speed: Underground 2 HD','Need for Speed: Most Wanted HD', 'Blur', 'GRID 2','GRID Autosport', 'F1 2014', 'FIFA 17', 'PES 2017', 'NBA 2K17', 'FallGuys', 'Sims 4 + Expansiones','Spore: Aventuras Galacticas', 'Roblox', 'Call of Duty: Black Ops','Call of Duty: Black Ops 2', 'Metro 2033', 'Crysis 2', 'Bulletstorm', 'Dishonored', 'Max Payne 3', 'Singularity', 'F.E.A.R.','Mortal Kombat 11 Komplete Edition','Ultra Street Fighter IV','Ultimate Marvel vs. Capcom 3','The King of Fighters XIII','Injustice Gods Among Us','Heroes of Might & Magic HD V','Reckoning: Kingdoms of Amalur','Divinity Original Sin','Age of Empires II Definitive Edition','The Elder Scrolls V: Skyrim','The Elder Scrolls IV: Oblivion & AddOns HD'];
            const softwareData = [
                // SISTEMA
                { name: 'AVG AntiVirus', slug: 'avg_antivirus', checked: true, disabled: false, category: 'Sistema', descripcion: 'Antivirus gratuito y eficaz.' },
                { name: 'Avast AntiVirus', slug: 'avast_antivirus', checked: false, disabled: false, category: 'Sistema', descripcion: 'Igual que AVG pero m√°s molesto.' },
                { name: 'BitDefender', slug: 'bitdefender', checked: false, disabled: false, category: 'Sistema', descripcion: 'Excelente antivirus. Requiere cuenta gratuita.' },
                { name: 'MalwareBytes', slug: 'malwarebytes', checked: true, disabled: false, category: 'Sistema', descripcion: 'Elimina malware y spyware. Complementa antivirus.' },
                { name: 'Firewall App Blocker', slug: 'firewall_app_blocker', checked: false, disabled: false, category: 'Sistema', descripcion: 'Bloquea el acceso a internet de las aplicaciones elegidas.' },
                { name: 'Fraps', slug: 'fraps', checked: true, disabled: false, category: 'Sistema', descripcion: 'Captura pantalla y FPS. Para tunear juegos es fundamental.' },
                { name: 'HW Monitor', slug: 'hw_monitor', checked: true, disabled: false, category: 'Sistema', descripcion: 'Monitorea temperatura y voltajes.' },
                { name: 'Macrium Reflect', slug: 'macrium_reflect', checked: false, disabled: false, category: 'Sistema', descripcion: 'Clona y respalda discos.' },
                { name: 'Space Sniffer', slug: 'space_sniffer', checked: true, disabled: false, category: 'Sistema', descripcion: 'Visualiza uso de espacio en disco. Ideal para hacer lugar.' },
                { name: 'Uninstall Tool', slug: 'uninstall_tool', checked: true, disabled: false, category: 'Sistema', descripcion: 'Desinstala programas a fondo.' },
                { name: 'Wise Memory Optimizer', slug: 'wise_memory_optimizer', checked: true, disabled: false, category: 'Sistema', descripcion: 'Libera y optimiza la RAM.' },
                { name: 'Wise Registry Cleaner', slug: 'wise_registry_cleaner', checked: false, disabled: false, category: 'Sistema', descripcion: 'Limpia el registro de Windows.' },
                // MULTIMEDIA
                { name: 'Hear', slug: 'hear', checked: false, disabled: false, category: 'Multimedia', descripcion: 'Mejora el audio del sistema. Alta configuraci√≥n.' },
                { name: 'PotPlayer', slug: 'potplayer', checked: true, disabled: false, category: 'Multimedia', descripcion: 'Reproductor de video avanzado.' },
                { name: 'VLC Player', slug: 'vlc_player', checked: false, disabled: false, category: 'Multimedia', descripcion: 'Reproduce cualquier formato de video.' },
                { name: 'WinAmp', slug: 'winamp', checked: true, disabled: false, category: 'Multimedia', descripcion: 'Cl√°sico reproductor de m√∫sica, renovado por la comunidad.' },
                { name: 'YouTube', slug: 'youtube', checked: true, disabled: false, category: 'Multimedia', descripcion: 'YouTube *sin publicidad*.' },
                { name: 'Spotify', slug: 'spotify', checked: true, disabled: false, category: 'Multimedia', descripcion: 'M√∫sica en streaming.' },
                { name: 'Stremio', slug: 'stremio', checked: true, disabled: false, category: 'Multimedia', descripcion: 'Pel√≠culas y series online.' },
                // WEB
                { name: 'Brave', slug: 'brave', checked: true, disabled: false, category: 'Web', descripcion: 'Navegador r√°pido y seguro basado en Chrome. Bloquea publicidad.' },
                { name: 'Opera GX', slug: 'opera_gx', checked: true, disabled: false, category: 'Web', descripcion: 'Navegador gamer personalizable. Bloquea publicidad.' },
                { name: 'Google Chrome', slug: 'google_chrome', checked: true, disabled: false, category: 'Web', descripcion: 'Navegador web popular.' },
                { name: 'WhatsApp', slug: 'whatsapp', checked: true, disabled: false, category: 'Web', descripcion: 'Mensajer√≠a instant√°nea.' },
                { name: 'Discord', slug: 'discord', checked: false, disabled: false, category: 'Web', descripcion: 'Chat de voz y texto para comunidades.' },
                { name: 'Zoom', slug: 'zoom', checked: false, disabled: false, category: 'Web', descripcion: 'Videollamadas y reuniones online.' },
                { name: 'Free Download Manager', slug: 'freedownloadmanager', checked: true, disabled: false, category: 'Web', descripcion: 'Gestor de descargas y torrents eficiente.' },
                { name: 'JDownloader 2', slug: 'jdownloader_2', checked: false, disabled: false, category: 'Web', descripcion: 'Descarga archivos de internet.' },
                { name: 'qBitTorrent', slug: 'qbittorrent', checked: false, disabled: false, category: 'Web', descripcion: 'Descarga archivos de internet.' },
                // CREACI√ìN
                { name: 'Inkscape', slug: 'inkscape', checked: false, disabled: false, category: 'Creaci√≥n', descripcion: 'Gr√°ficos vectoriales. Ideal para dise√±ar logos profesionales.' },
                { name: 'Krita', slug: 'krita', checked: false, disabled: false, category: 'Creaci√≥n', descripcion: 'Pintura y arte digital.' },
                { name: 'Photopea', slug: 'photopea', checked: true, disabled: false, category: 'Creaci√≥n', descripcion: 'Clon de Photoshop online.' },
                { name: 'Canva', slug: 'canva', checked: true, disabled: false, category: 'Creaci√≥n', descripcion: 'Dise√±o gr√°fico f√°cil.' },
                { name: 'GIMP', slug: 'gimp', checked: false, disabled: false, category: 'Creaci√≥n', descripcion: 'Editor de im√°genes avanzado.' },
                { name: 'XnConvert', slug: 'xnconvert', checked: true, disabled: false, category: 'Creaci√≥n', descripcion: 'Conversi√≥n y mejora de im√°genes por lotes.' },
                { name: 'CapCut', slug: 'capcut', checked: false, disabled: false, category: 'Creaci√≥n', descripcion: 'Edici√≥n de video sencilla.' },
                { name: 'DaVinci Resolve', slug: 'davinci_resolve', checked: true, disabled: false, category: 'Creaci√≥n', descripcion: 'Edici√≥n de video profesional.' },
                { name: 'OBS Studio', slug: 'obs_studio', checked: true, disabled: false, category: 'Creaci√≥n', descripcion: 'Grabaci√≥n y streaming.' },
                { name: 'GitHub Desktop', slug: 'github_desktop', checked: false, disabled: false, category: 'Desarrollo', descripcion: 'Cliente visual para Git.' },
                { name: 'Visual Studio Code', slug: 'visual_studio_code', checked: false, disabled: false, category: 'Desarrollo', descripcion: 'Editor de c√≥digo moderno.' },
                // ...otros programas existentes...
            ];
            const toSlug = (str) => str.toLowerCase().replace(/[^\w\s-]/g, '').trim().replace(/[\s_-]+/g, '-').replace(/^-+|-+$/g, '');
            const games = gameNames.map(name => ({ name: name, slug: toSlug(name) }));
            
            // --- PRICE CALCULATION & USD ---
            const BASE_PRICE = 555000;
            const JOYSTICK_PRICE = 25000;
            const MOUSE_KEYBOARD_PRICE = 36000;
            let joystickCount = 0;
            let hasMouseKeyboard = false;
            const totalPriceEl = document.getElementById('total-price');
            const usdPriceTopEl = document.getElementById('usd-price-display-top');
            const usdPriceBottomEl = document.getElementById('total-price-usd');
            const usdLinkBottom = document.getElementById('usd-link-bottom');
            const usdLinkTop = document.getElementById('usd-link-top');
            let allDolarRates = []; // To store all rates for the popup

            function updatePrices(rate) {
                let total = BASE_PRICE;
                if (joystickCount > 0) total += joystickCount * JOYSTICK_PRICE;
                if (hasMouseKeyboard) total += MOUSE_KEYBOARD_PRICE;
                totalPriceEl.textContent = Math.floor(total / 1000);
                // Mostrar precio en USD solo con d√≥lar oficial
                let oficial = null;
                if (allDolarRates && allDolarRates.length) {
                    oficial = allDolarRates.find(r => r.nombre && r.nombre.toLowerCase().includes('oficial'));
                }
                // Si no est√° en allDolarRates, usar el par√°metro rate (de fetchDolarRate)
                if (!oficial && rate) {
                    oficial = { venta: rate };
                }
                if (oficial && oficial.venta) {
                    const totalUSD = total / oficial.venta;
                    const usdText = `$${totalUSD.toFixed(0)} USD`;
                    if(usdPriceTopEl) {
                        usdPriceTopEl.textContent = usdText;
                        usdPriceTopEl.classList.remove('hidden');
                        usdPriceTopEl.parentElement.style.display = '';
                    }
                    if(usdPriceBottomEl) {
                        usdPriceBottomEl.textContent = usdText;
                        usdPriceBottomEl.classList.remove('hidden');
                        usdPriceBottomEl.parentElement.style.display = '';
                    }
                    if(usdLinkTop) usdLinkTop.classList.remove('hidden');
                    if(usdLinkBottom) usdLinkBottom.classList.remove('hidden');
                } else {
                    if(usdPriceTopEl) usdPriceTopEl.parentElement.style.display = 'none';
                    if(usdPriceBottomEl) usdPriceBottomEl.parentElement.style.display = 'none';
                }
            }

            // UPDATED to use dolarapi.com
            async function fetchDolarRate() {
                try {
                    // Fetch for default display rate (Oficial)
                    const responseOficial = await fetch('https://dolarapi.com/v1/dolares/oficial');
                    if (!responseOficial.ok) throw new Error('Network response was not ok for Oficial rate');
                    const dataOficial = await responseOficial.json();
                    
                    if (dataOficial && dataOficial.venta) {
                        updatePrices(dataOficial.venta);
                    }

                    // Fetch all rates for the popup
                    const responseAll = await fetch('https://dolarapi.com/v1/dolares');
                    if (!responseAll.ok) throw new Error('Network response was not ok for All rates');
                    allDolarRates = await responseAll.json();

                } catch (error) {
                    console.error("Could not fetch exchange rate:", error);
                    // Hide USD display if API fails
                    if(usdPriceTopEl) usdPriceTopEl.parentElement.style.display = 'none';
                    if(usdPriceBottomEl) usdPriceBottomEl.parentElement.style.display = 'none';
                }
            }

            // --- UI POPULATION ---
            const gameListContainer = document.getElementById('game-list');
             games.forEach(game => {
                 const imageSrc = `cover/${game.slug}.webp`;
                 const cardEl = document.createElement('div');
                 cardEl.className = 'card-game'; 
                 cardEl.id = `card-game-${game.slug}`;
                 cardEl.innerHTML = `
                     <input type="checkbox" id="game-${game.slug}" name="game" value="${game.name}" data-img-src="${imageSrc}" class="hidden">
                     <label for="game-${game.slug}" class="rounded-xl cursor-pointer transition">
                         <img src="${imageSrc}" alt="Car√°tula de ${game.name}" class="rounded-xl w-full h-full object-cover" onerror="this.onerror=null;this.src='https://placehold.co/300x400/111827/4f46e5?text=${game.name.replace(/\s/g, '+')}';">
                         <div class="game-title-sticker hidden">${game.name}</div>
                     </label>`;
                 gameListContainer.appendChild(cardEl);
             });


            const softwareCategories = [
                { name: 'Sistema', description: 'Herramientas para mantener, optimizar y proteger tu PC.', icon: 'fa-shield-alt' },
                { name: 'Multimedia', description: 'Reproductores, audio y apps para disfrutar de m√∫sica y video.', icon: 'fa-photo-film' },
                { name: 'Web', description: 'Navegadores, mensajer√≠a y gestores de descargas.', icon: 'fa-globe' },
                { name: 'Creaci√≥n', description: 'Edici√≥n de im√°genes, video, dise√±o y herramientas para creadores.', icon: 'fa-paint-brush' },
                { name: 'Desarrollo', description: 'Herramientas para programar, editar c√≥digo y gestionar proyectos.', icon: 'fa-code' },
            ];

            const softwareListContainer = document.getElementById('software-list');
            softwareListContainer.innerHTML = '';

            softwareCategories.forEach(category => {
                const categoryWrapper = document.createElement('div');
                categoryWrapper.className = 'mb-8';
                // Add icon to category heading
                categoryWrapper.innerHTML = `<h3 class="font-bold text-lg text-violet-400 mb-2 flex items-center gap-2"><i class="fas ${category.icon} text-violet-300 text-xl"></i> ${category.name}</h3>`;
                // Descripci√≥n de categor√≠a
                const descDiv = document.createElement('div');
                descDiv.className = 'software-cat-desc mb-4 px-4 py-2 rounded-xl text-base text-violet-100 bg-[#1a1332]';
                descDiv.style.transition = 'background 0.2s, color 0.2s';
                descDiv.textContent = category.description;
                categoryWrapper.appendChild(descDiv);
                // Grid de programas (checkboxes)
                const itemsWrapper = document.createElement('div');
                itemsWrapper.className = 'grid grid-cols-2 md:grid-cols-3 gap-4';
                const programs = softwareData.filter(item => item.category === category.name);
                programs.forEach(item => {
                    const disabledAttr = item.disabled ? 'disabled' : '';
                    const essentialClass = item.disabled ? 'essential-software' : '';
                    const disabledClass = item.disabled ? 'cursor-not-allowed' : '';
                    const checkboxColorClass = item.disabled ? 'text-green-333 focus:ring-green-333' : 'text-indigo-500 focus:ring-indigo-600';
                    const labelColorClass = item.disabled ? 'green-333' : 'text-white';
                    const softwareItemHTML = document.createElement('div');
                    softwareItemHTML.className = `relative bg-gray-800 p-3 rounded-lg flex items-center ${disabledClass} ${essentialClass}`;
                    const label = document.createElement('label');
                    label.setAttribute('for', `sw-${item.slug}`);
                    label.className = 'flex items-center cursor-pointer w-full';
                    const input = document.createElement('input');
                    input.id = `sw-${item.slug}`;
                    input.name = 'software';
                    input.value = item.name;
                    input.type = 'checkbox';
                    if (item.checked) input.checked = true;
                    if (item.disabled) input.disabled = true;
                    input.className = `w-5 h-5 ${checkboxColorClass} bg-gray-700 border-gray-600 rounded ring-offset-gray-800 focus:ring-2`;
                    const span = document.createElement('span');
                    span.className = `ml-3 text-sm font-medium ${labelColorClass}`;
                    span.textContent = item.name;
                    // --- HOVER Y TOUCH EN TODO EL DIV ---
                    function showProgramDesc() {
                        descDiv.textContent = `${item.name}: ${item.descripcion}`;
                    }
                    function showCategoryDesc() {
                        descDiv.textContent = category.description;
                    }
                    softwareItemHTML.addEventListener('mouseenter', showProgramDesc);
                    softwareItemHTML.addEventListener('mouseleave', showCategoryDesc);
                    label.appendChild(input);
                    label.appendChild(span);
                    softwareItemHTML.appendChild(label);
                    itemsWrapper.appendChild(softwareItemHTML);
                });
                categoryWrapper.appendChild(itemsWrapper);
                softwareListContainer.appendChild(categoryWrapper);
            });
            
            // --- SELECTED GAMES DISPLAY ---
            const selectedGamesSection = document.getElementById('selected-games-section');
            const selectedGamesList = document.getElementById('selected-games-list');

            function updateSelectedGamesList() {
                const selectedCheckboxes = document.querySelectorAll('input[name="game"]:checked');
                selectedGamesList.innerHTML = '';
                if (selectedCheckboxes.length > 0) {
                    selectedGamesSection.classList.remove('hidden');
                    selectedCheckboxes.forEach(checkbox => {
                        const gameName = checkbox.value;
                        const gameImageSrc = checkbox.dataset.imgSrc;
                        const gameSlug = toSlug(gameName);
                        const gameEl = document.createElement('div');
                        gameEl.className = 'w-1/4 md:w-1/5 p-1';
                        gameEl.innerHTML = `<a href="#card-game-${gameSlug}"><img src="${gameImageSrc}" alt="${gameName}" class="rounded-md shadow-lg w-full h-auto object-cover aspect-[3/4]" onerror="this.onerror=null;this.src='https://placehold.co/300x400/111827/4f46e5?text=${gameName.replace(/\s/g, '+')}';"></a>`;
                        selectedGamesList.appendChild(gameEl);
                    });
                } else {
                    selectedGamesSection.classList.add('hidden');
                }
            }


            // --- ERROR TOAST ---
            const errorToast = document.getElementById('error-toast');
            const errorToastMessage = document.getElementById('error-toast-message');
            const resetSelectionBtn = document.getElementById('reset-selection-btn');
            let errorToastTimeout;
            let consecutiveErrorClicks = 0;

            function hideErrorToast() {
                clearTimeout(errorToastTimeout);
                errorToast.classList.remove('show');
                resetSelectionBtn.classList.add('hidden');
            }
            
            function showErrorToast(message) {
                hideErrorToast(); 
                setTimeout(() => {
                    errorToastMessage.textContent = message;
                    if (consecutiveErrorClicks >= 2) {
                        resetSelectionBtn.classList.remove('hidden');
                    }
                   
                    errorToast.classList.add('show');
                    errorToastTimeout = setTimeout(hideErrorToast, 4000);
                }, 150);
            }
            
            function resetGameSelection() {
                document.querySelectorAll('input[name="game"]:checked').forEach(cb => {
                    cb.checked = false;
                    const label = cb.nextElementSibling;
                    const sticker = label.querySelector('.game-title-sticker');
                    sticker.classList.add('hidden');
                });
                updateSelectedGamesList();
                hideErrorToast();
                consecutiveErrorClicks = 0;
            }
            resetSelectionBtn.addEventListener('click', resetGameSelection);


            // --- GAME GRID AND "LOAD MORE" LOGIC ---
            const gameGridWrapper = document.getElementById('game-grid-wrapper');
            const loadMoreGamesBtn = document.getElementById('load-more-games');
            const noMoreGamesMsg = document.getElementById('no-more-games');
            const loadMoreOverlay = document.getElementById('load-more-overlay');
            const ROWS_TO_SHOW_INITIALLY = 6;
            let isGridExpanded = false;
            const allGameCards = Array.from(gameListContainer.children);

            function setInitialGridHeight() {

                if (isGridExpanded || !allGameCards.length) return;

                const gridGap = parseInt(window.getComputedStyle(gameListContainer).getPropertyValue('grid-row-gap')) || 24;
                const cardHeight = allGameCards[0].offsetHeight;
                
                if (cardHeight === 0) {
                    setTimeout(setInitialGridHeight, 100); return;
                }

                const rowHeight = cardHeight + gridGap;
                const teaserHeight = rowHeight / 2;
                const targetHeight = (ROWS_TO_SHOW_INITIALLY * rowHeight) - gridGap + teaserHeight;
                
                gameGridWrapper.style.maxHeight = `${targetHeight}px`;

                const totalRows = Math.ceil(allGameCards.length / getColumnCount());
                if(ROWS_TO_SHOW_INITIALLY >= totalRows) {
                    loadMoreGamesBtn.click();
                }
            }
            
            function getColumnCount() {
                const screenWidth = window.innerWidth;
                if (screenWidth >= 1024) return 5;
                if (screenWidth >= 768) return 4;
                if (screenWidth >= 640) return 3;
                return 2;
            }

            loadMoreGamesBtn.addEventListener('click', () => {
                gameGridWrapper.style.maxHeight = `${gameListContainer.scrollHeight}px`;
                loadMoreGamesBtn.classList.add('hidden');
                noMoreGamesMsg.classList.remove('hidden');
                loadMoreOverlay.style.opacity = '0';
                isGridExpanded = true; 
                loadMoreOverlay.style.pointerEvents = 'none';
            });

            // --- HERO PRODUCT IMAGES POSITIONING ---
            function positionCroxImages() {
                const croxA = document.getElementById('home-crox-a');
                const croxB = document.getElementById('home-crox-b');
                const features = document.getElementById('section-front-features');
                const wrapper = document.getElementById('hero-wrapper');
                const hookSection = document.querySelector('.hook-section'); 
                
                if (croxA && croxB && features && wrapper && hookSection) {
                    // Vertical positioning
                    const wrapperRect = wrapper.getBoundingClientRect();
                    const bottomValue = (wrapperRect.height - features.offsetTop) + 10;
                    croxA.style.bottom = `${bottomValue}px`;
                    croxB.style.bottom = `${bottomValue}px`;

                    // Horizontal positioning
                    if (window.innerWidth > 639) {
                        const hookSectionRect = hookSection.getBoundingClientRect();
                        const wrapperRect = wrapper.getBoundingClientRect();
                        const marginRem = -12;
                        const marginPx = marginRem * parseFloat(getComputedStyle(document.documentElement).fontSize);

                        // Position home-crox-a
                        const croxALeft = (hookSectionRect.left - wrapperRect.left) - croxA.offsetWidth - marginPx;
                        croxA.style.left = `${croxALeft}px`;
                        
                        // Position home-crox-b
                        const croxBLeft = (hookSectionRect.right - wrapperRect.left) + marginPx;
                        croxB.style.left = `${croxBLeft}px`;
                    }
                }
            }

            window.addEventListener('resize', setInitialGridHeight);


            // --- EVENT LISTENERS ---
            document.querySelectorAll('input[name="game"]').forEach(checkbox => {
                checkbox.addEventListener('change', (e) => {
                    if (e.target.checked && document.querySelectorAll('input[name="game"]:checked').length > 3) {
                        e.target.checked = false;
                        consecutiveErrorClicks++;
                        showErrorToast('MAX 3 Juegos Incluidos');
                        return;
                    }

                    consecutiveErrorClicks = 0;
                    hideErrorToast();
                    
                    const label = e.target.nextElementSibling;
                    const sticker = label.querySelector('.game-title-sticker');
                    if (e.target.checked) {
                        const randomTop = Math.floor(Math.random() * 50) + 15;
                        const randomLeft = Math.floor(Math.random() * 40) + 10;
                        const randomRotate = Math.floor(Math.random() * 20) - 10;
                        sticker.style.top = `${randomTop}%`;
                        sticker.style.left = `${randomLeft}%`;

                        sticker.style.transform = `rotate(${randomRotate}deg)`;
                        sticker.classList.remove('hidden');
                    } else {
                        sticker.classList.add('hidden');
                    }
                    updateSelectedGamesList();
                });
            });

            const joystickCard = document.getElementById('joystick-card');
            const joystickImg = joystickCard.querySelector('img');
            const joystickBadge = document.getElementById('joystick-badge');
            joystickCard.addEventListener('click', () => {
                joystickCount = (joystickCount + 1) % 3; // Cycle 0, 1, 2
                joystickCard.classList.toggle('active', joystickCount > 0);
                joystickBadge.classList.toggle('hidden', joystickCount !== 2);

                if (joystickCount === 2) {
                    joystickImg.src = 'comps/xboxc2.jpg';
                } else {
                    joystickImg.src = 'comps/xboxc1.jpg';
                }

                updatePrices(allDolarRates.find(rate => rate.casa === 'oficial')?.venta);
            });

            const mouseKeyboardCard = document.getElementById('mouse-keyboard-card');
            mouseKeyboardCard.addEventListener('click', () => {
                hasMouseKeyboard = !hasMouseKeyboard;
                mouseKeyboardCard.classList.toggle('active', hasMouseKeyboard);
                updatePrices(allDolarRates.find(rate => rate.casa === 'oficial')?.venta);
            });
            
            document.getElementById('orderForm').addEventListener('submit', function(e) {
                e.preventDefault();
                const phoneNumber = '5492252513233';

                const selectedGames = Array.from(document.querySelectorAll('input[name="game"]:checked')).map(cb => cb.value);
                const selectedSoftware = Array.from(document.querySelectorAll('input[name="software"]:checked')).map(cb => cb.id.replace('sw-', ''));
                const extraNotes = document.getElementById('extra-notes').value;

                let message = `¬°Hola, me interesa la Nave del Medio!\n\n`;
                if (selectedGames.length > 0) message += `*Juegos:* ${selectedGames.join(', ')}\n`;

                let peripheralsMessage = '';
                if (joystickCount > 0) peripheralsMessage += `${joystickCount} Joystick(s)`;
                if (hasMouseKeyboard) {
                    if (peripheralsMessage) peripheralsMessage += ' y ';
                    peripheralsMessage += 'Mouse y Teclado Inal√°mbrico';
                }
                if(peripheralsMessage) message += `*Perif√©ricos:* ${peripheralsMessage}\n`;

                // --- Programas seleccionados, agrupados por categor√≠a ---
                if (selectedSoftware.length > 0) {
                    const catOrder = ['Sistema', 'Multimedia', 'Web', 'Creaci√≥n', 'Desarrollo'];
                    let programasPorCat = {};
                    catOrder.forEach(cat => programasPorCat[cat] = []);
                    selectedSoftware.forEach(slug => {
                        const prog = softwareData.find(p => p.slug === slug);
                        if (prog && programasPorCat[prog.category]) {
                            programasPorCat[prog.category].push(prog.name);
                        }
                    });
                    message += `*Programas:*\n`;
                    catOrder.forEach(cat => {
                        if (programasPorCat[cat].length > 0) {
                            message += `- ${cat}: ${programasPorCat[cat].join(', ')}\n`;
                        }
                    });
                }

                if (extraNotes.trim() !== '') message += `*Notas:* ${extraNotes}\n`;

                message += `\nPrecio Total: $${totalPriceEl.textContent}.000`;
                message += `\n¬°Quedo a la espera de tu respuesta!`;
                window.open(`https://wa.me/${phoneNumber}?text=${encodeURIComponent(message)}`, '_blank');
            });

            // --- DOLAR POPUP LOGIC ---
            const dolarPopup = document.getElementById('dolar-popup');
            const dolarRatesList = document.getElementById('dolar-rates-list');
            const googleLink = document.getElementById('google-link');

            function showDolarPopup() {
                if (allDolarRates.length === 0) return;
                dolarRatesList.innerHTML = '';
                // Solo mostrar Oficial, Blue y Cripto
                const tiposPermitidos = [
                    { key: 'oficial', label: 'Oficial' },
                    { key: 'blue', label: 'Blue' },
                    { key: 'cripto', label: 'Cripto' }
                ];
                const mapApiKey = (nombre) => {
                    const n = nombre.toLowerCase();
                    if (n.includes('oficial')) return 'oficial';
                    if (n.includes('blue')) return 'blue';
                    if (n.includes('cripto')) return 'cripto';
                    return '';
                };
                let total = BASE_PRICE;
                if (joystickCount > 0) total += joystickCount * JOYSTICK_PRICE;
                if (hasMouseKeyboard) total += MOUSE_KEYBOARD_PRICE;
                tiposPermitidos.forEach(tipo => {
                    const rate = allDolarRates.find(r => mapApiKey(r.nombre) === tipo.key);
                    if (!rate) return;
                    const precioEnDolar = rate.venta ? (total / rate.venta) : null;
                    const name = tipo.label;
                    const rateEl = document.createElement('div');
                    rateEl.className = 'flex flex-col gap-1 mb-3 border-b border-gray-700/50 pb-2';
                    rateEl.innerHTML = `
                        <div class="flex justify-between items-center text-sm">
                            <span class="font-bold text-gray-300">${name}</span>
                            <div class="text-right">
                                <span class="text-gray-400">Compra: </span><span class="font-mono text-green-400">$${rate.compra}</span><br>
                                <span class="text-gray-400">Venta: </span><span class="font-mono text-green-400">$${rate.venta}</span>
                            </div>
                        </div>
                        <div class="text-violet-400 font-bold text-lg text-center mt-1">$${precioEnDolar ? precioEnDolar.toFixed(0) : '-'} USD</div>
                    `;
                    dolarRatesList.appendChild(rateEl);
                });
                googleLink.href = `https://www.google.com/search?q=${total}+ars+to+usd`;
                dolarPopup.classList.remove('hidden');
            }

            dolarPopup.addEventListener('click', (e) => {
                if (e.target.id === 'dolar-popup') {
                    dolarPopup.classList.add('hidden');
                }
            });

            document.getElementById('usd-link-top').addEventListener('click', (e) => { e.preventDefault(); showDolarPopup(); });
            document.getElementById('usd-price-display-top').addEventListener('click', showDolarPopup);
            document.getElementById('usd-link-bottom').addEventListener('click', (e) => { e.preventDefault(); showDolarPopup(); });
            document.getElementById('total-price-usd').addEventListener('click', showDolarPopup);


            // --- SLIDESHOW LOGIC ---
            const slideshowContainer = document.getElementById('slideshow-container');
            const componentList = document.getElementById('component-list');

            if (slideshowContainer && componentList) {
                const slideImages = ['comps/slideshow/c_fuente.webp', 'comps/slideshow/c_gabo1.webp', 'comps/slideshow/c_gabo2.webp', 'comps/slideshow/c_gt740.webp', 'comps/slideshow/c_mandos.webp'];
                let currentSlideIndex = 0;
                let slideInterval;

                function adjustSlideshowHeight() {
                    slideshowContainer.style.height = `${componentList.offsetHeight}px`;
                }

                function createSlides() {
                    slideImages.forEach((src, index) => {
                        const img = document.createElement('img');
                        img.src = src;
                        img.alt = `PC Gamer Build Image ${index + 1}`;

                        img.onerror=function() { this.src='https://placehold.co/400x300/1f2937/ffffff?text=Componente' };
                        img.style.opacity = index === 0 ? '1' : '0';
                        slideshowContainer.appendChild(img);
                    });
                }

                function showSlide(index) {
                    slideshowContainer.querySelectorAll('img').forEach((img, i) => {
                        img.style.opacity = i === index ? '1' : '0';
                    });
                }
                
                function nextSlide() {
                    currentSlideIndex = (currentSlideIndex + 1) % slideImages.length;
                    showSlide(currentSlideIndex);
                }

                slideInterval = setInterval(nextSlide, 4300);

                slideshowContainer.addEventListener('click', () => {
                    clearInterval(slideInterval);
                    nextSlide();
                });

                createSlides();
                adjustSlideshowHeight();
                window.addEventListener('resize', adjustSlideshowHeight);
            }

            // --- MEME IMAGE POSITIONING ---
            function positionMemeImage() {
                const serviceLink = document.getElementById('service-link');
                const memeImage = document.getElementById('memde_pointLeft');
                const footer = document.querySelector('footer');

                if (serviceLink && memeImage && footer) {
                    const serviceLinkRect = serviceLink.getBoundingClientRect();
                    const footerRect = footer.getBoundingClientRect();
                    
                    const leftPosition = serviceLinkRect.right - footerRect.left;
                    
                    // To prevent the image from overflowing on the right
                    const footerWidth = footer.offsetWidth;
                    const memeWidth = memeImage.offsetWidth;
                    const maxLeft = footerWidth - memeWidth;

                    // Apply the calculated left position, but not more than maxLeft
                    memeImage.style.left = `${Math.min(leftPosition, maxLeft)}px`;
                }
            }

            // --- Initial calls ---
            fetchDolarRate();
            updateSelectedGamesList();
            setInitialGridHeight();
            positionMemeImage();
            positionCroxImages();
            
            // --- Event Listeners ---
            window.addEventListener('resize', () => {
                setInitialGridHeight();
                positionMemeImage();
                positionCroxImages();
            });
        });
    </script>
</body>
</html>
